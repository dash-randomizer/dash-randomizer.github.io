#!/usr/bin/env node
import{createRequire as e}from"module";var t={2068:(e,t,s)=>{e=s.nmd(e);const wrapAnsi16=(e,t)=>(...s)=>{const r=e(...s);return`[${r+t}m`};const wrapAnsi256=(e,t)=>(...s)=>{const r=e(...s);return`[${38+t};5;${r}m`};const wrapAnsi16m=(e,t)=>(...s)=>{const r=e(...s);return`[${38+t};2;${r[0]};${r[1]};${r[2]}m`};const ansi2ansi=e=>e;const rgb2rgb=(e,t,s)=>[e,t,s];const setLazyProperty=(e,t,s)=>{Object.defineProperty(e,t,{get:()=>{const r=s();Object.defineProperty(e,t,{value:r,enumerable:true,configurable:true});return r},enumerable:true,configurable:true})};let r;const makeDynamicStyles=(e,t,n,i)=>{if(r===undefined){r=s(6931)}const o=i?10:0;const a={};for(const[s,i]of Object.entries(r)){const r=s==="ansi16"?"ansi":s;if(s===t){a[r]=e(n,o)}else if(typeof i==="object"){a[r]=e(i[t],o)}}return a};function assembleStyles(){const e=new Map;const t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright;t.bgColor.bgGray=t.bgColor.bgBlackBright;t.color.grey=t.color.blackBright;t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(const[s,r]of Object.entries(t)){for(const[s,n]of Object.entries(r)){t[s]={open:`[${n[0]}m`,close:`[${n[1]}m`};r[s]=t[s];e.set(n[0],n[1])}Object.defineProperty(t,s,{value:r,enumerable:false})}Object.defineProperty(t,"codes",{value:e,enumerable:false});t.color.close="[39m";t.bgColor.close="[49m";setLazyProperty(t.color,"ansi",(()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,false)));setLazyProperty(t.color,"ansi256",(()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,false)));setLazyProperty(t.color,"ansi16m",(()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,false)));setLazyProperty(t.bgColor,"ansi",(()=>makeDynamicStyles(wrapAnsi16,"ansi16",ansi2ansi,true)));setLazyProperty(t.bgColor,"ansi256",(()=>makeDynamicStyles(wrapAnsi256,"ansi256",ansi2ansi,true)));setLazyProperty(t.bgColor,"ansi16m",(()=>makeDynamicStyles(wrapAnsi16m,"rgb",rgb2rgb,true)));return t}Object.defineProperty(e,"exports",{enumerable:true,get:assembleStyles})},8818:(e,t,s)=>{const r=s(2068);const{stdout:n,stderr:i}=s(9318);const{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:a}=s(2415);const{isArray:c}=Array;const l=["ansi","ansi","ansi256","ansi16m"];const h=Object.create(null);const applyOptions=(e,t={})=>{if(t.level&&!(Number.isInteger(t.level)&&t.level>=0&&t.level<=3)){throw new Error("The `level` option should be an integer from 0 to 3")}const s=n?n.level:0;e.level=t.level===undefined?s:t.level};class ChalkClass{constructor(e){return chalkFactory(e)}}const chalkFactory=e=>{const t={};applyOptions(t,e);t.template=(...e)=>chalkTag(t.template,...e);Object.setPrototypeOf(t,Chalk.prototype);Object.setPrototypeOf(t.template,t);t.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")};t.template.Instance=ChalkClass;return t.template};function Chalk(e){return chalkFactory(e)}for(const[e,t]of Object.entries(r)){h[e]={get(){const s=createBuilder(this,createStyler(t.open,t.close,this._styler),this._isEmpty);Object.defineProperty(this,e,{value:s});return s}}}h.visible={get(){const e=createBuilder(this,this._styler,true);Object.defineProperty(this,"visible",{value:e});return e}};const u=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const e of u){h[e]={get(){const{level:t}=this;return function(...s){const n=createStyler(r.color[l[t]][e](...s),r.color.close,this._styler);return createBuilder(this,n,this._isEmpty)}}}}for(const e of u){const t="bg"+e[0].toUpperCase()+e.slice(1);h[t]={get(){const{level:t}=this;return function(...s){const n=createStyler(r.bgColor[l[t]][e](...s),r.bgColor.close,this._styler);return createBuilder(this,n,this._isEmpty)}}}}const d=Object.defineProperties((()=>{}),{...h,level:{enumerable:true,get(){return this._generator.level},set(e){this._generator.level=e}}});const createStyler=(e,t,s)=>{let r;let n;if(s===undefined){r=e;n=t}else{r=s.openAll+e;n=t+s.closeAll}return{open:e,close:t,openAll:r,closeAll:n,parent:s}};const createBuilder=(e,t,s)=>{const builder=(...e)=>{if(c(e[0])&&c(e[0].raw)){return applyStyle(builder,chalkTag(builder,...e))}return applyStyle(builder,e.length===1?""+e[0]:e.join(" "))};Object.setPrototypeOf(builder,d);builder._generator=e;builder._styler=t;builder._isEmpty=s;return builder};const applyStyle=(e,t)=>{if(e.level<=0||!t){return e._isEmpty?"":t}let s=e._styler;if(s===undefined){return t}const{openAll:r,closeAll:n}=s;if(t.indexOf("")!==-1){while(s!==undefined){t=o(t,s.close,s.open);s=s.parent}}const i=t.indexOf("\n");if(i!==-1){t=a(t,n,r,i)}return r+t+n};let f;const chalkTag=(e,...t)=>{const[r]=t;if(!c(r)||!c(r.raw)){return t.join(" ")}const n=t.slice(1);const i=[r.raw[0]];for(let e=1;e<r.length;e++){i.push(String(n[e-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[e]))}if(f===undefined){f=s(500)}return f(e,i.join(""))};Object.defineProperties(Chalk.prototype,h);const p=Chalk();p.supportsColor=n;p.stderr=Chalk({level:i?i.level:0});p.stderr.supportsColor=i;e.exports=p},500:e=>{const t=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi;const s=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g;const r=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/;const n=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi;const i=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function unescape(e){const t=e[0]==="u";const s=e[1]==="{";if(t&&!s&&e.length===5||e[0]==="x"&&e.length===3){return String.fromCharCode(parseInt(e.slice(1),16))}if(t&&s){return String.fromCodePoint(parseInt(e.slice(2,-1),16))}return i.get(e)||e}function parseArguments(e,t){const s=[];const i=t.trim().split(/\s*,\s*/g);let o;for(const t of i){const i=Number(t);if(!Number.isNaN(i)){s.push(i)}else if(o=t.match(r)){s.push(o[2].replace(n,((e,t,s)=>t?unescape(t):s)))}else{throw new Error(`Invalid Chalk template style argument: ${t} (in style '${e}')`)}}return s}function parseStyle(e){s.lastIndex=0;const t=[];let r;while((r=s.exec(e))!==null){const e=r[1];if(r[2]){const s=parseArguments(e,r[2]);t.push([e].concat(s))}else{t.push([e])}}return t}function buildStyle(e,t){const s={};for(const e of t){for(const t of e.styles){s[t[0]]=e.inverse?null:t.slice(1)}}let r=e;for(const[e,t]of Object.entries(s)){if(!Array.isArray(t)){continue}if(!(e in r)){throw new Error(`Unknown Chalk style: ${e}`)}r=t.length>0?r[e](...t):r[e]}return r}e.exports=(e,s)=>{const r=[];const n=[];let i=[];s.replace(t,((t,s,o,a,c,l)=>{if(s){i.push(unescape(s))}else if(a){const t=i.join("");i=[];n.push(r.length===0?t:buildStyle(e,r)(t));r.push({inverse:o,styles:parseStyle(a)})}else if(c){if(r.length===0){throw new Error("Found extraneous } in Chalk template literal")}n.push(buildStyle(e,r)(i.join("")));i=[];r.pop()}else{i.push(l)}}));n.push(i.join(""));if(r.length>0){const e=`Chalk template literal is missing ${r.length} closing bracket${r.length===1?"":"s"} (\`}\`)`;throw new Error(e)}return n.join("")}},2415:e=>{const stringReplaceAll=(e,t,s)=>{let r=e.indexOf(t);if(r===-1){return e}const n=t.length;let i=0;let o="";do{o+=e.substr(i,r-i)+t+s;i=r+n;r=e.indexOf(t,i)}while(r!==-1);o+=e.substr(i);return o};const stringEncaseCRLFWithFirstIndex=(e,t,s,r)=>{let n=0;let i="";do{const o=e[r-1]==="\r";i+=e.substr(n,(o?r-1:r)-n)+t+(o?"\r\n":"\n")+s;n=r+1;r=e.indexOf("\n",n)}while(r!==-1);i+=e.substr(n);return i};e.exports={stringReplaceAll:stringReplaceAll,stringEncaseCRLFWithFirstIndex:stringEncaseCRLFWithFirstIndex}},7391:(e,t,s)=>{const r=s(8510);const n={};for(const e of Object.keys(r)){n[r[e]]=e}const i={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};e.exports=i;for(const e of Object.keys(i)){if(!("channels"in i[e])){throw new Error("missing channels property: "+e)}if(!("labels"in i[e])){throw new Error("missing channel labels property: "+e)}if(i[e].labels.length!==i[e].channels){throw new Error("channel and label counts mismatch: "+e)}const{channels:t,labels:s}=i[e];delete i[e].channels;delete i[e].labels;Object.defineProperty(i[e],"channels",{value:t});Object.defineProperty(i[e],"labels",{value:s})}i.rgb.hsl=function(e){const t=e[0]/255;const s=e[1]/255;const r=e[2]/255;const n=Math.min(t,s,r);const i=Math.max(t,s,r);const o=i-n;let a;let c;if(i===n){a=0}else if(t===i){a=(s-r)/o}else if(s===i){a=2+(r-t)/o}else if(r===i){a=4+(t-s)/o}a=Math.min(a*60,360);if(a<0){a+=360}const l=(n+i)/2;if(i===n){c=0}else if(l<=.5){c=o/(i+n)}else{c=o/(2-i-n)}return[a,c*100,l*100]};i.rgb.hsv=function(e){let t;let s;let r;let n;let i;const o=e[0]/255;const a=e[1]/255;const c=e[2]/255;const l=Math.max(o,a,c);const h=l-Math.min(o,a,c);const diffc=function(e){return(l-e)/6/h+1/2};if(h===0){n=0;i=0}else{i=h/l;t=diffc(o);s=diffc(a);r=diffc(c);if(o===l){n=r-s}else if(a===l){n=1/3+t-r}else if(c===l){n=2/3+s-t}if(n<0){n+=1}else if(n>1){n-=1}}return[n*360,i*100,l*100]};i.rgb.hwb=function(e){const t=e[0];const s=e[1];let r=e[2];const n=i.rgb.hsl(e)[0];const o=1/255*Math.min(t,Math.min(s,r));r=1-1/255*Math.max(t,Math.max(s,r));return[n,o*100,r*100]};i.rgb.cmyk=function(e){const t=e[0]/255;const s=e[1]/255;const r=e[2]/255;const n=Math.min(1-t,1-s,1-r);const i=(1-t-n)/(1-n)||0;const o=(1-s-n)/(1-n)||0;const a=(1-r-n)/(1-n)||0;return[i*100,o*100,a*100,n*100]};function comparativeDistance(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}i.rgb.keyword=function(e){const t=n[e];if(t){return t}let s=Infinity;let i;for(const t of Object.keys(r)){const n=r[t];const o=comparativeDistance(e,n);if(o<s){s=o;i=t}}return i};i.keyword.rgb=function(e){return r[e]};i.rgb.xyz=function(e){let t=e[0]/255;let s=e[1]/255;let r=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92;s=s>.04045?((s+.055)/1.055)**2.4:s/12.92;r=r>.04045?((r+.055)/1.055)**2.4:r/12.92;const n=t*.4124+s*.3576+r*.1805;const i=t*.2126+s*.7152+r*.0722;const o=t*.0193+s*.1192+r*.9505;return[n*100,i*100,o*100]};i.rgb.lab=function(e){const t=i.rgb.xyz(e);let s=t[0];let r=t[1];let n=t[2];s/=95.047;r/=100;n/=108.883;s=s>.008856?s**(1/3):7.787*s+16/116;r=r>.008856?r**(1/3):7.787*r+16/116;n=n>.008856?n**(1/3):7.787*n+16/116;const o=116*r-16;const a=500*(s-r);const c=200*(r-n);return[o,a,c]};i.hsl.rgb=function(e){const t=e[0]/360;const s=e[1]/100;const r=e[2]/100;let n;let i;let o;if(s===0){o=r*255;return[o,o,o]}if(r<.5){n=r*(1+s)}else{n=r+s-r*s}const a=2*r-n;const c=[0,0,0];for(let e=0;e<3;e++){i=t+1/3*-(e-1);if(i<0){i++}if(i>1){i--}if(6*i<1){o=a+(n-a)*6*i}else if(2*i<1){o=n}else if(3*i<2){o=a+(n-a)*(2/3-i)*6}else{o=a}c[e]=o*255}return c};i.hsl.hsv=function(e){const t=e[0];let s=e[1]/100;let r=e[2]/100;let n=s;const i=Math.max(r,.01);r*=2;s*=r<=1?r:2-r;n*=i<=1?i:2-i;const o=(r+s)/2;const a=r===0?2*n/(i+n):2*s/(r+s);return[t,a*100,o*100]};i.hsv.rgb=function(e){const t=e[0]/60;const s=e[1]/100;let r=e[2]/100;const n=Math.floor(t)%6;const i=t-Math.floor(t);const o=255*r*(1-s);const a=255*r*(1-s*i);const c=255*r*(1-s*(1-i));r*=255;switch(n){case 0:return[r,c,o];case 1:return[a,r,o];case 2:return[o,r,c];case 3:return[o,a,r];case 4:return[c,o,r];case 5:return[r,o,a]}};i.hsv.hsl=function(e){const t=e[0];const s=e[1]/100;const r=e[2]/100;const n=Math.max(r,.01);let i;let o;o=(2-s)*r;const a=(2-s)*n;i=s*n;i/=a<=1?a:2-a;i=i||0;o/=2;return[t,i*100,o*100]};i.hwb.rgb=function(e){const t=e[0]/360;let s=e[1]/100;let r=e[2]/100;const n=s+r;let i;if(n>1){s/=n;r/=n}const o=Math.floor(6*t);const a=1-r;i=6*t-o;if((o&1)!==0){i=1-i}const c=s+i*(a-s);let l;let h;let u;switch(o){default:case 6:case 0:l=a;h=c;u=s;break;case 1:l=c;h=a;u=s;break;case 2:l=s;h=a;u=c;break;case 3:l=s;h=c;u=a;break;case 4:l=c;h=s;u=a;break;case 5:l=a;h=s;u=c;break}return[l*255,h*255,u*255]};i.cmyk.rgb=function(e){const t=e[0]/100;const s=e[1]/100;const r=e[2]/100;const n=e[3]/100;const i=1-Math.min(1,t*(1-n)+n);const o=1-Math.min(1,s*(1-n)+n);const a=1-Math.min(1,r*(1-n)+n);return[i*255,o*255,a*255]};i.xyz.rgb=function(e){const t=e[0]/100;const s=e[1]/100;const r=e[2]/100;let n;let i;let o;n=t*3.2406+s*-1.5372+r*-.4986;i=t*-.9689+s*1.8758+r*.0415;o=t*.0557+s*-.204+r*1.057;n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92;i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92;o=o>.0031308?1.055*o**(1/2.4)-.055:o*12.92;n=Math.min(Math.max(0,n),1);i=Math.min(Math.max(0,i),1);o=Math.min(Math.max(0,o),1);return[n*255,i*255,o*255]};i.xyz.lab=function(e){let t=e[0];let s=e[1];let r=e[2];t/=95.047;s/=100;r/=108.883;t=t>.008856?t**(1/3):7.787*t+16/116;s=s>.008856?s**(1/3):7.787*s+16/116;r=r>.008856?r**(1/3):7.787*r+16/116;const n=116*s-16;const i=500*(t-s);const o=200*(s-r);return[n,i,o]};i.lab.xyz=function(e){const t=e[0];const s=e[1];const r=e[2];let n;let i;let o;i=(t+16)/116;n=s/500+i;o=i-r/200;const a=i**3;const c=n**3;const l=o**3;i=a>.008856?a:(i-16/116)/7.787;n=c>.008856?c:(n-16/116)/7.787;o=l>.008856?l:(o-16/116)/7.787;n*=95.047;i*=100;o*=108.883;return[n,i,o]};i.lab.lch=function(e){const t=e[0];const s=e[1];const r=e[2];let n;const i=Math.atan2(r,s);n=i*360/2/Math.PI;if(n<0){n+=360}const o=Math.sqrt(s*s+r*r);return[t,o,n]};i.lch.lab=function(e){const t=e[0];const s=e[1];const r=e[2];const n=r/360*2*Math.PI;const i=s*Math.cos(n);const o=s*Math.sin(n);return[t,i,o]};i.rgb.ansi16=function(e,t=null){const[s,r,n]=e;let o=t===null?i.rgb.hsv(e)[2]:t;o=Math.round(o/50);if(o===0){return 30}let a=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(s/255));if(o===2){a+=60}return a};i.hsv.ansi16=function(e){return i.rgb.ansi16(i.hsv.rgb(e),e[2])};i.rgb.ansi256=function(e){const t=e[0];const s=e[1];const r=e[2];if(t===s&&s===r){if(t<8){return 16}if(t>248){return 231}return Math.round((t-8)/247*24)+232}const n=16+36*Math.round(t/255*5)+6*Math.round(s/255*5)+Math.round(r/255*5);return n};i.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7){if(e>50){t+=3.5}t=t/10.5*255;return[t,t,t]}const s=(~~(e>50)+1)*.5;const r=(t&1)*s*255;const n=(t>>1&1)*s*255;const i=(t>>2&1)*s*255;return[r,n,i]};i.ansi256.rgb=function(e){if(e>=232){const t=(e-232)*10+8;return[t,t,t]}e-=16;let t;const s=Math.floor(e/36)/5*255;const r=Math.floor((t=e%36)/6)/5*255;const n=t%6/5*255;return[s,r,n]};i.rgb.hex=function(e){const t=((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255);const s=t.toString(16).toUpperCase();return"000000".substring(s.length)+s};i.hex.rgb=function(e){const t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t){return[0,0,0]}let s=t[0];if(t[0].length===3){s=s.split("").map((e=>e+e)).join("")}const r=parseInt(s,16);const n=r>>16&255;const i=r>>8&255;const o=r&255;return[n,i,o]};i.rgb.hcg=function(e){const t=e[0]/255;const s=e[1]/255;const r=e[2]/255;const n=Math.max(Math.max(t,s),r);const i=Math.min(Math.min(t,s),r);const o=n-i;let a;let c;if(o<1){a=i/(1-o)}else{a=0}if(o<=0){c=0}else if(n===t){c=(s-r)/o%6}else if(n===s){c=2+(r-t)/o}else{c=4+(t-s)/o}c/=6;c%=1;return[c*360,o*100,a*100]};i.hsl.hcg=function(e){const t=e[1]/100;const s=e[2]/100;const r=s<.5?2*t*s:2*t*(1-s);let n=0;if(r<1){n=(s-.5*r)/(1-r)}return[e[0],r*100,n*100]};i.hsv.hcg=function(e){const t=e[1]/100;const s=e[2]/100;const r=t*s;let n=0;if(r<1){n=(s-r)/(1-r)}return[e[0],r*100,n*100]};i.hcg.rgb=function(e){const t=e[0]/360;const s=e[1]/100;const r=e[2]/100;if(s===0){return[r*255,r*255,r*255]}const n=[0,0,0];const i=t%1*6;const o=i%1;const a=1-o;let c=0;switch(Math.floor(i)){case 0:n[0]=1;n[1]=o;n[2]=0;break;case 1:n[0]=a;n[1]=1;n[2]=0;break;case 2:n[0]=0;n[1]=1;n[2]=o;break;case 3:n[0]=0;n[1]=a;n[2]=1;break;case 4:n[0]=o;n[1]=0;n[2]=1;break;default:n[0]=1;n[1]=0;n[2]=a}c=(1-s)*r;return[(s*n[0]+c)*255,(s*n[1]+c)*255,(s*n[2]+c)*255]};i.hcg.hsv=function(e){const t=e[1]/100;const s=e[2]/100;const r=t+s*(1-t);let n=0;if(r>0){n=t/r}return[e[0],n*100,r*100]};i.hcg.hsl=function(e){const t=e[1]/100;const s=e[2]/100;const r=s*(1-t)+.5*t;let n=0;if(r>0&&r<.5){n=t/(2*r)}else if(r>=.5&&r<1){n=t/(2*(1-r))}return[e[0],n*100,r*100]};i.hcg.hwb=function(e){const t=e[1]/100;const s=e[2]/100;const r=t+s*(1-t);return[e[0],(r-t)*100,(1-r)*100]};i.hwb.hcg=function(e){const t=e[1]/100;const s=e[2]/100;const r=1-s;const n=r-t;let i=0;if(n<1){i=(r-n)/(1-n)}return[e[0],n*100,i*100]};i.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};i.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};i.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};i.gray.hsl=function(e){return[0,0,e[0]]};i.gray.hsv=i.gray.hsl;i.gray.hwb=function(e){return[0,100,e[0]]};i.gray.cmyk=function(e){return[0,0,0,e[0]]};i.gray.lab=function(e){return[e[0],0,0]};i.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255;const s=(t<<16)+(t<<8)+t;const r=s.toString(16).toUpperCase();return"000000".substring(r.length)+r};i.rgb.gray=function(e){const t=(e[0]+e[1]+e[2])/3;return[t/255*100]}},6931:(e,t,s)=>{const r=s(7391);const n=s(880);const i={};const o=Object.keys(r);function wrapRaw(e){const wrappedFn=function(...t){const s=t[0];if(s===undefined||s===null){return s}if(s.length>1){t=s}return e(t)};if("conversion"in e){wrappedFn.conversion=e.conversion}return wrappedFn}function wrapRounded(e){const wrappedFn=function(...t){const s=t[0];if(s===undefined||s===null){return s}if(s.length>1){t=s}const r=e(t);if(typeof r==="object"){for(let e=r.length,t=0;t<e;t++){r[t]=Math.round(r[t])}}return r};if("conversion"in e){wrappedFn.conversion=e.conversion}return wrappedFn}o.forEach((e=>{i[e]={};Object.defineProperty(i[e],"channels",{value:r[e].channels});Object.defineProperty(i[e],"labels",{value:r[e].labels});const t=n(e);const s=Object.keys(t);s.forEach((s=>{const r=t[s];i[e][s]=wrapRounded(r);i[e][s].raw=wrapRaw(r)}))}));e.exports=i},880:(e,t,s)=>{const r=s(7391);function buildGraph(){const e={};const t=Object.keys(r);for(let s=t.length,r=0;r<s;r++){e[t[r]]={distance:-1,parent:null}}return e}function deriveBFS(e){const t=buildGraph();const s=[e];t[e].distance=0;while(s.length){const e=s.pop();const n=Object.keys(r[e]);for(let r=n.length,i=0;i<r;i++){const r=n[i];const o=t[r];if(o.distance===-1){o.distance=t[e].distance+1;o.parent=e;s.unshift(r)}}}return t}function link(e,t){return function(s){return t(e(s))}}function wrapConversion(e,t){const s=[t[e].parent,e];let n=r[t[e].parent][e];let i=t[e].parent;while(t[i].parent){s.unshift(t[i].parent);n=link(r[t[i].parent][i],n);i=t[i].parent}n.conversion=s;return n}e.exports=function(e){const t=deriveBFS(e);const s={};const r=Object.keys(t);for(let e=r.length,n=0;n<e;n++){const e=r[n];const i=t[e];if(i.parent===null){continue}s[e]=wrapConversion(e,t)}return s}},8510:e=>{e.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},2391:(e,t,s)=>{const{Transform:r,PassThrough:n}=s(2781);const i=s(9796);const o=s(3877);e.exports=e=>{const t=(e.headers["content-encoding"]||"").toLowerCase();if(!["gzip","deflate","br"].includes(t)){return e}const s=t==="br";if(s&&typeof i.createBrotliDecompress!=="function"){e.destroy(new Error("Brotli is not supported on Node.js < 12"));return e}let a=true;const c=new r({transform(e,t,s){a=false;s(null,e)},flush(e){e()}});const l=new n({autoDestroy:false,destroy(t,s){e.destroy();s(t)}});const h=s?i.createBrotliDecompress():i.createUnzip();h.once("error",(t=>{if(a&&!e.readable){l.end();return}l.destroy(t)}));o(e,l);e.pipe(c).pipe(h).pipe(l);return l}},3877:e=>{const t=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];e.exports=(e,s)=>{if(s._readableState.autoDestroy){throw new Error("The second stream must have the `autoDestroy` option set to `false`")}const r=new Set(Object.keys(e).concat(t));const n={};for(const t of r){if(t in s){continue}n[t]={get(){const s=e[t];const r=typeof s==="function";return r?s.bind(e):s},set(s){e[t]=s},enumerable:true,configurable:false}}Object.defineProperties(s,n);e.once("aborted",(()=>{s.destroy();s.emit("aborted")}));e.once("close",(()=>{if(e.complete){if(s.readable){s.once("end",(()=>{s.emit("close")}))}else{s.emit("close")}}else{s.emit("close")}}));return s}},6214:(e,t)=>{Object.defineProperty(t,"__esModule",{value:true});function isTLSSocket(e){return e.encrypted}const deferToConnect=(e,t)=>{let s;if(typeof t==="function"){const e=t;s={connect:e}}else{s=t}const r=typeof s.connect==="function";const n=typeof s.secureConnect==="function";const i=typeof s.close==="function";const onConnect=()=>{if(r){s.connect()}if(isTLSSocket(e)&&n){if(e.authorized){s.secureConnect()}else if(!e.authorizationError){e.once("secureConnect",s.secureConnect)}}if(i){e.once("close",s.close)}};if(e.writable&&!e.connecting){onConnect()}else if(e.connecting){e.once("connect",onConnect)}else if(e.destroyed&&i){s.close(e._hadError)}};t["default"]=deferToConnect;e.exports=deferToConnect;e.exports["default"]=deferToConnect},1585:(e,t,s)=>{const{PassThrough:r}=s(2781);e.exports=e=>{e={...e};const{array:t}=e;let{encoding:s}=e;const n=s==="buffer";let i=false;if(t){i=!(s||n)}else{s=s||"utf8"}if(n){s=null}const o=new r({objectMode:i});if(s){o.setEncoding(s)}let a=0;const c=[];o.on("data",(e=>{c.push(e);if(i){a=c.length}else{a+=e.length}}));o.getBufferedValue=()=>{if(t){return c}return n?Buffer.concat(c,a):c.join("")};o.getBufferedLength=()=>a;return o}},1766:(e,t,s)=>{const{constants:r}=s(4300);const n=s(2781);const{promisify:i}=s(3837);const o=s(1585);const a=i(n.pipeline);class MaxBufferError extends Error{constructor(){super("maxBuffer exceeded");this.name="MaxBufferError"}}async function getStream(e,t){if(!e){throw new Error("Expected a stream")}t={maxBuffer:Infinity,...t};const{maxBuffer:s}=t;const n=o(t);await new Promise(((t,i)=>{const rejectPromise=e=>{if(e&&n.getBufferedLength()<=r.MAX_LENGTH){e.bufferedData=n.getBufferedValue()}i(e)};(async()=>{try{await a(e,n);t()}catch(e){rejectPromise(e)}})();n.on("data",(()=>{if(n.getBufferedLength()>s){rejectPromise(new MaxBufferError)}}))}));return n.getBufferedValue()}e.exports=getStream;e.exports.buffer=(e,t)=>getStream(e,{...t,encoding:"buffer"});e.exports.array=(e,t)=>getStream(e,{...t,array:true});e.exports.MaxBufferError=MaxBufferError},1621:e=>{e.exports=(e,t=process.argv)=>{const s=e.startsWith("-")?"":e.length===1?"-":"--";const r=t.indexOf(s+e);const n=t.indexOf("--");return r!==-1&&(n===-1||r<n)}},1002:e=>{const t=new Set([200,203,204,206,300,301,308,404,405,410,414,501]);const s=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]);const r=new Set([500,502,503,504]);const n={date:true,connection:true,"keep-alive":true,"proxy-authenticate":true,"proxy-authorization":true,te:true,trailer:true,"transfer-encoding":true,upgrade:true};const i={"content-length":true,"content-encoding":true,"transfer-encoding":true,"content-range":true};function toNumberOrZero(e){const t=parseInt(e,10);return isFinite(t)?t:0}function isErrorResponse(e){if(!e){return true}return r.has(e.status)}function parseCacheControl(e){const t={};if(!e)return t;const s=e.trim().split(/,/);for(const e of s){const[s,r]=e.split(/=/,2);t[s.trim()]=r===undefined?true:r.trim().replace(/^"|"$/g,"")}return t}function formatCacheControl(e){let t=[];for(const s in e){const r=e[s];t.push(r===true?s:s+"="+r)}if(!t.length){return undefined}return t.join(", ")}e.exports=class CachePolicy{constructor(e,t,{shared:s,cacheHeuristic:r,immutableMinTimeToLive:n,ignoreCargoCult:i,_fromObject:o}={}){if(o){this._fromObject(o);return}if(!t||!t.headers){throw Error("Response headers missing")}this._assertRequestHasHeaders(e);this._responseTime=this.now();this._isShared=s!==false;this._cacheHeuristic=undefined!==r?r:.1;this._immutableMinTtl=undefined!==n?n:24*3600*1e3;this._status="status"in t?t.status:200;this._resHeaders=t.headers;this._rescc=parseCacheControl(t.headers["cache-control"]);this._method="method"in e?e.method:"GET";this._url=e.url;this._host=e.headers.host;this._noAuthorization=!e.headers.authorization;this._reqHeaders=t.headers.vary?e.headers:null;this._reqcc=parseCacheControl(e.headers["cache-control"]);if(i&&"pre-check"in this._rescc&&"post-check"in this._rescc){delete this._rescc["pre-check"];delete this._rescc["post-check"];delete this._rescc["no-cache"];delete this._rescc["no-store"];delete this._rescc["must-revalidate"];this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":formatCacheControl(this._rescc)});delete this._resHeaders.expires;delete this._resHeaders.pragma}if(t.headers["cache-control"]==null&&/no-cache/.test(t.headers.pragma)){this._rescc["no-cache"]=true}}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&("GET"===this._method||"HEAD"===this._method||"POST"===this._method&&this._hasExplicitExpiration())&&s.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||t.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers){throw Error("Request headers missing")}}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);const t=parseCacheControl(e.headers["cache-control"]);if(t["no-cache"]||/no-cache/.test(e.headers.pragma)){return false}if(t["max-age"]&&this.age()>t["max-age"]){return false}if(t["min-fresh"]&&this.timeToLive()<1e3*t["min-fresh"]){return false}if(this.stale()){const e=t["max-stale"]&&!this._rescc["must-revalidate"]&&(true===t["max-stale"]||t["max-stale"]>this.age()-this.maxAge());if(!e){return false}}return this._requestMatches(e,false)}_requestMatches(e,t){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||t&&"HEAD"===e.method)&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary){return true}if(this._resHeaders.vary==="*"){return false}const t=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(const s of t){if(e.headers[s]!==this._reqHeaders[s])return false}return true}_copyWithoutHopByHopHeaders(e){const t={};for(const s in e){if(n[s])continue;t[s]=e[s]}if(e.connection){const s=e.connection.trim().split(/\s*,\s*/);for(const e of s){delete t[e]}}if(t.warning){const e=t.warning.split(/,/).filter((e=>!/^\s*1[0-9][0-9]/.test(e)));if(!e.length){delete t.warning}else{t.warning=e.join(",").trim()}}return t}responseHeaders(){const e=this._copyWithoutHopByHopHeaders(this._resHeaders);const t=this.age();if(t>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24){e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'}e.age=`${Math.round(t)}`;e.date=new Date(this.now()).toUTCString();return e}date(){const e=Date.parse(this._resHeaders.date);if(isFinite(e)){return e}return this._responseTime}age(){let e=this._ageValue();const t=(this.now()-this._responseTime)/1e3;return e+t}_ageValue(){return toNumberOrZero(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]){return 0}if(this._isShared&&(this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable)){return 0}if(this._resHeaders.vary==="*"){return 0}if(this._isShared){if(this._rescc["proxy-revalidate"]){return 0}if(this._rescc["s-maxage"]){return toNumberOrZero(this._rescc["s-maxage"])}}if(this._rescc["max-age"]){return toNumberOrZero(this._rescc["max-age"])}const e=this._rescc.immutable?this._immutableMinTtl:0;const t=this.date();if(this._resHeaders.expires){const s=Date.parse(this._resHeaders.expires);if(Number.isNaN(s)||s<t){return 0}return Math.max(e,(s-t)/1e3)}if(this._resHeaders["last-modified"]){const s=Date.parse(this._resHeaders["last-modified"]);if(isFinite(s)&&t>s){return Math.max(e,(t-s)/1e3*this._cacheHeuristic)}}return e}timeToLive(){const e=this.maxAge()-this.age();const t=e+toNumberOrZero(this._rescc["stale-if-error"]);const s=e+toNumberOrZero(this._rescc["stale-while-revalidate"]);return Math.max(0,e,t,s)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+toNumberOrZero(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+toNumberOrZero(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(undefined,undefined,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t;this._isShared=e.sh;this._cacheHeuristic=e.ch;this._immutableMinTtl=e.imm!==undefined?e.imm:24*3600*1e3;this._status=e.st;this._resHeaders=e.resh;this._rescc=e.rescc;this._method=e.m;this._url=e.u;this._host=e.h;this._noAuthorization=e.a;this._reqHeaders=e.reqh;this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);const t=this._copyWithoutHopByHopHeaders(e.headers);delete t["if-range"];if(!this._requestMatches(e,true)||!this.storable()){delete t["if-none-match"];delete t["if-modified-since"];return t}if(this._resHeaders.etag){t["if-none-match"]=t["if-none-match"]?`${t["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag}const s=t["accept-ranges"]||t["if-match"]||t["if-unmodified-since"]||this._method&&this._method!="GET";if(s){delete t["if-modified-since"];if(t["if-none-match"]){const e=t["if-none-match"].split(/,/).filter((e=>!/^\s*W\//.test(e)));if(!e.length){delete t["if-none-match"]}else{t["if-none-match"]=e.join(",").trim()}}}else if(this._resHeaders["last-modified"]&&!t["if-modified-since"]){t["if-modified-since"]=this._resHeaders["last-modified"]}return t}revalidatedPolicy(e,t){this._assertRequestHasHeaders(e);if(this._useStaleIfError()&&isErrorResponse(t)){return{modified:false,matches:false,policy:this}}if(!t||!t.headers){throw Error("Response headers missing")}let s=false;if(t.status!==undefined&&t.status!=304){s=false}else if(t.headers.etag&&!/^\s*W\//.test(t.headers.etag)){s=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag}else if(this._resHeaders.etag&&t.headers.etag){s=this._resHeaders.etag.replace(/^\s*W\//,"")===t.headers.etag.replace(/^\s*W\//,"")}else if(this._resHeaders["last-modified"]){s=this._resHeaders["last-modified"]===t.headers["last-modified"]}else{if(!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!t.headers.etag&&!t.headers["last-modified"]){s=true}}if(!s){return{policy:new this.constructor(e,t),modified:t.status!=304,matches:false}}const r={};for(const e in this._resHeaders){r[e]=e in t.headers&&!i[e]?t.headers[e]:this._resHeaders[e]}const n=Object.assign({},t,{status:this._status,method:this._method,headers:r});return{policy:new this.constructor(e,n,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:false,matches:true}}}},9898:(e,t,s)=>{const{URL:r}=s(7310);const n=s(2361);const i=s(4404);const o=s(5158);const a=s(9273);const c=s(9237);const l=Symbol("currentStreamCount");const h=Symbol("request");const u=Symbol("cachedOriginSet");const d=Symbol("gracefullyClosing");const f=Symbol("length");const p=["createConnection","maxDeflateDynamicTableSize","maxSettings","maxSessionMemory","maxHeaderListPairs","maxOutstandingPings","maxReservedRemoteStreams","maxSendHeaderBlockLength","paddingStrategy","peerMaxConcurrentStreams","settings","family","localAddress","rejectUnauthorized","pskCallback","minDHSize","path","socket","ca","cert","sigalgs","ciphers","clientCertEngine","crl","dhparam","ecdhCurve","honorCipherOrder","key","privateKeyEngine","privateKeyIdentifier","maxVersion","minVersion","pfx","secureOptions","secureProtocol","sessionIdContext","ticketKeys"];const getSortedIndex=(e,t,s)=>{let r=0;let n=e.length;while(r<n){const i=r+n>>>1;if(s(e[i],t)){r=i+1}else{n=i}}return r};const compareSessions=(e,t)=>e.remoteSettings.maxConcurrentStreams>t.remoteSettings.maxConcurrentStreams;const closeCoveredSessions=(e,t)=>{for(let s=0;s<e.length;s++){const r=e[s];if(r[u].length>0&&r[u].length<t[u].length&&r[u].every((e=>t[u].includes(e)))&&r[l]+t[l]<=t.remoteSettings.maxConcurrentStreams){gracefullyClose(r)}}};const closeSessionIfCovered=(e,t)=>{for(let s=0;s<e.length;s++){const r=e[s];if(t[u].length>0&&t[u].length<r[u].length&&t[u].every((e=>r[u].includes(e)))&&t[l]+r[l]<=r.remoteSettings.maxConcurrentStreams){gracefullyClose(t);return true}}return false};const gracefullyClose=e=>{e[d]=true;if(e[l]===0){e.close()}};class Agent extends n{constructor({timeout:e=0,maxSessions:t=Number.POSITIVE_INFINITY,maxEmptySessions:s=10,maxCachedTlsSessions:r=100}={}){super();this.sessions={};this.queue={};this.timeout=e;this.maxSessions=t;this.maxEmptySessions=s;this._emptySessionCount=0;this._sessionCount=0;this.settings={enablePush:false,initialWindowSize:1024*1024*32};this.tlsSessionCache=new a({maxSize:r})}get protocol(){return"https:"}normalizeOptions(e){let t="";for(let s=0;s<p.length;s++){const r=p[s];t+=":";if(e&&e[r]!==undefined){t+=e[r]}}return t}_processQueue(){if(this._sessionCount>=this.maxSessions){this.closeEmptySessions(this.maxSessions-this._sessionCount+1);return}for(const e in this.queue){for(const t in this.queue[e]){const s=this.queue[e][t];if(!s.completed){s.completed=true;s()}}}}_isBetterSession(e,t){return e>t}_accept(e,t,s,r){let n=0;while(n<t.length&&e[l]<e.remoteSettings.maxConcurrentStreams){t[n].resolve(e);n++}t.splice(0,n);if(t.length>0){this.getSession(s,r,t);t.length=0}}getSession(e,t,s){return new Promise(((n,i)=>{if(Array.isArray(s)&&s.length>0){s=[...s];n()}else{s=[{resolve:n,reject:i}]}try{if(typeof e==="string"){e=new r(e)}else if(!(e instanceof r)){throw new TypeError("The `origin` argument needs to be a string or an URL object")}if(t){const{servername:s}=t;const{hostname:r}=e;if(s&&r!==s){throw new Error(`Origin ${r} differs from servername ${s}`)}}}catch(e){for(let t=0;t<s.length;t++){s[t].reject(e)}return}const a=this.normalizeOptions(t);const c=e.origin;if(a in this.sessions){const e=this.sessions[a];let r=-1;let n=-1;let i;for(let t=0;t<e.length;t++){const s=e[t];const o=s.remoteSettings.maxConcurrentStreams;if(o<r){break}if(!s[u].includes(c)){continue}const a=s[l];if(a>=o||s[d]||s.destroyed){continue}if(!i){r=o}if(this._isBetterSession(a,n)){i=s;n=a}}if(i){this._accept(i,s,c,t);return}}if(a in this.queue){if(c in this.queue[a]){this.queue[a][c].listeners.push(...s);return}}else{this.queue[a]={[f]:0}}const removeFromQueue=()=>{if(a in this.queue&&this.queue[a][c]===entry){delete this.queue[a][c];if(--this.queue[a][f]===0){delete this.queue[a]}}};const entry=async()=>{this._sessionCount++;const r=`${c}:${a}`;let n=false;let i;try{const p={...t};if(p.settings===undefined){p.settings=this.settings}if(p.session===undefined){p.session=this.tlsSessionCache.get(r)}const m=p.createConnection||this.createConnection;i=await m.call(this,e,p);p.createConnection=()=>i;const g=o.connect(e,p);g[l]=0;g[d]=false;const getOriginSet=()=>{const{socket:e}=g;let t;if(e.servername===false){e.servername=e.remoteAddress;t=g.originSet;e.servername=false}else{t=g.originSet}return t};const isFree=()=>g[l]<g.remoteSettings.maxConcurrentStreams;g.socket.once("session",(e=>{this.tlsSessionCache.set(r,e)}));g.once("error",(e=>{for(let t=0;t<s.length;t++){s[t].reject(e)}this.tlsSessionCache.delete(r)}));g.setTimeout(this.timeout,(()=>{g.destroy()}));g.once("close",(()=>{this._sessionCount--;if(n){this._emptySessionCount--;const e=this.sessions[a];if(e.length===1){delete this.sessions[a]}else{e.splice(e.indexOf(g),1)}}else{removeFromQueue();const e=new Error("Session closed without receiving a SETTINGS frame");e.code="HTTP2WRAPPER_NOSETTINGS";for(let t=0;t<s.length;t++){s[t].reject(e)}}this._processQueue()}));const processListeners=()=>{const e=this.queue[a];if(!e){return}const t=g[u];for(let s=0;s<t.length;s++){const r=t[s];if(r in e){const{listeners:t,completed:s}=e[r];let n=0;while(n<t.length&&isFree()){t[n].resolve(g);n++}e[r].listeners.splice(0,n);if(e[r].listeners.length===0&&!s){delete e[r];if(--e[f]===0){delete this.queue[a];break}}if(!isFree()){break}}}};g.on("origin",(()=>{g[u]=getOriginSet()||[];g[d]=false;closeSessionIfCovered(this.sessions[a],g);if(g[d]||!isFree()){return}processListeners();if(!isFree()){return}closeCoveredSessions(this.sessions[a],g)}));g.once("remoteSettings",(()=>{if(entry.destroyed){const e=new Error("Agent has been destroyed");for(let t=0;t<s.length;t++){s[t].reject(e)}g.destroy();return}if(g.setLocalWindowSize){g.setLocalWindowSize(1024*1024*4)}g[u]=getOriginSet()||[];if(g.socket.encrypted){const e=g[u][0];if(e!==c){const t=new Error(`Requested origin ${c} does not match server ${e}`);for(let e=0;e<s.length;e++){s[e].reject(t)}g.destroy();return}}removeFromQueue();{const e=this.sessions;if(a in e){const t=e[a];t.splice(getSortedIndex(t,g,compareSessions),0,g)}else{e[a]=[g]}}n=true;this._emptySessionCount++;this.emit("session",g);this._accept(g,s,c,t);if(g[l]===0&&this._emptySessionCount>this.maxEmptySessions){this.closeEmptySessions(this._emptySessionCount-this.maxEmptySessions)}g.on("remoteSettings",(()=>{if(!isFree()){return}processListeners();if(!isFree()){return}closeCoveredSessions(this.sessions[a],g)}))}));g[h]=g.request;g.request=(e,t)=>{if(g[d]){throw new Error("The session is gracefully closing. No new streams are allowed.")}const s=g[h](e,t);g.ref();if(g[l]++===0){this._emptySessionCount--}s.once("close",(()=>{if(--g[l]===0){this._emptySessionCount++;g.unref();if(this._emptySessionCount>this.maxEmptySessions||g[d]){g.close();return}}if(g.destroyed||g.closed){return}if(isFree()&&!closeSessionIfCovered(this.sessions[a],g)){closeCoveredSessions(this.sessions[a],g);processListeners();if(g[l]===0){this._processQueue()}}}));return s}}catch(e){removeFromQueue();this._sessionCount--;for(let t=0;t<s.length;t++){s[t].reject(e)}}};entry.listeners=s;entry.completed=false;entry.destroyed=false;this.queue[a][c]=entry;this.queue[a][f]++;this._processQueue()}))}request(e,t,s,r){return new Promise(((n,i)=>{this.getSession(e,t,[{reject:i,resolve:e=>{try{const t=e.request(s,r);c(t);n(t)}catch(e){i(e)}}}])}))}async createConnection(e,t){return Agent.connect(e,t)}static connect(e,t){t.ALPNProtocols=["h2"];const s=e.port||443;const r=e.hostname;if(typeof t.servername==="undefined"){t.servername=r}const n=i.connect(s,r,t);if(t.socket){n._peername={family:undefined,address:undefined,port:s}}return n}closeEmptySessions(e=Number.POSITIVE_INFINITY){let t=0;const{sessions:s}=this;for(const r in s){const n=s[r];for(let s=0;s<n.length;s++){const r=n[s];if(r[l]===0){t++;r.close();if(t>=e){return t}}}}return t}destroy(e){const{sessions:t,queue:s}=this;for(const s in t){const r=t[s];for(let t=0;t<r.length;t++){r[t].destroy(e)}}for(const e in s){const t=s[e];for(const e in t){t[e].destroyed=true}}this.queue={};this.tlsSessionCache.clear()}get emptySessionCount(){return this._emptySessionCount}get pendingSessionCount(){return this._sessionCount-this._emptySessionCount}get sessionCount(){return this._sessionCount}}Agent.kCurrentStreamCount=l;Agent.kGracefullyClosing=d;e.exports={Agent:Agent,globalAgent:new Agent}},7167:(e,t,s)=>{const{URL:r,urlToHttpOptions:n}=s(7310);const i=s(3685);const o=s(5687);const a=s(6624);const c=s(9273);const{Agent:l,globalAgent:h}=s(9898);const u=s(9632);const d=s(1982);const f=s(9237);const p=new c({maxSize:100});const m=new Map;const installSocket=(e,t,s)=>{t._httpMessage={shouldKeepAlive:true};const onFree=()=>{e.emit("free",t,s)};t.on("free",onFree);const onClose=()=>{e.removeSocket(t,s)};t.on("close",onClose);const onTimeout=()=>{const{freeSockets:s}=e;for(const e of Object.values(s)){if(e.includes(t)){t.destroy();return}}};t.on("timeout",onTimeout);const onRemove=()=>{e.removeSocket(t,s);t.off("close",onClose);t.off("free",onFree);t.off("timeout",onTimeout);t.off("agentRemove",onRemove)};t.on("agentRemove",onRemove);e.emit("free",t,s)};const createResolveProtocol=(e,t=new Map,s=undefined)=>async r=>{const n=`${r.host}:${r.port}:${r.ALPNProtocols.sort()}`;if(!e.has(n)){if(t.has(n)){const e=await t.get(n);return{alpnProtocol:e.alpnProtocol}}const{path:i}=r;r.path=r.socketPath;const o=a(r,s);t.set(n,o);try{const s=await o;e.set(n,s.alpnProtocol);t.delete(n);r.path=i;return s}catch(e){t.delete(n);r.path=i;throw e}}return{alpnProtocol:e.get(n)}};const g=createResolveProtocol(p,m);e.exports=async(e,t,s)=>{if(typeof e==="string"){e=n(new r(e))}else if(e instanceof r){e=n(e)}else{e={...e}}if(typeof t==="function"||t===undefined){s=t;t=e}else{t=Object.assign(e,t)}t.ALPNProtocols=t.ALPNProtocols||["h2","http/1.1"];if(!Array.isArray(t.ALPNProtocols)||t.ALPNProtocols.length===0){throw new Error("The `ALPNProtocols` option must be an Array with at least one entry")}t.protocol=t.protocol||"https:";const a=t.protocol==="https:";t.host=t.hostname||t.host||"localhost";t.session=t.tlsSession;t.servername=t.servername||d(t.headers&&t.headers.host||t.host);t.port=t.port||(a?443:80);t._defaultAgent=a?o.globalAgent:i.globalAgent;const c=t.resolveProtocol||g;let{agent:p}=t;if(p!==undefined&&p!==false&&p.constructor.name!=="Object"){throw new Error("The `options.agent` can be only an object `http`, `https` or `http2` properties")}if(a){t.resolveSocket=true;let{socket:e,alpnProtocol:r,timeout:n}=await c(t);if(n){if(e){e.destroy()}const s=new Error(`Timed out resolving ALPN: ${t.timeout} ms`);s.code="ETIMEDOUT";s.ms=t.timeout;throw s}if(e&&t.createConnection){e.destroy();e=undefined}delete t.resolveSocket;const i=r==="h2";if(p){p=i?p.http2:p.https;t.agent=p}if(p===undefined){p=i?h:o.globalAgent}if(e){if(p===false){e.destroy()}else{const s=(i?l:o.Agent).prototype.createConnection;if(p.createConnection===s){if(i){t._reuseSocket=e}else{installSocket(p,e,t)}}else{e.destroy()}}}if(i){return f(new u(t,s))}}else if(p){t.agent=p.http}return f(i.request(t,s))};e.exports.protocolCache=p;e.exports.resolveProtocol=g;e.exports.createResolveProtocol=createResolveProtocol},9632:(e,t,s)=>{const{URL:r,urlToHttpOptions:n}=s(7310);const i=s(5158);const{Writable:o}=s(2781);const{Agent:a,globalAgent:c}=s(9898);const l=s(2575);const h=s(1818);const{ERR_INVALID_ARG_TYPE:u,ERR_INVALID_PROTOCOL:d,ERR_HTTP_HEADERS_SENT:f}=s(7087);const p=s(4592);const m=s(3549);const g=s(9404);const{HTTP2_HEADER_STATUS:y,HTTP2_HEADER_METHOD:b,HTTP2_HEADER_PATH:_,HTTP2_HEADER_AUTHORITY:w,HTTP2_METHOD_CONNECT:v}=i.constants;const O=Symbol("headers");const E=Symbol("origin");const C=Symbol("session");const k=Symbol("options");const x=Symbol("flushedHeaders");const S=Symbol("jobs");const A=Symbol("pendingAgentPromise");class ClientRequest extends o{constructor(e,t,s){super({autoDestroy:false,emitClose:false});if(typeof e==="string"){e=n(new r(e))}else if(e instanceof r){e=n(e)}else{e={...e}}if(typeof t==="function"||t===undefined){s=t;t=e}else{t=Object.assign(e,t)}if(t.h2session){this[C]=t.h2session;if(this[C].destroyed){throw new Error("The session has been closed already")}this.protocol=this[C].socket.encrypted?"https:":"http:"}else if(t.agent===false){this.agent=new a({maxEmptySessions:0})}else if(typeof t.agent==="undefined"||t.agent===null){this.agent=c}else if(typeof t.agent.request==="function"){this.agent=t.agent}else{throw new u("options.agent",["http2wrapper.Agent-like Object","undefined","false"],t.agent)}if(this.agent){this.protocol=this.agent.protocol}if(t.protocol&&t.protocol!==this.protocol){throw new d(t.protocol,this.protocol)}if(!t.port){t.port=t.defaultPort||this.agent&&this.agent.defaultPort||443}t.host=t.hostname||t.host||"localhost";delete t.hostname;const{timeout:i}=t;t.timeout=undefined;this[O]=Object.create(null);this[S]=[];this[A]=undefined;this.socket=null;this.connection=null;this.method=t.method||"GET";if(!(this.method==="CONNECT"&&(t.path==="/"||t.path===undefined))){this.path=t.path}this.res=null;this.aborted=false;this.reusedSocket=false;const{headers:o}=t;if(o){for(const e in o){this.setHeader(e,o[e])}}if(t.auth&&!("authorization"in this[O])){this[O].authorization="Basic "+Buffer.from(t.auth).toString("base64")}t.session=t.tlsSession;t.path=t.socketPath;this[k]=t;this[E]=new r(`${this.protocol}//${t.servername||t.host}:${t.port}`);const l=t._reuseSocket;if(l){t.createConnection=(...e)=>{if(l.destroyed){return this.agent.createConnection(...e)}return l};this.agent.getSession(this[E],this[k]).catch((()=>{}))}if(i){this.setTimeout(i)}if(s){this.once("response",s)}this[x]=false}get method(){return this[O][b]}set method(e){if(e){this[O][b]=e.toUpperCase()}}get path(){const e=this.method==="CONNECT"?w:_;return this[O][e]}set path(e){if(e){const t=this.method==="CONNECT"?w:_;this[O][t]=e}}get host(){return this[E].hostname}set host(e){}get _mustNotHaveABody(){return this.method==="GET"||this.method==="HEAD"||this.method==="DELETE"}_write(e,t,s){if(this._mustNotHaveABody){s(new Error("The GET, HEAD and DELETE methods must NOT have a body"));return}this.flushHeaders();const callWrite=()=>this._request.write(e,t,s);if(this._request){callWrite()}else{this[S].push(callWrite)}}_final(e){this.flushHeaders();const callEnd=()=>{if(this._mustNotHaveABody||this.method==="CONNECT"){e();return}this._request.end(e)};if(this._request){callEnd()}else{this[S].push(callEnd)}}abort(){if(this.res&&this.res.complete){return}if(!this.aborted){process.nextTick((()=>this.emit("abort")))}this.aborted=true;this.destroy()}async _destroy(e,t){if(this.res){this.res._dump()}if(this._request){this._request.destroy()}else{process.nextTick((()=>{this.emit("close")}))}try{await this[A]}catch(t){if(this.aborted){e=t}}t(e)}async flushHeaders(){if(this[x]||this.destroyed){return}this[x]=true;const e=this.method===v;const onStream=t=>{this._request=t;if(this.destroyed){t.destroy();return}if(!e){h(t,this,["timeout","continue"])}t.once("error",(e=>{this.destroy(e)}));t.once("aborted",(()=>{const{res:e}=this;if(e){e.aborted=true;e.emit("aborted");e.destroy()}else{this.destroy(new Error("The server aborted the HTTP/2 stream"))}}));const onResponse=(s,r,n)=>{const i=new l(this.socket,t.readableHighWaterMark);this.res=i;i.url=`${this[E].origin}${this.path}`;i.req=this;i.statusCode=s[y];i.headers=s;i.rawHeaders=n;i.once("end",(()=>{i.complete=true;i.socket=null;i.connection=null}));if(e){i.upgrade=true;if(this.emit("connect",i,t,Buffer.alloc(0))){this.emit("close")}else{t.destroy()}}else{t.on("data",(e=>{if(!i._dumped&&!i.push(e)){t.pause()}}));t.once("end",(()=>{if(!this.aborted){i.push(null)}}));if(!this.emit("response",i)){i._dump()}}};t.once("response",onResponse);t.once("headers",(e=>this.emit("information",{statusCode:e[y]})));t.once("trailers",((e,t,s)=>{const{res:r}=this;if(r===null){onResponse(e,t,s);return}r.trailers=e;r.rawTrailers=s}));t.once("close",(()=>{const{aborted:e,res:t}=this;if(t){if(e){t.aborted=true;t.emit("aborted");t.destroy()}const finish=()=>{t.emit("close");this.destroy();this.emit("close")};if(t.readable){t.once("end",finish)}else{finish()}return}if(!this.destroyed){this.destroy(new Error("The HTTP/2 stream has been early terminated"));this.emit("close");return}this.destroy();this.emit("close")}));this.socket=new Proxy(t,g);for(const e of this[S]){e()}this[S].length=0;this.emit("socket",this.socket)};if(!(w in this[O])&&!e){this[O][w]=this[E].host}if(this[C]){try{onStream(this[C].request(this[O]))}catch(e){this.destroy(e)}}else{this.reusedSocket=true;try{const e=this.agent.request(this[E],this[k],this[O]);this[A]=e;onStream(await e);this[A]=false}catch(e){this[A]=false;this.destroy(e)}}}get connection(){return this.socket}set connection(e){this.socket=e}getHeaderNames(){return Object.keys(this[O])}hasHeader(e){if(typeof e!=="string"){throw new u("name","string",e)}return Boolean(this[O][e.toLowerCase()])}getHeader(e){if(typeof e!=="string"){throw new u("name","string",e)}return this[O][e.toLowerCase()]}get headersSent(){return this[x]}removeHeader(e){if(typeof e!=="string"){throw new u("name","string",e)}if(this.headersSent){throw new f("remove")}delete this[O][e.toLowerCase()]}setHeader(e,t){if(this.headersSent){throw new f("set")}p(e);m(e,t);const s=e.toLowerCase();if(s==="connection"){if(t.toLowerCase()==="keep-alive"){return}throw new Error(`Invalid 'connection' header: ${t}`)}if(s==="host"&&this.method==="CONNECT"){this[O][w]=t}else{this[O][s]=t}}setNoDelay(){}setSocketKeepAlive(){}setTimeout(e,t){const applyTimeout=()=>this._request.setTimeout(e,t);if(this._request){applyTimeout()}else{this[S].push(applyTimeout)}return this}get maxHeadersCount(){if(!this.destroyed&&this._request){return this._request.session.localSettings.maxHeaderListSize}return undefined}set maxHeadersCount(e){}}e.exports=ClientRequest},2575:(e,t,s)=>{const{Readable:r}=s(2781);class IncomingMessage extends r{constructor(e,t){super({emitClose:false,autoDestroy:true,highWaterMark:t});this.statusCode=null;this.statusMessage="";this.httpVersion="2.0";this.httpVersionMajor=2;this.httpVersionMinor=0;this.headers={};this.trailers={};this.req=null;this.aborted=false;this.complete=false;this.upgrade=null;this.rawHeaders=[];this.rawTrailers=[];this.socket=e;this._dumped=false}get connection(){return this.socket}set connection(e){this.socket=e}_destroy(e,t){if(!this.readableEnded){this.aborted=true}t();this.req._request.destroy(e)}setTimeout(e,t){this.req.setTimeout(e,t);return this}_dump(){if(!this._dumped){this._dumped=true;this.removeAllListeners("data");this.resume()}}_read(){if(this.req){this.req._request.resume()}}}e.exports=IncomingMessage},4645:(e,t,s)=>{const r=s(5158);const{Agent:n,globalAgent:i}=s(9898);const o=s(9632);const a=s(2575);const c=s(7167);const{HttpOverHttp2:l,HttpsOverHttp2:h}=s(8795);const u=s(8553);const{Http2OverHttp:d,Http2OverHttps:f}=s(9794);const p=s(4592);const m=s(3549);const request=(e,t,s)=>new o(e,t,s);const get=(e,t,s)=>{const r=new o(e,t,s);r.end();return r};e.exports={...r,ClientRequest:o,IncomingMessage:a,Agent:n,globalAgent:i,request:request,get:get,auto:c,proxies:{HttpOverHttp2:l,HttpsOverHttp2:h,Http2OverHttp2:u,Http2OverHttp:d,Http2OverHttps:f},validateHeaderName:p,validateHeaderValue:m}},7885:e=>{e.exports=e=>{const{username:t,password:s}=e.proxyOptions.url;if(t||s){const e=`${t}:${s}`;const r=`Basic ${Buffer.from(e).toString("base64")}`;return{"proxy-authorization":r,authorization:r}}return{}}},8795:(e,t,s)=>{const r=s(4404);const n=s(3685);const i=s(5687);const o=s(1564);const{globalAgent:a}=s(9898);const c=s(6203);const l=s(1089);const h=s(7885);const createConnection=(e,t,s)=>{(async()=>{try{const{proxyOptions:n}=e;const{url:l,headers:u,raw:d}=n;const f=await a.request(l,n,{...h(e),...u,":method":"CONNECT",":authority":`${t.host}:${t.port}`});f.once("error",s);f.once("response",(n=>{const a=n[":status"];if(a!==200){s(new c(a,""));return}const l=e instanceof i.Agent;if(d&&l){t.socket=f;const e=r.connect(t);e.once("close",(()=>{f.destroy()}));s(null,e);return}const h=new o(f);h.encrypted=false;h._handle.getpeername=e=>{e.family=undefined;e.address=undefined;e.port=undefined};s(null,h)}))}catch(e){s(e)}})()};class HttpOverHttp2 extends n.Agent{constructor(e){super(e);l(this,e.proxyOptions)}createConnection(e,t){createConnection(this,e,t)}}class HttpsOverHttp2 extends i.Agent{constructor(e){super(e);l(this,e.proxyOptions)}createConnection(e,t){createConnection(this,e,t)}}e.exports={HttpOverHttp2:HttpOverHttp2,HttpsOverHttp2:HttpsOverHttp2}},9794:(e,t,s)=>{const r=s(3685);const n=s(5687);const i=s(1857);const o=s(7885);const getStream=e=>new Promise(((t,s)=>{const onConnect=(r,n,i)=>{n.unshift(i);e.off("error",s);t([n,r.statusCode,r.statusMessage])};e.once("error",s);e.once("connect",onConnect)}));class Http2OverHttp extends i{async _getProxyStream(e){const{proxyOptions:t}=this;const{url:s,headers:i}=this.proxyOptions;const a=s.protocol==="https:"?n:r;const c=a.request({...t,hostname:s.hostname,port:s.port,path:e,headers:{...o(this),...i,host:e},method:"CONNECT"}).end();return getStream(c)}}e.exports={Http2OverHttp:Http2OverHttp,Http2OverHttps:Http2OverHttp}},8553:(e,t,s)=>{const{globalAgent:r}=s(9898);const n=s(1857);const i=s(7885);const getStatusCode=e=>new Promise(((t,s)=>{e.once("error",s);e.once("response",(r=>{e.off("error",s);t(r[":status"])}))}));class Http2OverHttp2 extends n{async _getProxyStream(e){const{proxyOptions:t}=this;const s={...i(this),...t.headers,":method":"CONNECT",":authority":e};const n=await r.request(t.url,t,s);const o=await getStatusCode(n);return[n,o,""]}}e.exports=Http2OverHttp2},1857:(e,t,s)=>{const{Agent:r}=s(9898);const n=s(1564);const i=s(6203);const o=s(1089);class Http2OverHttpX extends r{constructor(e){super(e);o(this,e.proxyOptions)}async createConnection(e,t){const s=`${e.hostname}:${e.port||443}`;const[r,o,a]=await this._getProxyStream(s);if(o!==200){throw new i(o,a)}if(this.proxyOptions.raw){t.socket=r}else{const e=new n(r);e.encrypted=false;e._handle.getpeername=e=>{e.family=undefined;e.address=undefined;e.port=undefined};return e}return super.createConnection(e,t)}}e.exports=Http2OverHttpX},1089:(e,t,s)=>{const{URL:r}=s(7310);const n=s(3453);e.exports=(e,t)=>{n("proxyOptions",t,["object"]);n("proxyOptions.headers",t.headers,["object","undefined"]);n("proxyOptions.raw",t.raw,["boolean","undefined"]);n("proxyOptions.url",t.url,[r,"string"]);const s=new r(t.url);e.proxyOptions={raw:true,...t,headers:{...t.headers},url:s}}},6203:e=>{class UnexpectedStatusCodeError extends Error{constructor(e,t=""){super(`The proxy server rejected the request with status code ${e} (${t||"empty status message"})`);this.statusCode=e;this.statusMessage=t}}e.exports=UnexpectedStatusCodeError},1982:(e,t,s)=>{const{isIP:r}=s(1808);const n=s(9491);const getHost=e=>{if(e[0]==="["){const t=e.indexOf("]");n(t!==-1);return e.slice(1,t)}const t=e.indexOf(":");if(t===-1){return e}return e.slice(0,t)};e.exports=e=>{const t=getHost(e);if(r(t)){return""}return t}},3453:e=>{const checkType=(e,t,s)=>{const r=s.some((e=>{const s=typeof e;if(s==="string"){return typeof t===e}return t instanceof e}));if(!r){const r=s.map((e=>typeof e==="string"?e:e.name));throw new TypeError(`Expected '${e}' to be a type of ${r.join(" or ")}, got ${typeof t}`)}};e.exports=checkType},9237:e=>{e.exports=e=>{if(e.listenerCount("error")!==0){return e}e.__destroy=e._destroy;e._destroy=(...t)=>{const s=t.pop();e.__destroy(...t,(async e=>{await Promise.resolve();s(e)}))};const onError=t=>{Promise.resolve().then((()=>{e.emit("error",t)}))};e.once("error",onError);Promise.resolve().then((()=>{e.off("error",onError)}));return e}},7087:e=>{const makeError=(t,s,r)=>{e.exports[s]=class NodeError extends t{constructor(...e){super(typeof r==="string"?r:r(e));this.name=`${super.name} [${s}]`;this.code=s}}};makeError(TypeError,"ERR_INVALID_ARG_TYPE",(e=>{const t=e[0].includes(".")?"property":"argument";let s=e[1];const r=Array.isArray(s);if(r){s=`${s.slice(0,-1).join(", ")} or ${s.slice(-1)}`}return`The "${e[0]}" ${t} must be ${r?"one of":"of"} type ${s}. Received ${typeof e[2]}`}));makeError(TypeError,"ERR_INVALID_PROTOCOL",(e=>`Protocol "${e[0]}" not supported. Expected "${e[1]}"`));makeError(Error,"ERR_HTTP_HEADERS_SENT",(e=>`Cannot ${e[0]} headers after they are sent to the client`));makeError(TypeError,"ERR_INVALID_HTTP_TOKEN",(e=>`${e[0]} must be a valid HTTP token [${e[1]}]`));makeError(TypeError,"ERR_HTTP_INVALID_HEADER_VALUE",(e=>`Invalid value "${e[0]} for header "${e[1]}"`));makeError(TypeError,"ERR_INVALID_CHAR",(e=>`Invalid character in ${e[0]} [${e[1]}]`));makeError(Error,"ERR_HTTP2_NO_SOCKET_MANIPULATION","HTTP/2 sockets should not be directly manipulated (e.g. read and written)")},1199:e=>{e.exports=e=>{switch(e){case":method":case":scheme":case":authority":case":path":return true;default:return false}}},1564:(e,t,s)=>{const r=s(2781);const n=s(4404);const i=new n.TLSSocket(new r.PassThrough)._handle._parentWrap.constructor;e.exports=i},1818:e=>{e.exports=(e,t,s)=>{for(const r of s){e.on(r,((...e)=>t.emit(r,...e)))}}},9404:(e,t,s)=>{const{ERR_HTTP2_NO_SOCKET_MANIPULATION:r}=s(7087);const n={has(e,t){const s=e.session===undefined?e:e.session.socket;return t in e||t in s},get(e,t){switch(t){case"on":case"once":case"end":case"emit":case"destroy":return e[t].bind(e);case"writable":case"destroyed":return e[t];case"readable":if(e.destroyed){return false}return e.readable;case"setTimeout":{const{session:t}=e;if(t!==undefined){return t.setTimeout.bind(t)}return e.setTimeout.bind(e)}case"write":case"read":case"pause":case"resume":throw new r;default:{const s=e.session===undefined?e:e.session.socket;const r=s[t];return typeof r==="function"?r.bind(s):r}}},getPrototypeOf(e){if(e.session!==undefined){return Reflect.getPrototypeOf(e.session.socket)}return Reflect.getPrototypeOf(e)},set(e,t,s){switch(t){case"writable":case"readable":case"destroyed":case"on":case"once":case"end":case"emit":case"destroy":e[t]=s;return true;case"setTimeout":{const{session:t}=e;if(t===undefined){e.setTimeout=s}else{t.setTimeout=s}return true}case"write":case"read":case"pause":case"resume":throw new r;default:{const r=e.session===undefined?e:e.session.socket;r[t]=s;return true}}}};e.exports=n},4592:(e,t,s)=>{const{ERR_INVALID_HTTP_TOKEN:r}=s(7087);const n=s(1199);const i=/^[\^`\-\w!#$%&*+.|~]+$/;e.exports=e=>{if(typeof e!=="string"||!i.test(e)&&!n(e)){throw new r("Header name",e)}}},3549:(e,t,s)=>{const{ERR_HTTP_INVALID_HEADER_VALUE:r,ERR_INVALID_CHAR:n}=s(7087);const i=/[^\t\u0020-\u007E\u0080-\u00FF]/;e.exports=(e,t)=>{if(typeof t==="undefined"){throw new r(t,e)}if(i.test(t)){throw new n("header content",e)}}},2820:(e,t)=>{t.stringify=function stringify(e){if("undefined"==typeof e)return e;if(e&&Buffer.isBuffer(e))return JSON.stringify(":base64:"+e.toString("base64"));if(e&&e.toJSON)e=e.toJSON();if(e&&"object"===typeof e){var t="";var s=Array.isArray(e);t=s?"[":"{";var r=true;for(var n in e){var i="function"==typeof e[n]||!s&&"undefined"===typeof e[n];if(Object.hasOwnProperty.call(e,n)&&!i){if(!r)t+=",";r=false;if(s){if(e[n]==undefined)t+="null";else t+=stringify(e[n])}else if(e[n]!==void 0){t+=stringify(n)+":"+stringify(e[n])}}}t+=s?"]":"}";return t}else if("string"===typeof e){return JSON.stringify(/^:/.test(e)?":"+e:e)}else if("undefined"===typeof e){return"null"}else return JSON.stringify(e)};t.parse=function(e){return JSON.parse(e,(function(e,t){if("string"===typeof t){if(/^:base64:/.test(t))return Buffer.from(t.substring(8),"base64");else return/^:/.test(t)?t.substring(1):t}return t}))}},1531:(e,t,s)=>{const r=s(2361);const n=s(2820);const loadStore=e=>{const t={redis:"@keyv/redis",rediss:"@keyv/redis",mongodb:"@keyv/mongo",mongo:"@keyv/mongo",sqlite:"@keyv/sqlite",postgresql:"@keyv/postgres",postgres:"@keyv/postgres",mysql:"@keyv/mysql",etcd:"@keyv/etcd",offline:"@keyv/offline",tiered:"@keyv/tiered"};if(e.adapter||e.uri){const s=e.adapter||/^[^:+]*/.exec(e.uri)[0];return new(require(t[s]))(e)}return new Map};const i=["sqlite","postgres","mysql","mongo","redis","tiered"];class Keyv extends r{constructor(e,{emitErrors:t=true,...s}={}){super();this.opts={namespace:"keyv",serialize:n.stringify,deserialize:n.parse,...typeof e==="string"?{uri:e}:e,...s};if(!this.opts.store){const e={...this.opts};this.opts.store=loadStore(e)}if(this.opts.compression){const e=this.opts.compression;this.opts.serialize=e.serialize.bind(e);this.opts.deserialize=e.deserialize.bind(e)}if(typeof this.opts.store.on==="function"&&t){this.opts.store.on("error",(e=>this.emit("error",e)))}this.opts.store.namespace=this.opts.namespace;const generateIterator=e=>async function*(){for await(const[t,s]of typeof e==="function"?e(this.opts.store.namespace):e){const e=this.opts.deserialize(s);if(this.opts.store.namespace&&!t.includes(this.opts.store.namespace)){continue}if(typeof e.expires==="number"&&Date.now()>e.expires){this.delete(t);continue}yield[this._getKeyUnprefix(t),e.value]}};if(typeof this.opts.store[Symbol.iterator]==="function"&&this.opts.store instanceof Map){this.iterator=generateIterator(this.opts.store)}else if(typeof this.opts.store.iterator==="function"&&this.opts.store.opts&&this._checkIterableAdaptar()){this.iterator=generateIterator(this.opts.store.iterator.bind(this.opts.store))}}_checkIterableAdaptar(){return i.includes(this.opts.store.opts.dialect)||i.findIndex((e=>this.opts.store.opts.url.includes(e)))>=0}_getKeyPrefix(e){return`${this.opts.namespace}:${e}`}_getKeyPrefixArray(e){return e.map((e=>`${this.opts.namespace}:${e}`))}_getKeyUnprefix(e){return e.split(":").splice(1).join(":")}get(e,t){const{store:s}=this.opts;const r=Array.isArray(e);const n=r?this._getKeyPrefixArray(e):this._getKeyPrefix(e);if(r&&s.getMany===undefined){const e=[];for(const r of n){e.push(Promise.resolve().then((()=>s.get(r))).then((e=>typeof e==="string"?this.opts.deserialize(e):this.opts.compression?this.opts.deserialize(e):e)).then((e=>{if(e===undefined||e===null){return undefined}if(typeof e.expires==="number"&&Date.now()>e.expires){return this.delete(r).then((()=>undefined))}return t&&t.raw?e:e.value})))}return Promise.allSettled(e).then((e=>{const t=[];for(const s of e){t.push(s.value)}return t}))}return Promise.resolve().then((()=>r?s.getMany(n):s.get(n))).then((e=>typeof e==="string"?this.opts.deserialize(e):this.opts.compression?this.opts.deserialize(e):e)).then((s=>{if(s===undefined||s===null){return undefined}if(r){const r=[];for(let n of s){if(typeof n==="string"){n=this.opts.deserialize(n)}if(n===undefined||n===null){r.push(undefined);continue}if(typeof n.expires==="number"&&Date.now()>n.expires){this.delete(e).then((()=>undefined));r.push(undefined)}else{r.push(t&&t.raw?n:n.value)}}return r}if(typeof s.expires==="number"&&Date.now()>s.expires){return this.delete(e).then((()=>undefined))}return t&&t.raw?s:s.value}))}set(e,t,s){const r=this._getKeyPrefix(e);if(typeof s==="undefined"){s=this.opts.ttl}if(s===0){s=undefined}const{store:n}=this.opts;return Promise.resolve().then((()=>{const e=typeof s==="number"?Date.now()+s:null;if(typeof t==="symbol"){this.emit("error","symbol cannot be serialized")}t={value:t,expires:e};return this.opts.serialize(t)})).then((e=>n.set(r,e,s))).then((()=>true))}delete(e){const{store:t}=this.opts;if(Array.isArray(e)){const s=this._getKeyPrefixArray(e);if(t.deleteMany===undefined){const e=[];for(const r of s){e.push(t.delete(r))}return Promise.allSettled(e).then((e=>e.every((e=>e.value===true))))}return Promise.resolve().then((()=>t.deleteMany(s)))}const s=this._getKeyPrefix(e);return Promise.resolve().then((()=>t.delete(s)))}clear(){const{store:e}=this.opts;return Promise.resolve().then((()=>e.clear()))}has(e){const t=this._getKeyPrefix(e);const{store:s}=this.opts;return Promise.resolve().then((async()=>{if(typeof s.has==="function"){return s.has(t)}const e=await s.get(t);return e!==undefined}))}disconnect(){const{store:e}=this.opts;if(typeof e.disconnect==="function"){return e.disconnect()}}}e.exports=Keyv},9273:e=>{class QuickLRU{constructor(e={}){if(!(e.maxSize&&e.maxSize>0)){throw new TypeError("`maxSize` must be a number greater than 0")}this.maxSize=e.maxSize;this.onEviction=e.onEviction;this.cache=new Map;this.oldCache=new Map;this._size=0}_set(e,t){this.cache.set(e,t);this._size++;if(this._size>=this.maxSize){this._size=0;if(typeof this.onEviction==="function"){for(const[e,t]of this.oldCache.entries()){this.onEviction(e,t)}}this.oldCache=this.cache;this.cache=new Map}}get(e){if(this.cache.has(e)){return this.cache.get(e)}if(this.oldCache.has(e)){const t=this.oldCache.get(e);this.oldCache.delete(e);this._set(e,t);return t}}set(e,t){if(this.cache.has(e)){this.cache.set(e,t)}else{this._set(e,t)}return this}has(e){return this.cache.has(e)||this.oldCache.has(e)}peek(e){if(this.cache.has(e)){return this.cache.get(e)}if(this.oldCache.has(e)){return this.oldCache.get(e)}}delete(e){const t=this.cache.delete(e);if(t){this._size--}return this.oldCache.delete(e)||t}clear(){this.cache.clear();this.oldCache.clear();this._size=0}*keys(){for(const[e]of this){yield e}}*values(){for(const[,e]of this){yield e}}*[Symbol.iterator](){for(const e of this.cache){yield e}for(const e of this.oldCache){const[t]=e;if(!this.cache.has(t)){yield e}}}get size(){let e=0;for(const t of this.oldCache.keys()){if(!this.cache.has(t)){e++}}return Math.min(this._size+e,this.maxSize)}}e.exports=QuickLRU},6624:(e,t,s)=>{const r=s(4404);e.exports=(e={},t=r.connect)=>new Promise(((s,r)=>{let n=false;let i;const callback=async()=>{await o;i.off("timeout",onTimeout);i.off("error",r);if(e.resolveSocket){s({alpnProtocol:i.alpnProtocol,socket:i,timeout:n});if(n){await Promise.resolve();i.emit("timeout")}}else{i.destroy();s({alpnProtocol:i.alpnProtocol,timeout:n})}};const onTimeout=async()=>{n=true;callback()};const o=(async()=>{try{i=await t(e,callback);i.on("error",r);i.once("timeout",onTimeout)}catch(e){r(e)}})()}))},9318:(e,t,s)=>{const r=s(2037);const n=s(6224);const i=s(1621);const{env:o}=process;let a;if(i("no-color")||i("no-colors")||i("color=false")||i("color=never")){a=0}else if(i("color")||i("colors")||i("color=true")||i("color=always")){a=1}if("FORCE_COLOR"in o){if(o.FORCE_COLOR==="true"){a=1}else if(o.FORCE_COLOR==="false"){a=0}else{a=o.FORCE_COLOR.length===0?1:Math.min(parseInt(o.FORCE_COLOR,10),3)}}function translateLevel(e){if(e===0){return false}return{level:e,hasBasic:true,has256:e>=2,has16m:e>=3}}function supportsColor(e,t){if(a===0){return 0}if(i("color=16m")||i("color=full")||i("color=truecolor")){return 3}if(i("color=256")){return 2}if(e&&!t&&a===undefined){return 0}const s=a||0;if(o.TERM==="dumb"){return s}if(process.platform==="win32"){const e=r.release().split(".");if(Number(e[0])>=10&&Number(e[2])>=10586){return Number(e[2])>=14931?3:2}return 1}if("CI"in o){if(["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((e=>e in o))||o.CI_NAME==="codeship"){return 1}return s}if("TEAMCITY_VERSION"in o){return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(o.TEAMCITY_VERSION)?1:0}if(o.COLORTERM==="truecolor"){return 3}if("TERM_PROGRAM"in o){const e=parseInt((o.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(o.TERM_PROGRAM){case"iTerm.app":return e>=3?3:2;case"Apple_Terminal":return 2}}if(/-256(color)?$/i.test(o.TERM)){return 2}if(/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(o.TERM)){return 1}if("COLORTERM"in o){return 1}return s}function getSupportLevel(e){const t=supportsColor(e,e&&e.isTTY);return translateLevel(t)}e.exports={supportsColor:getSupportLevel,stdout:translateLevel(supportsColor(true,n.isatty(1))),stderr:translateLevel(supportsColor(true,n.isatty(2)))}},9491:t=>{t.exports=e(import.meta.url)("assert")},4300:t=>{t.exports=e(import.meta.url)("buffer")},2081:t=>{t.exports=e(import.meta.url)("child_process")},2361:t=>{t.exports=e(import.meta.url)("events")},7147:t=>{t.exports=e(import.meta.url)("fs")},3685:t=>{t.exports=e(import.meta.url)("http")},5158:t=>{t.exports=e(import.meta.url)("http2")},5687:t=>{t.exports=e(import.meta.url)("https")},1808:t=>{t.exports=e(import.meta.url)("net")},2037:t=>{t.exports=e(import.meta.url)("os")},1017:t=>{t.exports=e(import.meta.url)("path")},7282:t=>{t.exports=e(import.meta.url)("process")},2781:t=>{t.exports=e(import.meta.url)("stream")},4404:t=>{t.exports=e(import.meta.url)("tls")},6224:t=>{t.exports=e(import.meta.url)("tty")},7310:t=>{t.exports=e(import.meta.url)("url")},3837:t=>{t.exports=e(import.meta.url)("util")},9796:t=>{t.exports=e(import.meta.url)("zlib")},4379:(e,t,s)=>{const{Argument:r}=s(9414);const{Command:n}=s(552);const{CommanderError:i,InvalidArgumentError:o}=s(2625);const{Help:a}=s(5153);const{Option:c}=s(6558);t=e.exports=new n;t.program=t;t.Argument=r;t.Command=n;t.CommanderError=i;t.Help=a;t.InvalidArgumentError=o;t.InvalidOptionArgumentError=o;t.Option=c},9414:(e,t,s)=>{const{InvalidArgumentError:r}=s(2625);class Argument{constructor(e,t){this.description=t||"";this.variadic=false;this.parseArg=undefined;this.defaultValue=undefined;this.defaultValueDescription=undefined;this.argChoices=undefined;switch(e[0]){case"<":this.required=true;this._name=e.slice(1,-1);break;case"[":this.required=false;this._name=e.slice(1,-1);break;default:this.required=true;this._name=e;break}if(this._name.length>3&&this._name.slice(-3)==="..."){this.variadic=true;this._name=this._name.slice(0,-3)}}name(){return this._name}_concatValue(e,t){if(t===this.defaultValue||!Array.isArray(t)){return[e]}return t.concat(e)}default(e,t){this.defaultValue=e;this.defaultValueDescription=t;return this}argParser(e){this.parseArg=e;return this}choices(e){this.argChoices=e.slice();this.parseArg=(e,t)=>{if(!this.argChoices.includes(e)){throw new r(`Allowed choices are ${this.argChoices.join(", ")}.`)}if(this.variadic){return this._concatValue(e,t)}return e};return this}argRequired(){this.required=true;return this}argOptional(){this.required=false;return this}}function humanReadableArgName(e){const t=e.name()+(e.variadic===true?"...":"");return e.required?"<"+t+">":"["+t+"]"}t.Argument=Argument;t.humanReadableArgName=humanReadableArgName},552:(e,t,s)=>{const r=s(2361).EventEmitter;const n=s(2081);const i=s(1017);const o=s(7147);const a=s(7282);const{Argument:c,humanReadableArgName:l}=s(9414);const{CommanderError:h}=s(2625);const{Help:u}=s(5153);const{Option:d,splitOptionFlags:f,DualOptions:p}=s(6558);const{suggestSimilar:m}=s(7592);class Command extends r{constructor(e){super();this.commands=[];this.options=[];this.parent=null;this._allowUnknownOption=false;this._allowExcessArguments=true;this._args=[];this.args=[];this.rawArgs=[];this.processedArgs=[];this._scriptPath=null;this._name=e||"";this._optionValues={};this._optionValueSources={};this._storeOptionsAsProperties=false;this._actionHandler=null;this._executableHandler=false;this._executableFile=null;this._executableDir=null;this._defaultCommandName=null;this._exitCallback=null;this._aliases=[];this._combineFlagAndOptionalValue=true;this._description="";this._summary="";this._argsDescription=undefined;this._enablePositionalOptions=false;this._passThroughOptions=false;this._lifeCycleHooks={};this._showHelpAfterError=false;this._showSuggestionAfterError=true;this._outputConfiguration={writeOut:e=>a.stdout.write(e),writeErr:e=>a.stderr.write(e),getOutHelpWidth:()=>a.stdout.isTTY?a.stdout.columns:undefined,getErrHelpWidth:()=>a.stderr.isTTY?a.stderr.columns:undefined,outputError:(e,t)=>t(e)};this._hidden=false;this._hasHelpOption=true;this._helpFlags="-h, --help";this._helpDescription="display help for command";this._helpShortFlag="-h";this._helpLongFlag="--help";this._addImplicitHelpCommand=undefined;this._helpCommandName="help";this._helpCommandnameAndArgs="help [command]";this._helpCommandDescription="display help for command";this._helpConfiguration={}}copyInheritedSettings(e){this._outputConfiguration=e._outputConfiguration;this._hasHelpOption=e._hasHelpOption;this._helpFlags=e._helpFlags;this._helpDescription=e._helpDescription;this._helpShortFlag=e._helpShortFlag;this._helpLongFlag=e._helpLongFlag;this._helpCommandName=e._helpCommandName;this._helpCommandnameAndArgs=e._helpCommandnameAndArgs;this._helpCommandDescription=e._helpCommandDescription;this._helpConfiguration=e._helpConfiguration;this._exitCallback=e._exitCallback;this._storeOptionsAsProperties=e._storeOptionsAsProperties;this._combineFlagAndOptionalValue=e._combineFlagAndOptionalValue;this._allowExcessArguments=e._allowExcessArguments;this._enablePositionalOptions=e._enablePositionalOptions;this._showHelpAfterError=e._showHelpAfterError;this._showSuggestionAfterError=e._showSuggestionAfterError;return this}command(e,t,s){let r=t;let n=s;if(typeof r==="object"&&r!==null){n=r;r=null}n=n||{};const[,i,o]=e.match(/([^ ]+) *(.*)/);const a=this.createCommand(i);if(r){a.description(r);a._executableHandler=true}if(n.isDefault)this._defaultCommandName=a._name;a._hidden=!!(n.noHelp||n.hidden);a._executableFile=n.executableFile||null;if(o)a.arguments(o);this.commands.push(a);a.parent=this;a.copyInheritedSettings(this);if(r)return this;return a}createCommand(e){return new Command(e)}createHelp(){return Object.assign(new u,this.configureHelp())}configureHelp(e){if(e===undefined)return this._helpConfiguration;this._helpConfiguration=e;return this}configureOutput(e){if(e===undefined)return this._outputConfiguration;Object.assign(this._outputConfiguration,e);return this}showHelpAfterError(e=true){if(typeof e!=="string")e=!!e;this._showHelpAfterError=e;return this}showSuggestionAfterError(e=true){this._showSuggestionAfterError=!!e;return this}addCommand(e,t){if(!e._name){throw new Error(`Command passed to .addCommand() must have a name\n- specify the name in Command constructor or using .name()`)}t=t||{};if(t.isDefault)this._defaultCommandName=e._name;if(t.noHelp||t.hidden)e._hidden=true;this.commands.push(e);e.parent=this;return this}createArgument(e,t){return new c(e,t)}argument(e,t,s,r){const n=this.createArgument(e,t);if(typeof s==="function"){n.default(r).argParser(s)}else{n.default(s)}this.addArgument(n);return this}arguments(e){e.split(/ +/).forEach((e=>{this.argument(e)}));return this}addArgument(e){const t=this._args.slice(-1)[0];if(t&&t.variadic){throw new Error(`only the last argument can be variadic '${t.name()}'`)}if(e.required&&e.defaultValue!==undefined&&e.parseArg===undefined){throw new Error(`a default value for a required argument is never used: '${e.name()}'`)}this._args.push(e);return this}addHelpCommand(e,t){if(e===false){this._addImplicitHelpCommand=false}else{this._addImplicitHelpCommand=true;if(typeof e==="string"){this._helpCommandName=e.split(" ")[0];this._helpCommandnameAndArgs=e}this._helpCommandDescription=t||this._helpCommandDescription}return this}_hasImplicitHelpCommand(){if(this._addImplicitHelpCommand===undefined){return this.commands.length&&!this._actionHandler&&!this._findCommand("help")}return this._addImplicitHelpCommand}hook(e,t){const s=["preSubcommand","preAction","postAction"];if(!s.includes(e)){throw new Error(`Unexpected value for event passed to hook : '${e}'.\nExpecting one of '${s.join("', '")}'`)}if(this._lifeCycleHooks[e]){this._lifeCycleHooks[e].push(t)}else{this._lifeCycleHooks[e]=[t]}return this}exitOverride(e){if(e){this._exitCallback=e}else{this._exitCallback=e=>{if(e.code!=="commander.executeSubCommandAsync"){throw e}else{}}}return this}_exit(e,t,s){if(this._exitCallback){this._exitCallback(new h(e,t,s))}a.exit(e)}action(e){const listener=t=>{const s=this._args.length;const r=t.slice(0,s);if(this._storeOptionsAsProperties){r[s]=this}else{r[s]=this.opts()}r.push(this);return e.apply(this,r)};this._actionHandler=listener;return this}createOption(e,t){return new d(e,t)}addOption(e){const t=e.name();const s=e.attributeName();if(e.negate){const t=e.long.replace(/^--no-/,"--");if(!this._findOption(t)){this.setOptionValueWithSource(s,e.defaultValue===undefined?true:e.defaultValue,"default")}}else if(e.defaultValue!==undefined){this.setOptionValueWithSource(s,e.defaultValue,"default")}this.options.push(e);const handleOptionValue=(t,r,n)=>{if(t==null&&e.presetArg!==undefined){t=e.presetArg}const i=this.getOptionValue(s);if(t!==null&&e.parseArg){try{t=e.parseArg(t,i)}catch(e){if(e.code==="commander.invalidArgument"){const t=`${r} ${e.message}`;this.error(t,{exitCode:e.exitCode,code:e.code})}throw e}}else if(t!==null&&e.variadic){t=e._concatValue(t,i)}if(t==null){if(e.negate){t=false}else if(e.isBoolean()||e.optional){t=true}else{t=""}}this.setOptionValueWithSource(s,t,n)};this.on("option:"+t,(t=>{const s=`error: option '${e.flags}' argument '${t}' is invalid.`;handleOptionValue(t,s,"cli")}));if(e.envVar){this.on("optionEnv:"+t,(t=>{const s=`error: option '${e.flags}' value '${t}' from env '${e.envVar}' is invalid.`;handleOptionValue(t,s,"env")}))}return this}_optionEx(e,t,s,r,n){if(typeof t==="object"&&t instanceof d){throw new Error("To add an Option object use addOption() instead of option() or requiredOption()")}const i=this.createOption(t,s);i.makeOptionMandatory(!!e.mandatory);if(typeof r==="function"){i.default(n).argParser(r)}else if(r instanceof RegExp){const e=r;r=(t,s)=>{const r=e.exec(t);return r?r[0]:s};i.default(n).argParser(r)}else{i.default(r)}return this.addOption(i)}option(e,t,s,r){return this._optionEx({},e,t,s,r)}requiredOption(e,t,s,r){return this._optionEx({mandatory:true},e,t,s,r)}combineFlagAndOptionalValue(e=true){this._combineFlagAndOptionalValue=!!e;return this}allowUnknownOption(e=true){this._allowUnknownOption=!!e;return this}allowExcessArguments(e=true){this._allowExcessArguments=!!e;return this}enablePositionalOptions(e=true){this._enablePositionalOptions=!!e;return this}passThroughOptions(e=true){this._passThroughOptions=!!e;if(!!this.parent&&e&&!this.parent._enablePositionalOptions){throw new Error("passThroughOptions can not be used without turning on enablePositionalOptions for parent command(s)")}return this}storeOptionsAsProperties(e=true){this._storeOptionsAsProperties=!!e;if(this.options.length){throw new Error("call .storeOptionsAsProperties() before adding options")}return this}getOptionValue(e){if(this._storeOptionsAsProperties){return this[e]}return this._optionValues[e]}setOptionValue(e,t){return this.setOptionValueWithSource(e,t,undefined)}setOptionValueWithSource(e,t,s){if(this._storeOptionsAsProperties){this[e]=t}else{this._optionValues[e]=t}this._optionValueSources[e]=s;return this}getOptionValueSource(e){return this._optionValueSources[e]}getOptionValueSourceWithGlobals(e){let t;getCommandAndParents(this).forEach((s=>{if(s.getOptionValueSource(e)!==undefined){t=s.getOptionValueSource(e)}}));return t}_prepareUserArgs(e,t){if(e!==undefined&&!Array.isArray(e)){throw new Error("first parameter to parse must be array or undefined")}t=t||{};if(e===undefined){e=a.argv;if(a.versions&&a.versions.electron){t.from="electron"}}this.rawArgs=e.slice();let s;switch(t.from){case undefined:case"node":this._scriptPath=e[1];s=e.slice(2);break;case"electron":if(a.defaultApp){this._scriptPath=e[1];s=e.slice(2)}else{s=e.slice(1)}break;case"user":s=e.slice(0);break;default:throw new Error(`unexpected parse option { from: '${t.from}' }`)}if(!this._name&&this._scriptPath)this.nameFromFilename(this._scriptPath);this._name=this._name||"program";return s}parse(e,t){const s=this._prepareUserArgs(e,t);this._parseCommand([],s);return this}async parseAsync(e,t){const s=this._prepareUserArgs(e,t);await this._parseCommand([],s);return this}_executeSubCommand(e,t){t=t.slice();let s=false;const r=[".js",".ts",".tsx",".mjs",".cjs"];function findFile(e,t){const s=i.resolve(e,t);if(o.existsSync(s))return s;if(r.includes(i.extname(t)))return undefined;const n=r.find((e=>o.existsSync(`${s}${e}`)));if(n)return`${s}${n}`;return undefined}this._checkForMissingMandatoryOptions();this._checkForConflictingOptions();let c=e._executableFile||`${this._name}-${e._name}`;let l=this._executableDir||"";if(this._scriptPath){let e;try{e=o.realpathSync(this._scriptPath)}catch(t){e=this._scriptPath}l=i.resolve(i.dirname(e),l)}if(l){let t=findFile(l,c);if(!t&&!e._executableFile&&this._scriptPath){const s=i.basename(this._scriptPath,i.extname(this._scriptPath));if(s!==this._name){t=findFile(l,`${s}-${e._name}`)}}c=t||c}s=r.includes(i.extname(c));let u;if(a.platform!=="win32"){if(s){t.unshift(c);t=incrementNodeInspectorPort(a.execArgv).concat(t);u=n.spawn(a.argv[0],t,{stdio:"inherit"})}else{u=n.spawn(c,t,{stdio:"inherit"})}}else{t.unshift(c);t=incrementNodeInspectorPort(a.execArgv).concat(t);u=n.spawn(a.execPath,t,{stdio:"inherit"})}if(!u.killed){const e=["SIGUSR1","SIGUSR2","SIGTERM","SIGINT","SIGHUP"];e.forEach((e=>{a.on(e,(()=>{if(u.killed===false&&u.exitCode===null){u.kill(e)}}))}))}const d=this._exitCallback;if(!d){u.on("close",a.exit.bind(a))}else{u.on("close",(()=>{d(new h(a.exitCode||0,"commander.executeSubCommandAsync","(close)"))}))}u.on("error",(t=>{if(t.code==="ENOENT"){const t=l?`searched for local subcommand relative to directory '${l}'`:"no directory for search for local subcommand, use .executableDir() to supply a custom directory";const s=`'${c}' does not exist\n - if '${e._name}' is not meant to be an executable command, remove description parameter from '.command()' and use '.description()' instead\n - if the default executable name is not suitable, use the executableFile option to supply a custom name or path\n - ${t}`;throw new Error(s)}else if(t.code==="EACCES"){throw new Error(`'${c}' not executable`)}if(!d){a.exit(1)}else{const e=new h(1,"commander.executeSubCommandAsync","(error)");e.nestedError=t;d(e)}}));this.runningCommand=u}_dispatchSubcommand(e,t,s){const r=this._findCommand(e);if(!r)this.help({error:true});let n;n=this._chainOrCallSubCommandHook(n,r,"preSubcommand");n=this._chainOrCall(n,(()=>{if(r._executableHandler){this._executeSubCommand(r,t.concat(s))}else{return r._parseCommand(t,s)}}));return n}_checkNumberOfArguments(){this._args.forEach(((e,t)=>{if(e.required&&this.args[t]==null){this.missingArgument(e.name())}}));if(this._args.length>0&&this._args[this._args.length-1].variadic){return}if(this.args.length>this._args.length){this._excessArguments(this.args)}}_processArguments(){const myParseArg=(e,t,s)=>{let r=t;if(t!==null&&e.parseArg){try{r=e.parseArg(t,s)}catch(s){if(s.code==="commander.invalidArgument"){const r=`error: command-argument value '${t}' is invalid for argument '${e.name()}'. ${s.message}`;this.error(r,{exitCode:s.exitCode,code:s.code})}throw s}}return r};this._checkNumberOfArguments();const e=[];this._args.forEach(((t,s)=>{let r=t.defaultValue;if(t.variadic){if(s<this.args.length){r=this.args.slice(s);if(t.parseArg){r=r.reduce(((e,s)=>myParseArg(t,s,e)),t.defaultValue)}}else if(r===undefined){r=[]}}else if(s<this.args.length){r=this.args[s];if(t.parseArg){r=myParseArg(t,r,t.defaultValue)}}e[s]=r}));this.processedArgs=e}_chainOrCall(e,t){if(e&&e.then&&typeof e.then==="function"){return e.then((()=>t()))}return t()}_chainOrCallHooks(e,t){let s=e;const r=[];getCommandAndParents(this).reverse().filter((e=>e._lifeCycleHooks[t]!==undefined)).forEach((e=>{e._lifeCycleHooks[t].forEach((t=>{r.push({hookedCommand:e,callback:t})}))}));if(t==="postAction"){r.reverse()}r.forEach((e=>{s=this._chainOrCall(s,(()=>e.callback(e.hookedCommand,this)))}));return s}_chainOrCallSubCommandHook(e,t,s){let r=e;if(this._lifeCycleHooks[s]!==undefined){this._lifeCycleHooks[s].forEach((e=>{r=this._chainOrCall(r,(()=>e(this,t)))}))}return r}_parseCommand(e,t){const s=this.parseOptions(t);this._parseOptionsEnv();this._parseOptionsImplied();e=e.concat(s.operands);t=s.unknown;this.args=e.concat(t);if(e&&this._findCommand(e[0])){return this._dispatchSubcommand(e[0],e.slice(1),t)}if(this._hasImplicitHelpCommand()&&e[0]===this._helpCommandName){if(e.length===1){this.help()}return this._dispatchSubcommand(e[1],[],[this._helpLongFlag])}if(this._defaultCommandName){outputHelpIfRequested(this,t);return this._dispatchSubcommand(this._defaultCommandName,e,t)}if(this.commands.length&&this.args.length===0&&!this._actionHandler&&!this._defaultCommandName){this.help({error:true})}outputHelpIfRequested(this,s.unknown);this._checkForMissingMandatoryOptions();this._checkForConflictingOptions();const checkForUnknownOptions=()=>{if(s.unknown.length>0){this.unknownOption(s.unknown[0])}};const r=`command:${this.name()}`;if(this._actionHandler){checkForUnknownOptions();this._processArguments();let s;s=this._chainOrCallHooks(s,"preAction");s=this._chainOrCall(s,(()=>this._actionHandler(this.processedArgs)));if(this.parent){s=this._chainOrCall(s,(()=>{this.parent.emit(r,e,t)}))}s=this._chainOrCallHooks(s,"postAction");return s}if(this.parent&&this.parent.listenerCount(r)){checkForUnknownOptions();this._processArguments();this.parent.emit(r,e,t)}else if(e.length){if(this._findCommand("*")){return this._dispatchSubcommand("*",e,t)}if(this.listenerCount("command:*")){this.emit("command:*",e,t)}else if(this.commands.length){this.unknownCommand()}else{checkForUnknownOptions();this._processArguments()}}else if(this.commands.length){checkForUnknownOptions();this.help({error:true})}else{checkForUnknownOptions();this._processArguments()}}_findCommand(e){if(!e)return undefined;return this.commands.find((t=>t._name===e||t._aliases.includes(e)))}_findOption(e){return this.options.find((t=>t.is(e)))}_checkForMissingMandatoryOptions(){for(let e=this;e;e=e.parent){e.options.forEach((t=>{if(t.mandatory&&e.getOptionValue(t.attributeName())===undefined){e.missingMandatoryOptionValue(t)}}))}}_checkForConflictingLocalOptions(){const e=this.options.filter((e=>{const t=e.attributeName();if(this.getOptionValue(t)===undefined){return false}return this.getOptionValueSource(t)!=="default"}));const t=e.filter((e=>e.conflictsWith.length>0));t.forEach((t=>{const s=e.find((e=>t.conflictsWith.includes(e.attributeName())));if(s){this._conflictingOption(t,s)}}))}_checkForConflictingOptions(){for(let e=this;e;e=e.parent){e._checkForConflictingLocalOptions()}}parseOptions(e){const t=[];const s=[];let r=t;const n=e.slice();function maybeOption(e){return e.length>1&&e[0]==="-"}let i=null;while(n.length){const e=n.shift();if(e==="--"){if(r===s)r.push(e);r.push(...n);break}if(i&&!maybeOption(e)){this.emit(`option:${i.name()}`,e);continue}i=null;if(maybeOption(e)){const t=this._findOption(e);if(t){if(t.required){const e=n.shift();if(e===undefined)this.optionMissingArgument(t);this.emit(`option:${t.name()}`,e)}else if(t.optional){let e=null;if(n.length>0&&!maybeOption(n[0])){e=n.shift()}this.emit(`option:${t.name()}`,e)}else{this.emit(`option:${t.name()}`)}i=t.variadic?t:null;continue}}if(e.length>2&&e[0]==="-"&&e[1]!=="-"){const t=this._findOption(`-${e[1]}`);if(t){if(t.required||t.optional&&this._combineFlagAndOptionalValue){this.emit(`option:${t.name()}`,e.slice(2))}else{this.emit(`option:${t.name()}`);n.unshift(`-${e.slice(2)}`)}continue}}if(/^--[^=]+=/.test(e)){const t=e.indexOf("=");const s=this._findOption(e.slice(0,t));if(s&&(s.required||s.optional)){this.emit(`option:${s.name()}`,e.slice(t+1));continue}}if(maybeOption(e)){r=s}if((this._enablePositionalOptions||this._passThroughOptions)&&t.length===0&&s.length===0){if(this._findCommand(e)){t.push(e);if(n.length>0)s.push(...n);break}else if(e===this._helpCommandName&&this._hasImplicitHelpCommand()){t.push(e);if(n.length>0)t.push(...n);break}else if(this._defaultCommandName){s.push(e);if(n.length>0)s.push(...n);break}}if(this._passThroughOptions){r.push(e);if(n.length>0)r.push(...n);break}r.push(e)}return{operands:t,unknown:s}}opts(){if(this._storeOptionsAsProperties){const e={};const t=this.options.length;for(let s=0;s<t;s++){const t=this.options[s].attributeName();e[t]=t===this._versionOptionName?this._version:this[t]}return e}return this._optionValues}optsWithGlobals(){return getCommandAndParents(this).reduce(((e,t)=>Object.assign(e,t.opts())),{})}error(e,t){this._outputConfiguration.outputError(`${e}\n`,this._outputConfiguration.writeErr);if(typeof this._showHelpAfterError==="string"){this._outputConfiguration.writeErr(`${this._showHelpAfterError}\n`)}else if(this._showHelpAfterError){this._outputConfiguration.writeErr("\n");this.outputHelp({error:true})}const s=t||{};const r=s.exitCode||1;const n=s.code||"commander.error";this._exit(r,n,e)}_parseOptionsEnv(){this.options.forEach((e=>{if(e.envVar&&e.envVar in a.env){const t=e.attributeName();if(this.getOptionValue(t)===undefined||["default","config","env"].includes(this.getOptionValueSource(t))){if(e.required||e.optional){this.emit(`optionEnv:${e.name()}`,a.env[e.envVar])}else{this.emit(`optionEnv:${e.name()}`)}}}}))}_parseOptionsImplied(){const e=new p(this.options);const hasCustomOptionValue=e=>this.getOptionValue(e)!==undefined&&!["default","implied"].includes(this.getOptionValueSource(e));this.options.filter((t=>t.implied!==undefined&&hasCustomOptionValue(t.attributeName())&&e.valueFromOption(this.getOptionValue(t.attributeName()),t))).forEach((e=>{Object.keys(e.implied).filter((e=>!hasCustomOptionValue(e))).forEach((t=>{this.setOptionValueWithSource(t,e.implied[t],"implied")}))}))}missingArgument(e){const t=`error: missing required argument '${e}'`;this.error(t,{code:"commander.missingArgument"})}optionMissingArgument(e){const t=`error: option '${e.flags}' argument missing`;this.error(t,{code:"commander.optionMissingArgument"})}missingMandatoryOptionValue(e){const t=`error: required option '${e.flags}' not specified`;this.error(t,{code:"commander.missingMandatoryOptionValue"})}_conflictingOption(e,t){const findBestOptionFromValue=e=>{const t=e.attributeName();const s=this.getOptionValue(t);const r=this.options.find((e=>e.negate&&t===e.attributeName()));const n=this.options.find((e=>!e.negate&&t===e.attributeName()));if(r&&(r.presetArg===undefined&&s===false||r.presetArg!==undefined&&s===r.presetArg)){return r}return n||e};const getErrorMessage=e=>{const t=findBestOptionFromValue(e);const s=t.attributeName();const r=this.getOptionValueSource(s);if(r==="env"){return`environment variable '${t.envVar}'`}return`option '${t.flags}'`};const s=`error: ${getErrorMessage(e)} cannot be used with ${getErrorMessage(t)}`;this.error(s,{code:"commander.conflictingOption"})}unknownOption(e){if(this._allowUnknownOption)return;let t="";if(e.startsWith("--")&&this._showSuggestionAfterError){let s=[];let r=this;do{const e=r.createHelp().visibleOptions(r).filter((e=>e.long)).map((e=>e.long));s=s.concat(e);r=r.parent}while(r&&!r._enablePositionalOptions);t=m(e,s)}const s=`error: unknown option '${e}'${t}`;this.error(s,{code:"commander.unknownOption"})}_excessArguments(e){if(this._allowExcessArguments)return;const t=this._args.length;const s=t===1?"":"s";const r=this.parent?` for '${this.name()}'`:"";const n=`error: too many arguments${r}. Expected ${t} argument${s} but got ${e.length}.`;this.error(n,{code:"commander.excessArguments"})}unknownCommand(){const e=this.args[0];let t="";if(this._showSuggestionAfterError){const s=[];this.createHelp().visibleCommands(this).forEach((e=>{s.push(e.name());if(e.alias())s.push(e.alias())}));t=m(e,s)}const s=`error: unknown command '${e}'${t}`;this.error(s,{code:"commander.unknownCommand"})}version(e,t,s){if(e===undefined)return this._version;this._version=e;t=t||"-V, --version";s=s||"output the version number";const r=this.createOption(t,s);this._versionOptionName=r.attributeName();this.options.push(r);this.on("option:"+r.name(),(()=>{this._outputConfiguration.writeOut(`${e}\n`);this._exit(0,"commander.version",e)}));return this}description(e,t){if(e===undefined&&t===undefined)return this._description;this._description=e;if(t){this._argsDescription=t}return this}summary(e){if(e===undefined)return this._summary;this._summary=e;return this}alias(e){if(e===undefined)return this._aliases[0];let t=this;if(this.commands.length!==0&&this.commands[this.commands.length-1]._executableHandler){t=this.commands[this.commands.length-1]}if(e===t._name)throw new Error("Command alias can't be the same as its name");t._aliases.push(e);return this}aliases(e){if(e===undefined)return this._aliases;e.forEach((e=>this.alias(e)));return this}usage(e){if(e===undefined){if(this._usage)return this._usage;const e=this._args.map((e=>l(e)));return[].concat(this.options.length||this._hasHelpOption?"[options]":[],this.commands.length?"[command]":[],this._args.length?e:[]).join(" ")}this._usage=e;return this}name(e){if(e===undefined)return this._name;this._name=e;return this}nameFromFilename(e){this._name=i.basename(e,i.extname(e));return this}executableDir(e){if(e===undefined)return this._executableDir;this._executableDir=e;return this}helpInformation(e){const t=this.createHelp();if(t.helpWidth===undefined){t.helpWidth=e&&e.error?this._outputConfiguration.getErrHelpWidth():this._outputConfiguration.getOutHelpWidth()}return t.formatHelp(this,t)}_getHelpContext(e){e=e||{};const t={error:!!e.error};let s;if(t.error){s=e=>this._outputConfiguration.writeErr(e)}else{s=e=>this._outputConfiguration.writeOut(e)}t.write=e.write||s;t.command=this;return t}outputHelp(e){let t;if(typeof e==="function"){t=e;e=undefined}const s=this._getHelpContext(e);getCommandAndParents(this).reverse().forEach((e=>e.emit("beforeAllHelp",s)));this.emit("beforeHelp",s);let r=this.helpInformation(s);if(t){r=t(r);if(typeof r!=="string"&&!Buffer.isBuffer(r)){throw new Error("outputHelp callback must return a string or a Buffer")}}s.write(r);this.emit(this._helpLongFlag);this.emit("afterHelp",s);getCommandAndParents(this).forEach((e=>e.emit("afterAllHelp",s)))}helpOption(e,t){if(typeof e==="boolean"){this._hasHelpOption=e;return this}this._helpFlags=e||this._helpFlags;this._helpDescription=t||this._helpDescription;const s=f(this._helpFlags);this._helpShortFlag=s.shortFlag;this._helpLongFlag=s.longFlag;return this}help(e){this.outputHelp(e);let t=a.exitCode||0;if(t===0&&e&&typeof e!=="function"&&e.error){t=1}this._exit(t,"commander.help","(outputHelp)")}addHelpText(e,t){const s=["beforeAll","before","after","afterAll"];if(!s.includes(e)){throw new Error(`Unexpected value for position to addHelpText.\nExpecting one of '${s.join("', '")}'`)}const r=`${e}Help`;this.on(r,(e=>{let s;if(typeof t==="function"){s=t({error:e.error,command:e.command})}else{s=t}if(s){e.write(`${s}\n`)}}));return this}}function outputHelpIfRequested(e,t){const s=e._hasHelpOption&&t.find((t=>t===e._helpLongFlag||t===e._helpShortFlag));if(s){e.outputHelp();e._exit(0,"commander.helpDisplayed","(outputHelp)")}}function incrementNodeInspectorPort(e){return e.map((e=>{if(!e.startsWith("--inspect")){return e}let t;let s="127.0.0.1";let r="9229";let n;if((n=e.match(/^(--inspect(-brk)?)$/))!==null){t=n[1]}else if((n=e.match(/^(--inspect(-brk|-port)?)=([^:]+)$/))!==null){t=n[1];if(/^\d+$/.test(n[3])){r=n[3]}else{s=n[3]}}else if((n=e.match(/^(--inspect(-brk|-port)?)=([^:]+):(\d+)$/))!==null){t=n[1];s=n[3];r=n[4]}if(t&&r!=="0"){return`${t}=${s}:${parseInt(r)+1}`}return e}))}function getCommandAndParents(e){const t=[];for(let s=e;s;s=s.parent){t.push(s)}return t}t.Command=Command},2625:(e,t)=>{class CommanderError extends Error{constructor(e,t,s){super(s);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name;this.code=t;this.exitCode=e;this.nestedError=undefined}}class InvalidArgumentError extends CommanderError{constructor(e){super(1,"commander.invalidArgument",e);Error.captureStackTrace(this,this.constructor);this.name=this.constructor.name}}t.CommanderError=CommanderError;t.InvalidArgumentError=InvalidArgumentError},5153:(e,t,s)=>{const{humanReadableArgName:r}=s(9414);class Help{constructor(){this.helpWidth=undefined;this.sortSubcommands=false;this.sortOptions=false;this.showGlobalOptions=false}visibleCommands(e){const t=e.commands.filter((e=>!e._hidden));if(e._hasImplicitHelpCommand()){const[,s,r]=e._helpCommandnameAndArgs.match(/([^ ]+) *(.*)/);const n=e.createCommand(s).helpOption(false);n.description(e._helpCommandDescription);if(r)n.arguments(r);t.push(n)}if(this.sortSubcommands){t.sort(((e,t)=>e.name().localeCompare(t.name())))}return t}compareOptions(e,t){const getSortKey=e=>e.short?e.short.replace(/^-/,""):e.long.replace(/^--/,"");return getSortKey(e).localeCompare(getSortKey(t))}visibleOptions(e){const t=e.options.filter((e=>!e.hidden));const s=e._hasHelpOption&&e._helpShortFlag&&!e._findOption(e._helpShortFlag);const r=e._hasHelpOption&&!e._findOption(e._helpLongFlag);if(s||r){let n;if(!s){n=e.createOption(e._helpLongFlag,e._helpDescription)}else if(!r){n=e.createOption(e._helpShortFlag,e._helpDescription)}else{n=e.createOption(e._helpFlags,e._helpDescription)}t.push(n)}if(this.sortOptions){t.sort(this.compareOptions)}return t}visibleGlobalOptions(e){if(!this.showGlobalOptions)return[];const t=[];for(let s=e.parent;s;s=s.parent){const e=s.options.filter((e=>!e.hidden));t.push(...e)}if(this.sortOptions){t.sort(this.compareOptions)}return t}visibleArguments(e){if(e._argsDescription){e._args.forEach((t=>{t.description=t.description||e._argsDescription[t.name()]||""}))}if(e._args.find((e=>e.description))){return e._args}return[]}subcommandTerm(e){const t=e._args.map((e=>r(e))).join(" ");return e._name+(e._aliases[0]?"|"+e._aliases[0]:"")+(e.options.length?" [options]":"")+(t?" "+t:"")}optionTerm(e){return e.flags}argumentTerm(e){return e.name()}longestSubcommandTermLength(e,t){return t.visibleCommands(e).reduce(((e,s)=>Math.max(e,t.subcommandTerm(s).length)),0)}longestOptionTermLength(e,t){return t.visibleOptions(e).reduce(((e,s)=>Math.max(e,t.optionTerm(s).length)),0)}longestGlobalOptionTermLength(e,t){return t.visibleGlobalOptions(e).reduce(((e,s)=>Math.max(e,t.optionTerm(s).length)),0)}longestArgumentTermLength(e,t){return t.visibleArguments(e).reduce(((e,s)=>Math.max(e,t.argumentTerm(s).length)),0)}commandUsage(e){let t=e._name;if(e._aliases[0]){t=t+"|"+e._aliases[0]}let s="";for(let t=e.parent;t;t=t.parent){s=t.name()+" "+s}return s+t+" "+e.usage()}commandDescription(e){return e.description()}subcommandDescription(e){return e.summary()||e.description()}optionDescription(e){const t=[];if(e.argChoices){t.push(`choices: ${e.argChoices.map((e=>JSON.stringify(e))).join(", ")}`)}if(e.defaultValue!==undefined){const s=e.required||e.optional||e.isBoolean()&&typeof e.defaultValue==="boolean";if(s){t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`)}}if(e.presetArg!==undefined&&e.optional){t.push(`preset: ${JSON.stringify(e.presetArg)}`)}if(e.envVar!==undefined){t.push(`env: ${e.envVar}`)}if(t.length>0){return`${e.description} (${t.join(", ")})`}return e.description}argumentDescription(e){const t=[];if(e.argChoices){t.push(`choices: ${e.argChoices.map((e=>JSON.stringify(e))).join(", ")}`)}if(e.defaultValue!==undefined){t.push(`default: ${e.defaultValueDescription||JSON.stringify(e.defaultValue)}`)}if(t.length>0){const s=`(${t.join(", ")})`;if(e.description){return`${e.description} ${s}`}return s}return e.description}formatHelp(e,t){const s=t.padWidth(e,t);const r=t.helpWidth||80;const n=2;const i=2;function formatItem(e,o){if(o){const a=`${e.padEnd(s+i)}${o}`;return t.wrap(a,r-n,s+i)}return e}function formatList(e){return e.join("\n").replace(/^/gm," ".repeat(n))}let o=[`Usage: ${t.commandUsage(e)}`,""];const a=t.commandDescription(e);if(a.length>0){o=o.concat([t.wrap(a,r,0),""])}const c=t.visibleArguments(e).map((e=>formatItem(t.argumentTerm(e),t.argumentDescription(e))));if(c.length>0){o=o.concat(["Arguments:",formatList(c),""])}const l=t.visibleOptions(e).map((e=>formatItem(t.optionTerm(e),t.optionDescription(e))));if(l.length>0){o=o.concat(["Options:",formatList(l),""])}if(this.showGlobalOptions){const s=t.visibleGlobalOptions(e).map((e=>formatItem(t.optionTerm(e),t.optionDescription(e))));if(s.length>0){o=o.concat(["Global Options:",formatList(s),""])}}const h=t.visibleCommands(e).map((e=>formatItem(t.subcommandTerm(e),t.subcommandDescription(e))));if(h.length>0){o=o.concat(["Commands:",formatList(h),""])}return o.join("\n")}padWidth(e,t){return Math.max(t.longestOptionTermLength(e,t),t.longestGlobalOptionTermLength(e,t),t.longestSubcommandTermLength(e,t),t.longestArgumentTermLength(e,t))}wrap(e,t,s,r=40){const n=" \\f\\t\\v   -   　\ufeff";const i=new RegExp(`[\\n][${n}]+`);if(e.match(i))return e;const o=t-s;if(o<r)return e;const a=e.slice(0,s);const c=e.slice(s).replace("\r\n","\n");const l=" ".repeat(s);const h="​";const u=`\\s${h}`;const d=new RegExp(`\n|.{1,${o-1}}([${u}]|$)|[^${u}]+?([${u}]|$)`,"g");const f=c.match(d)||[];return a+f.map(((e,t)=>{if(e==="\n")return"";return(t>0?l:"")+e.trimEnd()})).join("\n")}}t.Help=Help},6558:(e,t,s)=>{const{InvalidArgumentError:r}=s(2625);class Option{constructor(e,t){this.flags=e;this.description=t||"";this.required=e.includes("<");this.optional=e.includes("[");this.variadic=/\w\.\.\.[>\]]$/.test(e);this.mandatory=false;const s=splitOptionFlags(e);this.short=s.shortFlag;this.long=s.longFlag;this.negate=false;if(this.long){this.negate=this.long.startsWith("--no-")}this.defaultValue=undefined;this.defaultValueDescription=undefined;this.presetArg=undefined;this.envVar=undefined;this.parseArg=undefined;this.hidden=false;this.argChoices=undefined;this.conflictsWith=[];this.implied=undefined}default(e,t){this.defaultValue=e;this.defaultValueDescription=t;return this}preset(e){this.presetArg=e;return this}conflicts(e){this.conflictsWith=this.conflictsWith.concat(e);return this}implies(e){this.implied=Object.assign(this.implied||{},e);return this}env(e){this.envVar=e;return this}argParser(e){this.parseArg=e;return this}makeOptionMandatory(e=true){this.mandatory=!!e;return this}hideHelp(e=true){this.hidden=!!e;return this}_concatValue(e,t){if(t===this.defaultValue||!Array.isArray(t)){return[e]}return t.concat(e)}choices(e){this.argChoices=e.slice();this.parseArg=(e,t)=>{if(!this.argChoices.includes(e)){throw new r(`Allowed choices are ${this.argChoices.join(", ")}.`)}if(this.variadic){return this._concatValue(e,t)}return e};return this}name(){if(this.long){return this.long.replace(/^--/,"")}return this.short.replace(/^-/,"")}attributeName(){return camelcase(this.name().replace(/^no-/,""))}is(e){return this.short===e||this.long===e}isBoolean(){return!this.required&&!this.optional&&!this.negate}}class DualOptions{constructor(e){this.positiveOptions=new Map;this.negativeOptions=new Map;this.dualOptions=new Set;e.forEach((e=>{if(e.negate){this.negativeOptions.set(e.attributeName(),e)}else{this.positiveOptions.set(e.attributeName(),e)}}));this.negativeOptions.forEach(((e,t)=>{if(this.positiveOptions.has(t)){this.dualOptions.add(t)}}))}valueFromOption(e,t){const s=t.attributeName();if(!this.dualOptions.has(s))return true;const r=this.negativeOptions.get(s).presetArg;const n=r!==undefined?r:false;return t.negate===(n===e)}}function camelcase(e){return e.split("-").reduce(((e,t)=>e+t[0].toUpperCase()+t.slice(1)))}function splitOptionFlags(e){let t;let s;const r=e.split(/[ |,]+/);if(r.length>1&&!/^[[<]/.test(r[1]))t=r.shift();s=r.shift();if(!t&&/^-[^-]$/.test(s)){t=s;s=undefined}return{shortFlag:t,longFlag:s}}t.Option=Option;t.splitOptionFlags=splitOptionFlags;t.DualOptions=DualOptions},7592:(e,t)=>{const s=3;function editDistance(e,t){if(Math.abs(e.length-t.length)>s)return Math.max(e.length,t.length);const r=[];for(let t=0;t<=e.length;t++){r[t]=[t]}for(let e=0;e<=t.length;e++){r[0][e]=e}for(let s=1;s<=t.length;s++){for(let n=1;n<=e.length;n++){let i=1;if(e[n-1]===t[s-1]){i=0}else{i=1}r[n][s]=Math.min(r[n-1][s]+1,r[n][s-1]+1,r[n-1][s-1]+i);if(n>1&&s>1&&e[n-1]===t[s-2]&&e[n-2]===t[s-1]){r[n][s]=Math.min(r[n][s],r[n-2][s-2]+1)}}}return r[e.length][t.length]}function suggestSimilar(e,t){if(!t||t.length===0)return"";t=Array.from(new Set(t));const r=e.startsWith("--");if(r){e=e.slice(2);t=t.map((e=>e.slice(2)))}let n=[];let i=s;const o=.4;t.forEach((t=>{if(t.length<=1)return;const s=editDistance(e,t);const r=Math.max(e.length,t.length);const a=(r-s)/r;if(a>o){if(s<i){i=s;n=[t]}else if(s===i){n.push(t)}}}));n.sort(((e,t)=>e.localeCompare(t)));if(r){n=n.map((e=>`--${e}`))}if(n.length>1){return`\n(Did you mean one of ${n.join(", ")}?)`}if(n.length===1){return`\n(Did you mean ${n[0]}?)`}return""}t.suggestSimilar=suggestSimilar}};var s={};function __nccwpck_require__(e){var r=s[e];if(r!==undefined){return r.exports}var n=s[e]={id:e,loaded:false,exports:{}};var i=true;try{t[e](n,n.exports,__nccwpck_require__);i=false}finally{if(i)delete s[e]}n.loaded=true;return n.exports}(()=>{__nccwpck_require__.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;__nccwpck_require__.d(t,{a:t});return t}})();(()=>{__nccwpck_require__.d=(e,t)=>{for(var s in t){if(__nccwpck_require__.o(t,s)&&!__nccwpck_require__.o(e,s)){Object.defineProperty(e,s,{enumerable:true,get:t[s]})}}}})();(()=>{__nccwpck_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})();(()=>{__nccwpck_require__.nmd=e=>{e.paths=[];if(!e.children)e.children=[];return e}})();if(typeof __nccwpck_require__!=="undefined")__nccwpck_require__.ab=new URL(".",import.meta.url).pathname.slice(import.meta.url.match(/^file:\/\/\/\w:/)?1:0,-1)+"/";var r={};(()=>{var t=__nccwpck_require__(7147);var s=__nccwpck_require__.n(t);const r=e(import.meta.url)("crypto");var n=__nccwpck_require__.n(r);var i=__nccwpck_require__(4379);const{program:o,createCommand:a,createArgument:c,createOption:l,CommanderError:h,InvalidArgumentError:u,InvalidOptionArgumentError:d,Command:f,Argument:p,Option:m,Help:g}=i;const patchRom=(e,t,s)=>{let r=t.Apply(e);s.forEach((e=>{const[t,s,n]=e;for(let e=0;e<s;e++){r.set(n,t+e*n.length)}}));return r};class BpsPatch{constructor(e){this.patchBuffer=e}Apply(e){if(!BpsPatch.IsBpsPatch(this.patchBuffer)){return null}this.patchOffset=4;var t=this.Decode();var s=this.Decode();var r=this.Decode();var n=e;var i=new Uint8Array(s);if(r>0){this.patchOffset+=r}var o=0;var a=0;var c=0;let l=this.patchBuffer.length-12;if(!this.VerifyChecksum(n,l)){throw"Source Checksum Mismatch"}var h=this.patchBuffer.slice(0,l+8);if(!this.VerifyChecksum(h,l+8)){throw"Patch Checksum Mismatch"}while(this.patchOffset<l){var u=this.Decode();var d=u&3;var f=(u>>2)+1;switch(d){case 0:while(f--){i[o]=n[o];o++}break;case 1:while(f--){i[o++]=this.Read()}break;case 2:var u=this.Decode();a+=(u&1?-1:+1)*(u>>1);while(f--){i[o++]=n[a++]}break;case 3:var u=this.Decode();c+=(u&1?-1:+1)*(u>>1);while(f--){i[o++]=i[c++]}break}}if(!this.VerifyChecksum(i,l+4)){throw"Target Checksum Mismatch"}return i}static CRC32(e){if(typeof BpsPatch.crcTable=="undefined"){var t;BpsPatch.crcTable=[];for(var s=0;s<256;s++){t=s;for(var r=0;r<8;r++){t=t&1?3988292384^t>>>1:t>>>1}BpsPatch.crcTable[s]=t}}var n=0^-1;for(var i=0;i<e.length;i++){n=n>>>8^BpsPatch.crcTable[(n^e[i])&255]}return(n^-1)>>>0}Decode(){var e=0,t=1;while(true){var s=this.Read();e+=(s&127)*t;if((s&128)!=0)break;t<<=7;e+=t}return e}static IsBpsPatch(e){var t=new TextDecoder("utf-8");return t.decode(e.slice(0,4))=="BPS1"}static async Load(e){let t=await fetch(e);let s=await t.arrayBuffer();let r=new Uint8Array(s);if(!BpsPatch.IsBpsPatch(r)){return null}return new BpsPatch(r)}Read(){return this.patchBuffer[this.patchOffset++]}VerifyChecksum(e,t){var s=BpsPatch.CRC32(e);return(s&255)==this.patchBuffer[t]&(s>>8&255)==this.patchBuffer[t+1]&(s>>16&255)==this.patchBuffer[t+2]&(s>>24&255)==this.patchBuffer[t+3]}}const y=BpsPatch;const b=["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigInt64Array","BigUint64Array"];function isTypedArrayName(e){return b.includes(e)}const _=["Function","Generator","AsyncGenerator","GeneratorFunction","AsyncGeneratorFunction","AsyncFunction","Observable","Array","Buffer","Blob","Object","RegExp","Date","Error","Map","Set","WeakMap","WeakSet","WeakRef","ArrayBuffer","SharedArrayBuffer","DataView","Promise","URL","FormData","URLSearchParams","HTMLElement","NaN",...b];function isObjectTypeName(e){return _.includes(e)}const w=["null","undefined","string","number","bigint","boolean","symbol"];function isPrimitiveTypeName(e){return w.includes(e)}function isOfType(e){return t=>typeof t===e}const{toString:v}=Object.prototype;const getObjectType=e=>{const t=v.call(e).slice(8,-1);if(/HTML\w+Element/.test(t)&&is.domElement(e)){return"HTMLElement"}if(isObjectTypeName(t)){return t}return undefined};const isObjectOfType=e=>t=>getObjectType(t)===e;function is(e){if(e===null){return"null"}switch(typeof e){case"undefined":return"undefined";case"string":return"string";case"number":return Number.isNaN(e)?"NaN":"number";case"boolean":return"boolean";case"function":return"Function";case"bigint":return"bigint";case"symbol":return"symbol";default:}if(is.observable(e)){return"Observable"}if(is.array(e)){return"Array"}if(is.buffer(e)){return"Buffer"}const t=getObjectType(e);if(t){return t}if(e instanceof String||e instanceof Boolean||e instanceof Number){throw new TypeError("Please don't use object wrappers for primitive types")}return"Object"}is.undefined=isOfType("undefined");is.string=isOfType("string");const O=isOfType("number");is.number=e=>O(e)&&!is.nan(e);is.bigint=isOfType("bigint");is.function_=isOfType("function");is.null_=e=>e===null;is.class_=e=>is.function_(e)&&e.toString().startsWith("class ");is.boolean=e=>e===true||e===false;is.symbol=isOfType("symbol");is.numericString=e=>is.string(e)&&!is.emptyStringOrWhitespace(e)&&!Number.isNaN(Number(e));is.array=(e,t)=>{if(!Array.isArray(e)){return false}if(!is.function_(t)){return true}return e.every((e=>t(e)))};is.buffer=e=>e?.constructor?.isBuffer?.(e)??false;is.blob=e=>isObjectOfType("Blob")(e);is.nullOrUndefined=e=>is.null_(e)||is.undefined(e);is.object=e=>!is.null_(e)&&(typeof e==="object"||is.function_(e));is.iterable=e=>is.function_(e?.[Symbol.iterator]);is.asyncIterable=e=>is.function_(e?.[Symbol.asyncIterator]);is.generator=e=>is.iterable(e)&&is.function_(e?.next)&&is.function_(e?.throw);is.asyncGenerator=e=>is.asyncIterable(e)&&is.function_(e.next)&&is.function_(e.throw);is.nativePromise=e=>isObjectOfType("Promise")(e);const hasPromiseApi=e=>is.function_(e?.then)&&is.function_(e?.catch);is.promise=e=>is.nativePromise(e)||hasPromiseApi(e);is.generatorFunction=isObjectOfType("GeneratorFunction");is.asyncGeneratorFunction=e=>getObjectType(e)==="AsyncGeneratorFunction";is.asyncFunction=e=>getObjectType(e)==="AsyncFunction";is.boundFunction=e=>is.function_(e)&&!e.hasOwnProperty("prototype");is.regExp=isObjectOfType("RegExp");is.date=isObjectOfType("Date");is.error=isObjectOfType("Error");is.map=e=>isObjectOfType("Map")(e);is.set=e=>isObjectOfType("Set")(e);is.weakMap=e=>isObjectOfType("WeakMap")(e);is.weakSet=e=>isObjectOfType("WeakSet")(e);is.weakRef=e=>isObjectOfType("WeakRef")(e);is.int8Array=isObjectOfType("Int8Array");is.uint8Array=isObjectOfType("Uint8Array");is.uint8ClampedArray=isObjectOfType("Uint8ClampedArray");is.int16Array=isObjectOfType("Int16Array");is.uint16Array=isObjectOfType("Uint16Array");is.int32Array=isObjectOfType("Int32Array");is.uint32Array=isObjectOfType("Uint32Array");is.float32Array=isObjectOfType("Float32Array");is.float64Array=isObjectOfType("Float64Array");is.bigInt64Array=isObjectOfType("BigInt64Array");is.bigUint64Array=isObjectOfType("BigUint64Array");is.arrayBuffer=isObjectOfType("ArrayBuffer");is.sharedArrayBuffer=isObjectOfType("SharedArrayBuffer");is.dataView=isObjectOfType("DataView");is.enumCase=(e,t)=>Object.values(t).includes(e);is.directInstanceOf=(e,t)=>Object.getPrototypeOf(e)===t.prototype;is.urlInstance=e=>isObjectOfType("URL")(e);is.urlString=e=>{if(!is.string(e)){return false}try{new URL(e);return true}catch{return false}};is.truthy=e=>Boolean(e);is.falsy=e=>!e;is.nan=e=>Number.isNaN(e);is.primitive=e=>is.null_(e)||isPrimitiveTypeName(typeof e);is.integer=e=>Number.isInteger(e);is.safeInteger=e=>Number.isSafeInteger(e);is.plainObject=e=>{if(typeof e!=="object"||e===null){return false}const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};is.typedArray=e=>isTypedArrayName(getObjectType(e));const isValidLength=e=>is.safeInteger(e)&&e>=0;is.arrayLike=e=>!is.nullOrUndefined(e)&&!is.function_(e)&&isValidLength(e.length);is.inRange=(e,t)=>{if(is.number(t)){return e>=Math.min(0,t)&&e<=Math.max(t,0)}if(is.array(t)&&t.length===2){return e>=Math.min(...t)&&e<=Math.max(...t)}throw new TypeError(`Invalid range: ${JSON.stringify(t)}`)};const E=1;const C=["innerHTML","ownerDocument","style","attributes","nodeValue"];is.domElement=e=>is.object(e)&&e.nodeType===E&&is.string(e.nodeName)&&!is.plainObject(e)&&C.every((t=>t in e));is.observable=e=>{if(!e){return false}if(e===e[Symbol.observable]?.()){return true}if(e===e["@@observable"]?.()){return true}return false};is.nodeStream=e=>is.object(e)&&is.function_(e.pipe)&&!is.observable(e);is.infinite=e=>e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY;const isAbsoluteMod2=e=>t=>is.integer(t)&&Math.abs(t%2)===e;is.evenInteger=isAbsoluteMod2(0);is.oddInteger=isAbsoluteMod2(1);is.emptyArray=e=>is.array(e)&&e.length===0;is.nonEmptyArray=e=>is.array(e)&&e.length>0;is.emptyString=e=>is.string(e)&&e.length===0;const isWhiteSpaceString=e=>is.string(e)&&!/\S/.test(e);is.emptyStringOrWhitespace=e=>is.emptyString(e)||isWhiteSpaceString(e);is.nonEmptyString=e=>is.string(e)&&e.length>0;is.nonEmptyStringAndNotWhitespace=e=>is.string(e)&&!is.emptyStringOrWhitespace(e);is.emptyObject=e=>is.object(e)&&!is.map(e)&&!is.set(e)&&Object.keys(e).length===0;is.nonEmptyObject=e=>is.object(e)&&!is.map(e)&&!is.set(e)&&Object.keys(e).length>0;is.emptySet=e=>is.set(e)&&e.size===0;is.nonEmptySet=e=>is.set(e)&&e.size>0;is.emptyMap=e=>is.map(e)&&e.size===0;is.nonEmptyMap=e=>is.map(e)&&e.size>0;is.propertyKey=e=>is.any([is.string,is.number,is.symbol],e);is.formData=e=>isObjectOfType("FormData")(e);is.urlSearchParams=e=>isObjectOfType("URLSearchParams")(e);const predicateOnArray=(e,t,s)=>{if(!is.function_(t)){throw new TypeError(`Invalid predicate: ${JSON.stringify(t)}`)}if(s.length===0){throw new TypeError("Invalid number of values")}return e.call(s,t)};is.any=(e,...t)=>{const s=is.array(e)?e:[e];return s.some((e=>predicateOnArray(Array.prototype.some,e,t)))};is.all=(e,...t)=>predicateOnArray(Array.prototype.every,e,t);const assertType=(e,t,s,r={})=>{if(!e){const{multipleValues:e}=r;const n=e?`received values of types ${[...new Set(s.map((e=>`\`${is(e)}\``)))].join(", ")}`:`received value of type \`${is(s)}\``;throw new TypeError(`Expected value which is \`${t}\`, ${n}.`)}};const k={undefined:e=>assertType(is.undefined(e),"undefined",e),string:e=>assertType(is.string(e),"string",e),number:e=>assertType(is.number(e),"number",e),bigint:e=>assertType(is.bigint(e),"bigint",e),function_:e=>assertType(is.function_(e),"Function",e),null_:e=>assertType(is.null_(e),"null",e),class_:e=>assertType(is.class_(e),"Class",e),boolean:e=>assertType(is.boolean(e),"boolean",e),symbol:e=>assertType(is.symbol(e),"symbol",e),numericString:e=>assertType(is.numericString(e),"string with a number",e),array:(e,t)=>{const s=assertType;s(is.array(e),"Array",e);if(t){e.forEach(t)}},buffer:e=>assertType(is.buffer(e),"Buffer",e),blob:e=>assertType(is.blob(e),"Blob",e),nullOrUndefined:e=>assertType(is.nullOrUndefined(e),"null or undefined",e),object:e=>assertType(is.object(e),"Object",e),iterable:e=>assertType(is.iterable(e),"Iterable",e),asyncIterable:e=>assertType(is.asyncIterable(e),"AsyncIterable",e),generator:e=>assertType(is.generator(e),"Generator",e),asyncGenerator:e=>assertType(is.asyncGenerator(e),"AsyncGenerator",e),nativePromise:e=>assertType(is.nativePromise(e),"native Promise",e),promise:e=>assertType(is.promise(e),"Promise",e),generatorFunction:e=>assertType(is.generatorFunction(e),"GeneratorFunction",e),asyncGeneratorFunction:e=>assertType(is.asyncGeneratorFunction(e),"AsyncGeneratorFunction",e),asyncFunction:e=>assertType(is.asyncFunction(e),"AsyncFunction",e),boundFunction:e=>assertType(is.boundFunction(e),"Function",e),regExp:e=>assertType(is.regExp(e),"RegExp",e),date:e=>assertType(is.date(e),"Date",e),error:e=>assertType(is.error(e),"Error",e),map:e=>assertType(is.map(e),"Map",e),set:e=>assertType(is.set(e),"Set",e),weakMap:e=>assertType(is.weakMap(e),"WeakMap",e),weakSet:e=>assertType(is.weakSet(e),"WeakSet",e),weakRef:e=>assertType(is.weakRef(e),"WeakRef",e),int8Array:e=>assertType(is.int8Array(e),"Int8Array",e),uint8Array:e=>assertType(is.uint8Array(e),"Uint8Array",e),uint8ClampedArray:e=>assertType(is.uint8ClampedArray(e),"Uint8ClampedArray",e),int16Array:e=>assertType(is.int16Array(e),"Int16Array",e),uint16Array:e=>assertType(is.uint16Array(e),"Uint16Array",e),int32Array:e=>assertType(is.int32Array(e),"Int32Array",e),uint32Array:e=>assertType(is.uint32Array(e),"Uint32Array",e),float32Array:e=>assertType(is.float32Array(e),"Float32Array",e),float64Array:e=>assertType(is.float64Array(e),"Float64Array",e),bigInt64Array:e=>assertType(is.bigInt64Array(e),"BigInt64Array",e),bigUint64Array:e=>assertType(is.bigUint64Array(e),"BigUint64Array",e),arrayBuffer:e=>assertType(is.arrayBuffer(e),"ArrayBuffer",e),sharedArrayBuffer:e=>assertType(is.sharedArrayBuffer(e),"SharedArrayBuffer",e),dataView:e=>assertType(is.dataView(e),"DataView",e),enumCase:(e,t)=>assertType(is.enumCase(e,t),"EnumCase",e),urlInstance:e=>assertType(is.urlInstance(e),"URL",e),urlString:e=>assertType(is.urlString(e),"string with a URL",e),truthy:e=>assertType(is.truthy(e),"truthy",e),falsy:e=>assertType(is.falsy(e),"falsy",e),nan:e=>assertType(is.nan(e),"NaN",e),primitive:e=>assertType(is.primitive(e),"primitive",e),integer:e=>assertType(is.integer(e),"integer",e),safeInteger:e=>assertType(is.safeInteger(e),"integer",e),plainObject:e=>assertType(is.plainObject(e),"plain object",e),typedArray:e=>assertType(is.typedArray(e),"TypedArray",e),arrayLike:e=>assertType(is.arrayLike(e),"array-like",e),domElement:e=>assertType(is.domElement(e),"HTMLElement",e),observable:e=>assertType(is.observable(e),"Observable",e),nodeStream:e=>assertType(is.nodeStream(e),"Node.js Stream",e),infinite:e=>assertType(is.infinite(e),"infinite number",e),emptyArray:e=>assertType(is.emptyArray(e),"empty array",e),nonEmptyArray:e=>assertType(is.nonEmptyArray(e),"non-empty array",e),emptyString:e=>assertType(is.emptyString(e),"empty string",e),emptyStringOrWhitespace:e=>assertType(is.emptyStringOrWhitespace(e),"empty string or whitespace",e),nonEmptyString:e=>assertType(is.nonEmptyString(e),"non-empty string",e),nonEmptyStringAndNotWhitespace:e=>assertType(is.nonEmptyStringAndNotWhitespace(e),"non-empty string and not whitespace",e),emptyObject:e=>assertType(is.emptyObject(e),"empty object",e),nonEmptyObject:e=>assertType(is.nonEmptyObject(e),"non-empty object",e),emptySet:e=>assertType(is.emptySet(e),"empty set",e),nonEmptySet:e=>assertType(is.nonEmptySet(e),"non-empty set",e),emptyMap:e=>assertType(is.emptyMap(e),"empty map",e),nonEmptyMap:e=>assertType(is.nonEmptyMap(e),"non-empty map",e),propertyKey:e=>assertType(is.propertyKey(e),"PropertyKey",e),formData:e=>assertType(is.formData(e),"FormData",e),urlSearchParams:e=>assertType(is.urlSearchParams(e),"URLSearchParams",e),evenInteger:e=>assertType(is.evenInteger(e),"even integer",e),oddInteger:e=>assertType(is.oddInteger(e),"odd integer",e),directInstanceOf:(e,t)=>assertType(is.directInstanceOf(e,t),"T",e),inRange:(e,t)=>assertType(is.inRange(e,t),"in range",e),any:(e,...t)=>assertType(is.any(e,...t),"predicate returns truthy for any value",t,{multipleValues:true}),all:(e,...t)=>assertType(is.all(e,...t),"predicate returns truthy for all values",t,{multipleValues:true})};Object.defineProperties(is,{class:{value:is.class_},function:{value:is.function_},null:{value:is.null_}});Object.defineProperties(k,{class:{value:k.class_},function:{value:k.function_},null:{value:k.null_}});const x=is;const S=e(import.meta.url)("node:events");class CancelError extends Error{constructor(e){super(e||"Promise was canceled");this.name="CancelError"}get isCanceled(){return true}}class PCancelable{static fn(e){return(...t)=>new PCancelable(((s,r,n)=>{t.push(n);e(...t).then(s,r)}))}constructor(e){this._cancelHandlers=[];this._isPending=true;this._isCanceled=false;this._rejectOnCancel=true;this._promise=new Promise(((t,s)=>{this._reject=s;const onResolve=e=>{if(!this._isCanceled||!onCancel.shouldReject){this._isPending=false;t(e)}};const onReject=e=>{this._isPending=false;s(e)};const onCancel=e=>{if(!this._isPending){throw new Error("The `onCancel` handler was attached after the promise settled.")}this._cancelHandlers.push(e)};Object.defineProperties(onCancel,{shouldReject:{get:()=>this._rejectOnCancel,set:e=>{this._rejectOnCancel=e}}});e(onResolve,onReject,onCancel)}))}then(e,t){return this._promise.then(e,t)}catch(e){return this._promise.catch(e)}finally(e){return this._promise.finally(e)}cancel(e){if(!this._isPending||this._isCanceled){return}this._isCanceled=true;if(this._cancelHandlers.length>0){try{for(const e of this._cancelHandlers){e()}}catch(e){this._reject(e);return}}if(this._rejectOnCancel){this._reject(new CancelError(e))}}get isCanceled(){return this._isCanceled}}Object.setPrototypeOf(PCancelable.prototype,Promise.prototype);function isRequest(e){return x.object(e)&&"_onResponse"in e}class RequestError extends Error{constructor(e,t,s){super(e);Object.defineProperty(this,"input",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"code",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"stack",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"response",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"request",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"timings",{enumerable:true,configurable:true,writable:true,value:void 0});Error.captureStackTrace(this,this.constructor);this.name="RequestError";this.code=t.code??"ERR_GOT_REQUEST_ERROR";this.input=t.input;if(isRequest(s)){Object.defineProperty(this,"request",{enumerable:false,value:s});Object.defineProperty(this,"response",{enumerable:false,value:s.response});this.options=s.options}else{this.options=s}this.timings=this.request?.timings;if(x.string(t.stack)&&x.string(this.stack)){const e=this.stack.indexOf(this.message)+this.message.length;const s=this.stack.slice(e).split("\n").reverse();const r=t.stack.slice(t.stack.indexOf(t.message)+t.message.length).split("\n").reverse();while(r.length>0&&r[0]===s[0]){s.shift()}this.stack=`${this.stack.slice(0,e)}${s.reverse().join("\n")}${r.reverse().join("\n")}`}}}class MaxRedirectsError extends RequestError{constructor(e){super(`Redirected ${e.options.maxRedirects} times. Aborting.`,{},e);this.name="MaxRedirectsError";this.code="ERR_TOO_MANY_REDIRECTS"}}class HTTPError extends RequestError{constructor(e){super(`Response code ${e.statusCode} (${e.statusMessage})`,{},e.request);this.name="HTTPError";this.code="ERR_NON_2XX_3XX_RESPONSE"}}class CacheError extends RequestError{constructor(e,t){super(e.message,e,t);this.name="CacheError";this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_CACHE_ACCESS":this.code}}class UploadError extends RequestError{constructor(e,t){super(e.message,e,t);this.name="UploadError";this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_UPLOAD":this.code}}class TimeoutError extends RequestError{constructor(e,t,s){super(e.message,e,s);Object.defineProperty(this,"timings",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"event",{enumerable:true,configurable:true,writable:true,value:void 0});this.name="TimeoutError";this.event=e.event;this.timings=t}}class ReadError extends RequestError{constructor(e,t){super(e.message,e,t);this.name="ReadError";this.code=this.code==="ERR_GOT_REQUEST_ERROR"?"ERR_READING_RESPONSE_STREAM":this.code}}class RetryError extends RequestError{constructor(e){super("Retrying",{},e);this.name="RetryError";this.code="ERR_RETRYING"}}class AbortError extends RequestError{constructor(e){super("This operation was aborted.",{},e);this.code="ERR_ABORTED";this.name="AbortError"}}const A=e(import.meta.url)("node:process");const P=e(import.meta.url)("node:buffer");const R=e(import.meta.url)("node:stream");const T=e(import.meta.url)("node:url");const j=e(import.meta.url)("node:http");var H=__nccwpck_require__(2361);var q=__nccwpck_require__(3837);var I=__nccwpck_require__(6214);const timer=e=>{if(e.timings){return e.timings}const t={start:Date.now(),socket:undefined,lookup:undefined,connect:undefined,secureConnect:undefined,upload:undefined,response:undefined,end:undefined,error:undefined,abort:undefined,phases:{wait:undefined,dns:undefined,tcp:undefined,tls:undefined,request:undefined,firstByte:undefined,download:undefined,total:undefined}};e.timings=t;const handleError=e=>{e.once(H.errorMonitor,(()=>{t.error=Date.now();t.phases.total=t.error-t.start}))};handleError(e);const onAbort=()=>{t.abort=Date.now();t.phases.total=t.abort-t.start};e.prependOnceListener("abort",onAbort);const onSocket=e=>{t.socket=Date.now();t.phases.wait=t.socket-t.start;if(q.types.isProxy(e)){return}const lookupListener=()=>{t.lookup=Date.now();t.phases.dns=t.lookup-t.socket};e.prependOnceListener("lookup",lookupListener);I(e,{connect:()=>{t.connect=Date.now();if(t.lookup===undefined){e.removeListener("lookup",lookupListener);t.lookup=t.connect;t.phases.dns=t.lookup-t.socket}t.phases.tcp=t.connect-t.lookup},secureConnect:()=>{t.secureConnect=Date.now();t.phases.tls=t.secureConnect-t.connect}})};if(e.socket){onSocket(e.socket)}else{e.prependOnceListener("socket",onSocket)}const onUpload=()=>{t.upload=Date.now();t.phases.request=t.upload-(t.secureConnect??t.connect)};if(e.writableFinished){onUpload()}else{e.prependOnceListener("finish",onUpload)}e.prependOnceListener("response",(s=>{t.response=Date.now();t.phases.firstByte=t.response-t.upload;s.timings=t;handleError(s);s.prependOnceListener("end",(()=>{e.off("abort",onAbort);s.off("aborted",onAbort);if(t.phases.total){return}t.end=Date.now();t.phases.download=t.end-t.response;t.phases.total=t.end-t.start}));s.prependOnceListener("aborted",onAbort)}));return t};const $=timer;const N=e(import.meta.url)("node:crypto");const L="text/plain";const M="us-ascii";const testParameter=(e,t)=>t.some((t=>t instanceof RegExp?t.test(e):t===e));const D=new Set(["https:","http:","file:"]);const hasCustomProtocol=e=>{try{const{protocol:t}=new URL(e);return t.endsWith(":")&&!D.has(t)}catch{return false}};const normalizeDataURL=(e,{stripHash:t})=>{const s=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(e);if(!s){throw new Error(`Invalid URL: ${e}`)}let{type:r,data:n,hash:i}=s.groups;const o=r.split(";");i=t?"":i;let a=false;if(o[o.length-1]==="base64"){o.pop();a=true}const c=o.shift()?.toLowerCase()??"";const l=o.map((e=>{let[t,s=""]=e.split("=").map((e=>e.trim()));if(t==="charset"){s=s.toLowerCase();if(s===M){return""}}return`${t}${s?`=${s}`:""}`})).filter(Boolean);const h=[...l];if(a){h.push("base64")}if(h.length>0||c&&c!==L){h.unshift(c)}return`data:${h.join(";")},${a?n.trim():n}${i?`#${i}`:""}`};function normalizeUrl(e,t){t={defaultProtocol:"http",normalizeProtocol:true,forceHttp:false,forceHttps:false,stripAuthentication:true,stripHash:false,stripTextFragment:true,stripWWW:true,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:true,removeSingleSlash:true,removeDirectoryIndex:false,removeExplicitPort:false,sortQueryParameters:true,...t};if(typeof t.defaultProtocol==="string"&&!t.defaultProtocol.endsWith(":")){t.defaultProtocol=`${t.defaultProtocol}:`}e=e.trim();if(/^data:/i.test(e)){return normalizeDataURL(e,t)}if(hasCustomProtocol(e)){return e}const s=e.startsWith("//");const r=!s&&/^\.*\//.test(e);if(!r){e=e.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,t.defaultProtocol)}const n=new URL(e);if(t.forceHttp&&t.forceHttps){throw new Error("The `forceHttp` and `forceHttps` options cannot be used together")}if(t.forceHttp&&n.protocol==="https:"){n.protocol="http:"}if(t.forceHttps&&n.protocol==="http:"){n.protocol="https:"}if(t.stripAuthentication){n.username="";n.password=""}if(t.stripHash){n.hash=""}else if(t.stripTextFragment){n.hash=n.hash.replace(/#?:~:text.*?$/i,"")}if(n.pathname){const e=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g;let t=0;let s="";for(;;){const r=e.exec(n.pathname);if(!r){break}const i=r[0];const o=r.index;const a=n.pathname.slice(t,o);s+=a.replace(/\/{2,}/g,"/");s+=i;t=o+i.length}const r=n.pathname.slice(t,n.pathname.length);s+=r.replace(/\/{2,}/g,"/");n.pathname=s}if(n.pathname){try{n.pathname=decodeURI(n.pathname)}catch{}}if(t.removeDirectoryIndex===true){t.removeDirectoryIndex=[/^index\.[a-z]+$/]}if(Array.isArray(t.removeDirectoryIndex)&&t.removeDirectoryIndex.length>0){let e=n.pathname.split("/");const s=e[e.length-1];if(testParameter(s,t.removeDirectoryIndex)){e=e.slice(0,-1);n.pathname=e.slice(1).join("/")+"/"}}if(n.hostname){n.hostname=n.hostname.replace(/\.$/,"");if(t.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(n.hostname)){n.hostname=n.hostname.replace(/^www\./,"")}}if(Array.isArray(t.removeQueryParameters)){for(const e of[...n.searchParams.keys()]){if(testParameter(e,t.removeQueryParameters)){n.searchParams.delete(e)}}}if(!Array.isArray(t.keepQueryParameters)&&t.removeQueryParameters===true){n.search=""}if(Array.isArray(t.keepQueryParameters)&&t.keepQueryParameters.length>0){for(const e of[...n.searchParams.keys()]){if(!testParameter(e,t.keepQueryParameters)){n.searchParams.delete(e)}}}if(t.sortQueryParameters){n.searchParams.sort();try{n.search=decodeURIComponent(n.search)}catch{}}if(t.removeTrailingSlash){n.pathname=n.pathname.replace(/\/$/,"")}if(t.removeExplicitPort&&n.port){n.port=""}const i=e;e=n.toString();if(!t.removeSingleSlash&&n.pathname==="/"&&!i.endsWith("/")&&n.hash===""){e=e.replace(/\/$/,"")}if((t.removeTrailingSlash||n.pathname==="/")&&n.hash===""&&t.removeSingleSlash){e=e.replace(/\/$/,"")}if(s&&!t.normalizeProtocol){e=e.replace(/^http:\/\//,"//")}if(t.stripProtocol){e=e.replace(/^(?:https?:)?\/\//,"")}return e}var U=__nccwpck_require__(1766);var B=__nccwpck_require__(1002);function lowercaseKeys(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e.toLowerCase(),t])))}class Response extends R.Readable{statusCode;headers;body;url;constructor({statusCode:e,headers:t,body:s,url:r}){if(typeof e!=="number"){throw new TypeError("Argument `statusCode` should be a number")}if(typeof t!=="object"){throw new TypeError("Argument `headers` should be an object")}if(!(s instanceof Uint8Array)){throw new TypeError("Argument `body` should be a buffer")}if(typeof r!=="string"){throw new TypeError("Argument `url` should be a string")}super({read(){this.push(s);this.push(null)}});this.statusCode=e;this.headers=lowercaseKeys(t);this.body=s;this.url=r}}var F=__nccwpck_require__(1531);const z=["aborted","complete","headers","httpVersion","httpVersionMinor","httpVersionMajor","method","rawHeaders","rawTrailers","setTimeout","socket","statusCode","statusMessage","trailers","url"];function mimicResponse(e,t){if(t._readableState.autoDestroy){throw new Error("The second stream must have the `autoDestroy` option set to `false`")}const s=new Set([...Object.keys(e),...z]);const r={};for(const n of s){if(n in t){continue}r[n]={get(){const t=e[n];const s=typeof t==="function";return s?t.bind(e):t},set(t){e[n]=t},enumerable:true,configurable:false}}Object.defineProperties(t,r);e.once("aborted",(()=>{t.destroy();t.emit("aborted")}));e.once("close",(()=>{if(e.complete){if(t.readable){t.once("end",(()=>{t.emit("close")}))}else{t.emit("close")}}else{t.emit("close")}}));return t}class types_RequestError extends Error{constructor(e){super(e.message);Object.assign(this,e)}}class types_CacheError extends Error{constructor(e){super(e.message);Object.assign(this,e)}}class CacheableRequest{constructor(e,t){this.hooks=new Map;this.request=()=>(e,t)=>{let s;if(typeof e==="string"){s=normalizeUrlObject(T.parse(e));e={}}else if(e instanceof T.URL){s=normalizeUrlObject(T.parse(e.toString()));e={}}else{const[t,...r]=(e.path??"").split("?");const n=r.length>0?`?${r.join("?")}`:"";s=normalizeUrlObject({...e,pathname:t,search:n})}e={headers:{},method:"GET",cache:true,strictTtl:false,automaticFailover:false,...e,...urlObjectToRequestOptions(s)};e.headers=Object.fromEntries(V(e.headers).map((([e,t])=>[e.toLowerCase(),t])));const r=new S;const n=normalizeUrl(T.format(s),{stripWWW:false,removeTrailingSlash:false,stripAuthentication:false});let i=`${e.method}:${n}`;if(e.body&&e.method!==undefined&&["POST","PATCH","PUT"].includes(e.method)){if(e.body instanceof R.Readable){e.cache=false}else{i+=`:${N.createHash("md5").update(e.body).digest("hex")}`}}let o=false;let a=false;const makeRequest=e=>{a=true;let s=false;let requestErrorCallback=()=>{};const n=new Promise((e=>{requestErrorCallback=()=>{if(!s){s=true;e()}}}));const handler=async s=>{if(o){s.status=s.statusCode;const t=B.fromObject(o.cachePolicy).revalidatedPolicy(e,s);if(!t.modified){s.resume();await new Promise((e=>{s.once("end",e)}));const e=convertHeaders(t.policy.responseHeaders());s=new Response({statusCode:o.statusCode,headers:e,body:o.body,url:o.url});s.cachePolicy=t.policy;s.fromCache=true}}if(!s.fromCache){s.cachePolicy=new B(e,s,e);s.fromCache=false}let a;if(e.cache&&s.cachePolicy.storable()){a=cloneResponse(s);(async()=>{try{const t=U.buffer(s);await Promise.race([n,new Promise((e=>s.once("end",e))),new Promise((e=>s.once("close",e)))]);const r=await t;let a={url:s.url,statusCode:s.fromCache?o.statusCode:s.statusCode,body:r,cachePolicy:s.cachePolicy.toObject()};let c=e.strictTtl?s.cachePolicy.timeToLive():undefined;if(e.maxTtl){c=c?Math.min(c,e.maxTtl):e.maxTtl}if(this.hooks.size>0){for(const e of this.hooks.keys()){a=await this.runHook(e,a,s)}}await this.cache.set(i,a,c)}catch(e){r.emit("error",new types_CacheError(e))}})()}else if(e.cache&&o){(async()=>{try{await this.cache.delete(i)}catch(e){r.emit("error",new types_CacheError(e))}})()}r.emit("response",a??s);if(typeof t==="function"){t(a??s)}};try{const t=this.cacheRequest(e,handler);t.once("error",requestErrorCallback);t.once("abort",requestErrorCallback);t.once("destroy",requestErrorCallback);r.emit("request",t)}catch(e){r.emit("error",new types_RequestError(e))}};(async()=>{const get=async e=>{await Promise.resolve();const s=e.cache?await this.cache.get(i):undefined;if(typeof s==="undefined"&&!e.forceRefresh){makeRequest(e);return}const n=B.fromObject(s.cachePolicy);if(n.satisfiesWithoutRevalidation(e)&&!e.forceRefresh){const e=convertHeaders(n.responseHeaders());const i=new Response({statusCode:s.statusCode,headers:e,body:s.body,url:s.url});i.cachePolicy=n;i.fromCache=true;r.emit("response",i);if(typeof t==="function"){t(i)}}else if(n.satisfiesWithoutRevalidation(e)&&Date.now()>=n.timeToLive()&&e.forceRefresh){await this.cache.delete(i);e.headers=n.revalidationHeaders(e);makeRequest(e)}else{o=s;e.headers=n.revalidationHeaders(e);makeRequest(e)}};const errorHandler=e=>r.emit("error",new types_CacheError(e));if(this.cache instanceof F){const e=this.cache;e.once("error",errorHandler);r.on("error",(()=>e.removeListener("error",errorHandler)));r.on("response",(()=>e.removeListener("error",errorHandler)))}try{await get(e)}catch(t){if(e.automaticFailover&&!a){makeRequest(e)}r.emit("error",new types_CacheError(t))}})();return r};this.addHook=(e,t)=>{if(!this.hooks.has(e)){this.hooks.set(e,t)}};this.removeHook=e=>this.hooks.delete(e);this.getHook=e=>this.hooks.get(e);this.runHook=async(e,...t)=>this.hooks.get(e)?.(...t);if(t instanceof F){this.cache=t}else if(typeof t==="string"){this.cache=new F({uri:t,namespace:"cacheable-request"})}else{this.cache=new F({store:t,namespace:"cacheable-request"})}this.request=this.request.bind(this);this.cacheRequest=e}}const V=Object.entries;const cloneResponse=e=>{const t=new R.PassThrough({autoDestroy:false});mimicResponse(e,t);return e.pipe(t)};const urlObjectToRequestOptions=e=>{const t={...e};t.path=`${e.pathname||"/"}${e.search||""}`;delete t.pathname;delete t.search;return t};const normalizeUrlObject=e=>({protocol:e.protocol,auth:e.auth,hostname:e.hostname||e.host||"localhost",port:e.port,pathname:e.pathname,search:e.search});const convertHeaders=e=>{const t=[];for(const s of Object.keys(e)){t[s.toLowerCase()]=e[s]}return t};const W=CacheableRequest;const G="onResponse";var J=__nccwpck_require__(2391);const isFunction=e=>typeof e==="function";const isFormData=e=>Boolean(e&&isFunction(e.constructor)&&e[Symbol.toStringTag]==="FormData"&&isFunction(e.append)&&isFunction(e.getAll)&&isFunction(e.entries)&&isFunction(e[Symbol.iterator]));const isAsyncIterable=e=>isFunction(e[Symbol.asyncIterator]);async function*readStream(e){const t=e.getReader();while(true){const{done:e,value:s}=await t.read();if(e){break}yield s}}const getStreamIterator=e=>{if(isAsyncIterable(e)){return e}if(isFunction(e.getReader)){return readStream(e)}throw new TypeError("Unsupported data source: Expected either ReadableStream or async iterable.")};const K="abcdefghijklmnopqrstuvwxyz0123456789";function createBoundary(){let e=16;let t="";while(e--){t+=K[Math.random()*K.length<<0]}return t}const normalizeValue=e=>String(e).replace(/\r|\n/g,((e,t,s)=>{if(e==="\r"&&s[t+1]!=="\n"||e==="\n"&&s[t-1]!=="\r"){return"\r\n"}return e}));const getType=e=>Object.prototype.toString.call(e).slice(8,-1).toLowerCase();function isPlainObject(e){if(getType(e)!=="object"){return false}const t=Object.getPrototypeOf(e);if(t===null||t===undefined){return true}const s=t.constructor&&t.constructor.toString();return s===Object.toString()}function getProperty(e,t){if(typeof t==="string"){for(const[s,r]of Object.entries(e)){if(t.toLowerCase()===s.toLowerCase()){return r}}}return undefined}const proxyHeaders=e=>new Proxy(e,{get:(e,t)=>getProperty(e,t),has:(e,t)=>getProperty(e,t)!==undefined});const escapeName=e=>String(e).replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/"/g,"%22");const isFile=e=>Boolean(e&&typeof e==="object"&&isFunction(e.constructor)&&e[Symbol.toStringTag]==="File"&&isFunction(e.stream)&&e.name!=null);const Y=null&&isFile;var Q=undefined&&undefined.__classPrivateFieldSet||function(e,t,s,r,n){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a setter");if(typeof t==="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?n.call(e,s):n?n.value=s:t.set(e,s),s};var X=undefined&&undefined.__classPrivateFieldGet||function(e,t,s,r){if(s==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t==="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return s==="m"?r:s==="a"?r.call(e):r?r.value:t.get(e)};var Z,ee,te,se,re,ne,ie,oe,ae,ce,le;const he={enableAdditionalHeaders:false};const ue={writable:false,configurable:false};class FormDataEncoder{constructor(e,t,s){Z.add(this);ee.set(this,"\r\n");te.set(this,void 0);se.set(this,void 0);re.set(this,"-".repeat(2));ne.set(this,new TextEncoder);ie.set(this,void 0);oe.set(this,void 0);ae.set(this,void 0);if(!isFormData(e)){throw new TypeError("Expected first argument to be a FormData instance.")}let r;if(isPlainObject(t)){s=t}else{r=t}if(!r){r=createBoundary()}if(typeof r!=="string"){throw new TypeError("Expected boundary argument to be a string.")}if(s&&!isPlainObject(s)){throw new TypeError("Expected options argument to be an object.")}Q(this,oe,Array.from(e.entries()),"f");Q(this,ae,{...he,...s},"f");Q(this,te,X(this,ne,"f").encode(X(this,ee,"f")),"f");Q(this,se,X(this,te,"f").byteLength,"f");this.boundary=`form-data-boundary-${r}`;this.contentType=`multipart/form-data; boundary=${this.boundary}`;Q(this,ie,X(this,ne,"f").encode(`${X(this,re,"f")}${this.boundary}${X(this,re,"f")}${X(this,ee,"f").repeat(2)}`),"f");const n={"Content-Type":this.contentType};const i=X(this,Z,"m",le).call(this);if(i){this.contentLength=i;n["Content-Length"]=i}this.headers=proxyHeaders(Object.freeze(n));Object.defineProperties(this,{boundary:ue,contentType:ue,contentLength:ue,headers:ue})}getContentLength(){return this.contentLength==null?undefined:Number(this.contentLength)}*values(){for(const[e,t]of X(this,oe,"f")){const s=isFile(t)?t:X(this,ne,"f").encode(normalizeValue(t));yield X(this,Z,"m",ce).call(this,e,s);yield s;yield X(this,te,"f")}yield X(this,ie,"f")}async*encode(){for(const e of this.values()){if(isFile(e)){yield*getStreamIterator(e.stream())}else{yield e}}}[(ee=new WeakMap,te=new WeakMap,se=new WeakMap,re=new WeakMap,ne=new WeakMap,ie=new WeakMap,oe=new WeakMap,ae=new WeakMap,Z=new WeakSet,ce=function _FormDataEncoder_getFieldHeader(e,t){let s="";s+=`${X(this,re,"f")}${this.boundary}${X(this,ee,"f")}`;s+=`Content-Disposition: form-data; name="${escapeName(e)}"`;if(isFile(t)){s+=`; filename="${escapeName(t.name)}"${X(this,ee,"f")}`;s+=`Content-Type: ${t.type||"application/octet-stream"}`}const r=isFile(t)?t.size:t.byteLength;if(X(this,ae,"f").enableAdditionalHeaders===true&&r!=null&&!isNaN(r)){s+=`${X(this,ee,"f")}Content-Length: ${isFile(t)?t.size:t.byteLength}`}return X(this,ne,"f").encode(`${s}${X(this,ee,"f").repeat(2)}`)},le=function _FormDataEncoder_getContentLength(){let e=0;for(const[t,s]of X(this,oe,"f")){const r=isFile(s)?s:X(this,ne,"f").encode(normalizeValue(s));const n=isFile(r)?r.size:r.byteLength;if(n==null||isNaN(n)){return undefined}e+=X(this,Z,"m",ce).call(this,t,r).byteLength;e+=n;e+=X(this,se,"f")}return String(e+X(this,ie,"f").byteLength)},Symbol.iterator)](){return this.values()}[Symbol.asyncIterator](){return this.encode()}}const de=e(import.meta.url)("node:util");function is_form_data_isFormData(e){return x.nodeStream(e)&&x.function_(e.getBoundary)}async function getBodySize(e,t){if(t&&"content-length"in t){return Number(t["content-length"])}if(!e){return 0}if(x.string(e)){return P.Buffer.byteLength(e)}if(x.buffer(e)){return e.length}if(is_form_data_isFormData(e)){return(0,de.promisify)(e.getLength.bind(e))()}return undefined}function proxyEvents(e,t,s){const r={};for(const n of s){const eventFunction=(...e)=>{t.emit(n,...e)};r[n]=eventFunction;e.on(n,eventFunction)}return()=>{for(const[t,s]of Object.entries(r)){e.off(t,s)}}}const fe=e(import.meta.url)("node:net");function unhandle(){const e=[];return{once(t,s,r){t.once(s,r);e.push({origin:t,event:s,fn:r})},unhandleAll(){for(const t of e){const{origin:e,event:s,fn:r}=t;e.removeListener(s,r)}e.length=0}}}const pe=Symbol("reentry");const noop=()=>{};class timed_out_TimeoutError extends Error{constructor(e,t){super(`Timeout awaiting '${t}' for ${e}ms`);Object.defineProperty(this,"event",{enumerable:true,configurable:true,writable:true,value:t});Object.defineProperty(this,"code",{enumerable:true,configurable:true,writable:true,value:void 0});this.name="TimeoutError";this.code="ETIMEDOUT"}}function timedOut(e,t,s){if(pe in e){return noop}e[pe]=true;const r=[];const{once:n,unhandleAll:i}=unhandle();const addTimeout=(e,t,s)=>{const n=setTimeout(t,e,e,s);n.unref?.();const cancel=()=>{clearTimeout(n)};r.push(cancel);return cancel};const{host:o,hostname:a}=s;const timeoutHandler=(t,s)=>{e.destroy(new timed_out_TimeoutError(t,s))};const cancelTimeouts=()=>{for(const e of r){e()}i()};e.once("error",(t=>{cancelTimeouts();if(e.listenerCount("error")===0){throw t}}));if(typeof t.request!=="undefined"){const s=addTimeout(t.request,timeoutHandler,"request");n(e,"response",(e=>{n(e,"end",s)}))}if(typeof t.socket!=="undefined"){const{socket:s}=t;const socketTimeoutHandler=()=>{timeoutHandler(s,"socket")};e.setTimeout(s,socketTimeoutHandler);r.push((()=>{e.removeListener("timeout",socketTimeoutHandler)}))}const c=typeof t.lookup!=="undefined";const l=typeof t.connect!=="undefined";const h=typeof t.secureConnect!=="undefined";const u=typeof t.send!=="undefined";if(c||l||h||u){n(e,"socket",(r=>{const{socketPath:i}=e;if(r.connecting){const e=Boolean(i??fe.isIP(a??o??"")!==0);if(c&&!e&&typeof r.address().address==="undefined"){const e=addTimeout(t.lookup,timeoutHandler,"lookup");n(r,"lookup",e)}if(l){const timeConnect=()=>addTimeout(t.connect,timeoutHandler,"connect");if(e){n(r,"connect",timeConnect())}else{n(r,"lookup",(e=>{if(e===null){n(r,"connect",timeConnect())}}))}}if(h&&s.protocol==="https:"){n(r,"connect",(()=>{const e=addTimeout(t.secureConnect,timeoutHandler,"secureConnect");n(r,"secureConnect",e)}))}}if(u){const timeRequest=()=>addTimeout(t.send,timeoutHandler,"send");if(r.connecting){n(r,"connect",(()=>{n(e,"upload-complete",timeRequest())}))}else{n(e,"upload-complete",timeRequest())}}}))}if(typeof t.response!=="undefined"){n(e,"upload-complete",(()=>{const s=addTimeout(t.response,timeoutHandler,"response");n(e,"response",s)}))}if(typeof t.read!=="undefined"){n(e,"response",(e=>{const s=addTimeout(t.read,timeoutHandler,"read");n(e,"end",s)}))}return cancelTimeouts}function urlToOptions(e){e=e;const t={protocol:e.protocol,hostname:x.string(e.hostname)&&e.hostname.startsWith("[")?e.hostname.slice(1,-1):e.hostname,host:e.host,hash:e.hash,search:e.search,pathname:e.pathname,href:e.href,path:`${e.pathname||""}${e.search||""}`};if(x.string(e.port)&&e.port.length>0){t.port=Number(e.port)}if(e.username||e.password){t.auth=`${e.username||""}:${e.password||""}`}return t}class WeakableMap{constructor(){Object.defineProperty(this,"weakMap",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"map",{enumerable:true,configurable:true,writable:true,value:void 0});this.weakMap=new WeakMap;this.map=new Map}set(e,t){if(typeof e==="object"){this.weakMap.set(e,t)}else{this.map.set(e,t)}}get(e){if(typeof e==="object"){return this.weakMap.get(e)}return this.map.get(e)}has(e){if(typeof e==="object"){return this.weakMap.has(e)}return this.map.has(e)}}const calculateRetryDelay=({attemptCount:e,retryOptions:t,error:s,retryAfter:r,computedValue:n})=>{if(s.name==="RetryError"){return 1}if(e>t.limit){return 0}const i=t.methods.includes(s.options.method);const o=t.errorCodes.includes(s.code);const a=s.response&&t.statusCodes.includes(s.response.statusCode);if(!i||!o&&!a){return 0}if(s.response){if(r){if(r>n){return 0}return r}if(s.response.statusCode===413){return 0}}const c=Math.random()*t.noise;return Math.min(2**(e-1)*1e3,t.backoffLimit)+c};const me=calculateRetryDelay;const ge=e(import.meta.url)("node:tls");const ye=e(import.meta.url)("node:https");const be=e(import.meta.url)("node:dns");const _e=e(import.meta.url)("node:os");const{Resolver:we}=be.promises;const ve=Symbol("cacheableLookupCreateConnection");const Oe=Symbol("cacheableLookupInstance");const Ee=Symbol("expires");const Ce=typeof be.ALL==="number";const verifyAgent=e=>{if(!(e&&typeof e.createConnection==="function")){throw new Error("Expected an Agent instance as the first argument")}};const map4to6=e=>{for(const t of e){if(t.family===6){continue}t.address=`::ffff:${t.address}`;t.family=6}};const getIfaceInfo=()=>{let e=false;let t=false;for(const s of Object.values(_e.networkInterfaces())){for(const r of s){if(r.internal){continue}if(r.family==="IPv6"){t=true}else{e=true}if(e&&t){return{has4:e,has6:t}}}}return{has4:e,has6:t}};const isIterable=e=>Symbol.iterator in e;const ignoreNoResultErrors=e=>e.catch((e=>{if(e.code==="ENODATA"||e.code==="ENOTFOUND"||e.code==="ENOENT"){return[]}throw e}));const ke={ttl:true};const xe={all:true};const Se={all:true,family:4};const Ae={all:true,family:6};class CacheableLookup{constructor({cache:e=new Map,maxTtl:t=Infinity,fallbackDuration:s=3600,errorTtl:r=.15,resolver:n=new we,lookup:i=be.lookup}={}){this.maxTtl=t;this.errorTtl=r;this._cache=e;this._resolver=n;this._dnsLookup=i&&(0,de.promisify)(i);this.stats={cache:0,query:0};if(this._resolver instanceof we){this._resolve4=this._resolver.resolve4.bind(this._resolver);this._resolve6=this._resolver.resolve6.bind(this._resolver)}else{this._resolve4=(0,de.promisify)(this._resolver.resolve4.bind(this._resolver));this._resolve6=(0,de.promisify)(this._resolver.resolve6.bind(this._resolver))}this._iface=getIfaceInfo();this._pending={};this._nextRemovalTime=false;this._hostnamesToFallback=new Set;this.fallbackDuration=s;if(s>0){const e=setInterval((()=>{this._hostnamesToFallback.clear()}),s*1e3);if(e.unref){e.unref()}this._fallbackInterval=e}this.lookup=this.lookup.bind(this);this.lookupAsync=this.lookupAsync.bind(this)}set servers(e){this.clear();this._resolver.setServers(e)}get servers(){return this._resolver.getServers()}lookup(e,t,s){if(typeof t==="function"){s=t;t={}}else if(typeof t==="number"){t={family:t}}if(!s){throw new Error("Callback must be a function.")}this.lookupAsync(e,t).then((e=>{if(t.all){s(null,e)}else{s(null,e.address,e.family,e.expires,e.ttl,e.source)}}),s)}async lookupAsync(e,t={}){if(typeof t==="number"){t={family:t}}let s=await this.query(e);if(t.family===6){const e=s.filter((e=>e.family===6));if(t.hints&be.V4MAPPED){if(Ce&&t.hints&be.ALL||e.length===0){map4to6(s)}else{s=e}}else{s=e}}else if(t.family===4){s=s.filter((e=>e.family===4))}if(t.hints&be.ADDRCONFIG){const{_iface:e}=this;s=s.filter((t=>t.family===6?e.has6:e.has4))}if(s.length===0){const t=new Error(`cacheableLookup ENOTFOUND ${e}`);t.code="ENOTFOUND";t.hostname=e;throw t}if(t.all){return s}return s[0]}async query(e){let t="cache";let s=await this._cache.get(e);if(s){this.stats.cache++}if(!s){const r=this._pending[e];if(r){this.stats.cache++;s=await r}else{t="query";const r=this.queryAndCache(e);this._pending[e]=r;this.stats.query++;try{s=await r}finally{delete this._pending[e]}}}s=s.map((e=>({...e,source:t})));return s}async _resolve(e){const[t,s]=await Promise.all([ignoreNoResultErrors(this._resolve4(e,ke)),ignoreNoResultErrors(this._resolve6(e,ke))]);let r=0;let n=0;let i=0;const o=Date.now();for(const e of t){e.family=4;e.expires=o+e.ttl*1e3;r=Math.max(r,e.ttl)}for(const e of s){e.family=6;e.expires=o+e.ttl*1e3;n=Math.max(n,e.ttl)}if(t.length>0){if(s.length>0){i=Math.min(r,n)}else{i=r}}else{i=n}return{entries:[...t,...s],cacheTtl:i}}async _lookup(e){try{const[t,s]=await Promise.all([ignoreNoResultErrors(this._dnsLookup(e,Se)),ignoreNoResultErrors(this._dnsLookup(e,Ae))]);return{entries:[...t,...s],cacheTtl:0}}catch{return{entries:[],cacheTtl:0}}}async _set(e,t,s){if(this.maxTtl>0&&s>0){s=Math.min(s,this.maxTtl)*1e3;t[Ee]=Date.now()+s;try{await this._cache.set(e,t,s)}catch(e){this.lookupAsync=async()=>{const t=new Error("Cache Error. Please recreate the CacheableLookup instance.");t.cause=e;throw t}}if(isIterable(this._cache)){this._tick(s)}}}async queryAndCache(e){if(this._hostnamesToFallback.has(e)){return this._dnsLookup(e,xe)}let t=await this._resolve(e);if(t.entries.length===0&&this._dnsLookup){t=await this._lookup(e);if(t.entries.length!==0&&this.fallbackDuration>0){this._hostnamesToFallback.add(e)}}const s=t.entries.length===0?this.errorTtl:t.cacheTtl;await this._set(e,t.entries,s);return t.entries}_tick(e){const t=this._nextRemovalTime;if(!t||e<t){clearTimeout(this._removalTimeout);this._nextRemovalTime=e;this._removalTimeout=setTimeout((()=>{this._nextRemovalTime=false;let e=Infinity;const t=Date.now();for(const[s,r]of this._cache){const n=r[Ee];if(t>=n){this._cache.delete(s)}else if(n<e){e=n}}if(e!==Infinity){this._tick(e-t)}}),e);if(this._removalTimeout.unref){this._removalTimeout.unref()}}}install(e){verifyAgent(e);if(ve in e){throw new Error("CacheableLookup has been already installed")}e[ve]=e.createConnection;e[Oe]=this;e.createConnection=(t,s)=>{if(!("lookup"in t)){t.lookup=this.lookup}return e[ve](t,s)}}uninstall(e){verifyAgent(e);if(e[ve]){if(e[Oe]!==this){throw new Error("The agent is not owned by this CacheableLookup instance")}e.createConnection=e[ve];delete e[ve];delete e[Oe]}}updateInterfaceInfo(){const{_iface:e}=this;this._iface=getIfaceInfo();if(e.has4&&!this._iface.has4||e.has6&&!this._iface.has6){this._cache.clear()}}clear(e){if(e){this._cache.delete(e);return}this._cache.clear()}}var Pe=__nccwpck_require__(4645);function parseLinkHeader(e){const t=[];const s=e.split(",");for(const r of s){const[s,...n]=r.split(";");const i=s.trim();if(i[0]!=="<"||i[i.length-1]!==">"){throw new Error(`Invalid format of the Link header reference: ${i}`)}const o=i.slice(1,-1);const a={};if(n.length===0){throw new Error(`Unexpected end of Link header parameters: ${n.join(";")}`)}for(const t of n){const s=t.trim();const r=s.indexOf("=");if(r===-1){throw new Error(`Failed to parse Link header: ${e}`)}const n=s.slice(0,r).trim();const i=s.slice(r+1).trim();a[n]=i}t.push({reference:o,parameters:a})}return t}const[Re,Te]=A.versions.node.split(".").map(Number);function validateSearchParameters(e){for(const t in e){const s=e[t];k.any([x.string,x.number,x.boolean,x.null_,x.undefined],s)}}const je=new Map;let He;const getGlobalDnsCache=()=>{if(He){return He}He=new CacheableLookup;return He};const qe={request:undefined,agent:{http:undefined,https:undefined,http2:undefined},h2session:undefined,decompress:true,timeout:{connect:undefined,lookup:undefined,read:undefined,request:undefined,response:undefined,secureConnect:undefined,send:undefined,socket:undefined},prefixUrl:"",body:undefined,form:undefined,json:undefined,cookieJar:undefined,ignoreInvalidCookies:false,searchParams:undefined,dnsLookup:undefined,dnsCache:undefined,context:{},hooks:{init:[],beforeRequest:[],beforeError:[],beforeRedirect:[],beforeRetry:[],afterResponse:[]},followRedirect:true,maxRedirects:10,cache:undefined,throwHttpErrors:true,username:"",password:"",http2:false,allowGetBody:false,headers:{"user-agent":"got (https://github.com/sindresorhus/got)"},methodRewriting:false,dnsLookupIpVersion:undefined,parseJson:JSON.parse,stringifyJson:JSON.stringify,retry:{limit:2,methods:["GET","PUT","HEAD","DELETE","OPTIONS","TRACE"],statusCodes:[408,413,429,500,502,503,504,521,522,524],errorCodes:["ETIMEDOUT","ECONNRESET","EADDRINUSE","ECONNREFUSED","EPIPE","ENOTFOUND","ENETUNREACH","EAI_AGAIN"],maxRetryAfter:undefined,calculateDelay:({computedValue:e})=>e,backoffLimit:Number.POSITIVE_INFINITY,noise:100},localAddress:undefined,method:"GET",createConnection:undefined,cacheOptions:{shared:undefined,cacheHeuristic:undefined,immutableMinTimeToLive:undefined,ignoreCargoCult:undefined},https:{alpnProtocols:undefined,rejectUnauthorized:undefined,checkServerIdentity:undefined,certificateAuthority:undefined,key:undefined,certificate:undefined,passphrase:undefined,pfx:undefined,ciphers:undefined,honorCipherOrder:undefined,minVersion:undefined,maxVersion:undefined,signatureAlgorithms:undefined,tlsSessionLifetime:undefined,dhparam:undefined,ecdhCurve:undefined,certificateRevocationLists:undefined},encoding:undefined,resolveBodyOnly:false,isStream:false,responseType:"text",url:undefined,pagination:{transform(e){if(e.request.options.responseType==="json"){return e.body}return JSON.parse(e.body)},paginate({response:e}){const t=e.headers.link;if(typeof t!=="string"||t.trim()===""){return false}const s=parseLinkHeader(t);const r=s.find((e=>e.parameters.rel==="next"||e.parameters.rel==='"next"'));if(r){return{url:new T.URL(r.reference,e.url)}}return false},filter:()=>true,shouldContinue:()=>true,countLimit:Number.POSITIVE_INFINITY,backoff:0,requestLimit:1e4,stackAllItems:false},setHost:true,maxHeaderSize:undefined,signal:undefined,enableUnixSockets:true};const cloneInternals=e=>{const{hooks:t,retry:s}=e;const r={...e,context:{...e.context},cacheOptions:{...e.cacheOptions},https:{...e.https},agent:{...e.agent},headers:{...e.headers},retry:{...s,errorCodes:[...s.errorCodes],methods:[...s.methods],statusCodes:[...s.statusCodes]},timeout:{...e.timeout},hooks:{init:[...t.init],beforeRequest:[...t.beforeRequest],beforeError:[...t.beforeError],beforeRedirect:[...t.beforeRedirect],beforeRetry:[...t.beforeRetry],afterResponse:[...t.afterResponse]},searchParams:e.searchParams?new T.URLSearchParams(e.searchParams):undefined,pagination:{...e.pagination}};if(r.url!==undefined){r.prefixUrl=""}return r};const cloneRaw=e=>{const{hooks:t,retry:s}=e;const r={...e};if(x.object(e.context)){r.context={...e.context}}if(x.object(e.cacheOptions)){r.cacheOptions={...e.cacheOptions}}if(x.object(e.https)){r.https={...e.https}}if(x.object(e.cacheOptions)){r.cacheOptions={...r.cacheOptions}}if(x.object(e.agent)){r.agent={...e.agent}}if(x.object(e.headers)){r.headers={...e.headers}}if(x.object(s)){r.retry={...s};if(x.array(s.errorCodes)){r.retry.errorCodes=[...s.errorCodes]}if(x.array(s.methods)){r.retry.methods=[...s.methods]}if(x.array(s.statusCodes)){r.retry.statusCodes=[...s.statusCodes]}}if(x.object(e.timeout)){r.timeout={...e.timeout}}if(x.object(t)){r.hooks={...t};if(x.array(t.init)){r.hooks.init=[...t.init]}if(x.array(t.beforeRequest)){r.hooks.beforeRequest=[...t.beforeRequest]}if(x.array(t.beforeError)){r.hooks.beforeError=[...t.beforeError]}if(x.array(t.beforeRedirect)){r.hooks.beforeRedirect=[...t.beforeRedirect]}if(x.array(t.beforeRetry)){r.hooks.beforeRetry=[...t.beforeRetry]}if(x.array(t.afterResponse)){r.hooks.afterResponse=[...t.afterResponse]}}if(x.object(e.pagination)){r.pagination={...e.pagination}}return r};const getHttp2TimeoutOption=e=>{const t=[e.timeout.socket,e.timeout.connect,e.timeout.lookup,e.timeout.request,e.timeout.secureConnect].filter((e=>typeof e==="number"));if(t.length>0){return Math.min(...t)}return undefined};const init=(e,t,s)=>{const r=e.hooks?.init;if(r){for(const e of r){e(t,s)}}};class Options{constructor(e,t,s){Object.defineProperty(this,"_unixOptions",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_internals",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_merging",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_init",{enumerable:true,configurable:true,writable:true,value:void 0});k.any([x.string,x.urlInstance,x.object,x.undefined],e);k.any([x.object,x.undefined],t);k.any([x.object,x.undefined],s);if(e instanceof Options||t instanceof Options){throw new TypeError("The defaults must be passed as the third argument")}this._internals=cloneInternals(s?._internals??s??qe);this._init=[...s?._init??[]];this._merging=false;this._unixOptions=undefined;try{if(x.plainObject(e)){try{this.merge(e);this.merge(t)}finally{this.url=e.url}}else{try{this.merge(t)}finally{if(t?.url!==undefined){if(e===undefined){this.url=t.url}else{throw new TypeError("The `url` option is mutually exclusive with the `input` argument")}}else if(e!==undefined){this.url=e}}}}catch(e){e.options=this;throw e}}merge(e){if(!e){return}if(e instanceof Options){for(const t of e._init){this.merge(t)}return}e=cloneRaw(e);init(this,e,this);init(e,e,this);this._merging=true;if("isStream"in e){this.isStream=e.isStream}try{let t=false;for(const s in e){if(s==="mutableDefaults"||s==="handlers"){continue}if(s==="url"){continue}if(!(s in this)){throw new Error(`Unexpected option: ${s}`)}this[s]=e[s];t=true}if(t){this._init.push(e)}}finally{this._merging=false}}get request(){return this._internals.request}set request(e){k.any([x.function_,x.undefined],e);this._internals.request=e}get agent(){return this._internals.agent}set agent(e){k.plainObject(e);for(const t in e){if(!(t in this._internals.agent)){throw new TypeError(`Unexpected agent option: ${t}`)}k.any([x.object,x.undefined],e[t])}if(this._merging){Object.assign(this._internals.agent,e)}else{this._internals.agent={...e}}}get h2session(){return this._internals.h2session}set h2session(e){this._internals.h2session=e}get decompress(){return this._internals.decompress}set decompress(e){k.boolean(e);this._internals.decompress=e}get timeout(){return this._internals.timeout}set timeout(e){k.plainObject(e);for(const t in e){if(!(t in this._internals.timeout)){throw new Error(`Unexpected timeout option: ${t}`)}k.any([x.number,x.undefined],e[t])}if(this._merging){Object.assign(this._internals.timeout,e)}else{this._internals.timeout={...e}}}get prefixUrl(){return this._internals.prefixUrl}set prefixUrl(e){k.any([x.string,x.urlInstance],e);if(e===""){this._internals.prefixUrl="";return}e=e.toString();if(!e.endsWith("/")){e+="/"}if(this._internals.prefixUrl&&this._internals.url){const{href:t}=this._internals.url;this._internals.url.href=e+t.slice(this._internals.prefixUrl.length)}this._internals.prefixUrl=e}get body(){return this._internals.body}set body(e){k.any([x.string,x.buffer,x.nodeStream,x.generator,x.asyncGenerator,isFormData,x.undefined],e);if(x.nodeStream(e)){k.truthy(e.readable)}if(e!==undefined){k.undefined(this._internals.form);k.undefined(this._internals.json)}this._internals.body=e}get form(){return this._internals.form}set form(e){k.any([x.plainObject,x.undefined],e);if(e!==undefined){k.undefined(this._internals.body);k.undefined(this._internals.json)}this._internals.form=e}get json(){return this._internals.json}set json(e){if(e!==undefined){k.undefined(this._internals.body);k.undefined(this._internals.form)}this._internals.json=e}get url(){return this._internals.url}set url(e){k.any([x.string,x.urlInstance,x.undefined],e);if(e===undefined){this._internals.url=undefined;return}if(x.string(e)&&e.startsWith("/")){throw new Error("`url` must not start with a slash")}const t=`${this.prefixUrl}${e.toString()}`;const s=new T.URL(t);this._internals.url=s;if(s.protocol==="unix:"){s.href=`http://unix${s.pathname}${s.search}`}if(s.protocol!=="http:"&&s.protocol!=="https:"){const e=new Error(`Unsupported protocol: ${s.protocol}`);e.code="ERR_UNSUPPORTED_PROTOCOL";throw e}if(this._internals.username){s.username=this._internals.username;this._internals.username=""}if(this._internals.password){s.password=this._internals.password;this._internals.password=""}if(this._internals.searchParams){s.search=this._internals.searchParams.toString();this._internals.searchParams=undefined}if(s.hostname==="unix"){if(!this._internals.enableUnixSockets){throw new Error("Using UNIX domain sockets but option `enableUnixSockets` is not enabled")}const e=/(?<socketPath>.+?):(?<path>.+)/.exec(`${s.pathname}${s.search}`);if(e?.groups){const{socketPath:t,path:s}=e.groups;this._unixOptions={socketPath:t,path:s,host:""}}else{this._unixOptions=undefined}return}this._unixOptions=undefined}get cookieJar(){return this._internals.cookieJar}set cookieJar(e){k.any([x.object,x.undefined],e);if(e===undefined){this._internals.cookieJar=undefined;return}let{setCookie:t,getCookieString:s}=e;k.function_(t);k.function_(s);if(t.length===4&&s.length===0){t=(0,de.promisify)(t.bind(e));s=(0,de.promisify)(s.bind(e));this._internals.cookieJar={setCookie:t,getCookieString:s}}else{this._internals.cookieJar=e}}get signal(){return this._internals.signal}set signal(e){k.object(e);this._internals.signal=e}get ignoreInvalidCookies(){return this._internals.ignoreInvalidCookies}set ignoreInvalidCookies(e){k.boolean(e);this._internals.ignoreInvalidCookies=e}get searchParams(){if(this._internals.url){return this._internals.url.searchParams}if(this._internals.searchParams===undefined){this._internals.searchParams=new T.URLSearchParams}return this._internals.searchParams}set searchParams(e){k.any([x.string,x.object,x.undefined],e);const t=this._internals.url;if(e===undefined){this._internals.searchParams=undefined;if(t){t.search=""}return}const s=this.searchParams;let r;if(x.string(e)){r=new T.URLSearchParams(e)}else if(e instanceof T.URLSearchParams){r=e}else{validateSearchParameters(e);r=new T.URLSearchParams;for(const t in e){const n=e[t];if(n===null){r.append(t,"")}else if(n===undefined){s.delete(t)}else{r.append(t,n)}}}if(this._merging){for(const e of r.keys()){s.delete(e)}for(const[e,t]of r){s.append(e,t)}}else if(t){t.search=s.toString()}else{this._internals.searchParams=s}}get searchParameters(){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}set searchParameters(e){throw new Error("The `searchParameters` option does not exist. Use `searchParams` instead.")}get dnsLookup(){return this._internals.dnsLookup}set dnsLookup(e){k.any([x.function_,x.undefined],e);this._internals.dnsLookup=e}get dnsCache(){return this._internals.dnsCache}set dnsCache(e){k.any([x.object,x.boolean,x.undefined],e);if(e===true){this._internals.dnsCache=getGlobalDnsCache()}else if(e===false){this._internals.dnsCache=undefined}else{this._internals.dnsCache=e}}get context(){return this._internals.context}set context(e){k.object(e);if(this._merging){Object.assign(this._internals.context,e)}else{this._internals.context={...e}}}get hooks(){return this._internals.hooks}set hooks(e){k.object(e);for(const t in e){if(!(t in this._internals.hooks)){throw new Error(`Unexpected hook event: ${t}`)}const s=t;const r=e[s];k.any([x.array,x.undefined],r);if(r){for(const e of r){k.function_(e)}}if(this._merging){if(r){this._internals.hooks[s].push(...r)}}else{if(!r){throw new Error(`Missing hook event: ${t}`)}this._internals.hooks[t]=[...r]}}}get followRedirect(){return this._internals.followRedirect}set followRedirect(e){k.boolean(e);this._internals.followRedirect=e}get followRedirects(){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}set followRedirects(e){throw new TypeError("The `followRedirects` option does not exist. Use `followRedirect` instead.")}get maxRedirects(){return this._internals.maxRedirects}set maxRedirects(e){k.number(e);this._internals.maxRedirects=e}get cache(){return this._internals.cache}set cache(e){k.any([x.object,x.string,x.boolean,x.undefined],e);if(e===true){this._internals.cache=je}else if(e===false){this._internals.cache=undefined}else{this._internals.cache=e}}get throwHttpErrors(){return this._internals.throwHttpErrors}set throwHttpErrors(e){k.boolean(e);this._internals.throwHttpErrors=e}get username(){const e=this._internals.url;const t=e?e.username:this._internals.username;return decodeURIComponent(t)}set username(e){k.string(e);const t=this._internals.url;const s=encodeURIComponent(e);if(t){t.username=s}else{this._internals.username=s}}get password(){const e=this._internals.url;const t=e?e.password:this._internals.password;return decodeURIComponent(t)}set password(e){k.string(e);const t=this._internals.url;const s=encodeURIComponent(e);if(t){t.password=s}else{this._internals.password=s}}get http2(){return this._internals.http2}set http2(e){k.boolean(e);this._internals.http2=e}get allowGetBody(){return this._internals.allowGetBody}set allowGetBody(e){k.boolean(e);this._internals.allowGetBody=e}get headers(){return this._internals.headers}set headers(e){k.plainObject(e);if(this._merging){Object.assign(this._internals.headers,lowercaseKeys(e))}else{this._internals.headers=lowercaseKeys(e)}}get methodRewriting(){return this._internals.methodRewriting}set methodRewriting(e){k.boolean(e);this._internals.methodRewriting=e}get dnsLookupIpVersion(){return this._internals.dnsLookupIpVersion}set dnsLookupIpVersion(e){if(e!==undefined&&e!==4&&e!==6){throw new TypeError(`Invalid DNS lookup IP version: ${e}`)}this._internals.dnsLookupIpVersion=e}get parseJson(){return this._internals.parseJson}set parseJson(e){k.function_(e);this._internals.parseJson=e}get stringifyJson(){return this._internals.stringifyJson}set stringifyJson(e){k.function_(e);this._internals.stringifyJson=e}get retry(){return this._internals.retry}set retry(e){k.plainObject(e);k.any([x.function_,x.undefined],e.calculateDelay);k.any([x.number,x.undefined],e.maxRetryAfter);k.any([x.number,x.undefined],e.limit);k.any([x.array,x.undefined],e.methods);k.any([x.array,x.undefined],e.statusCodes);k.any([x.array,x.undefined],e.errorCodes);k.any([x.number,x.undefined],e.noise);if(e.noise&&Math.abs(e.noise)>100){throw new Error(`The maximum acceptable retry noise is +/- 100ms, got ${e.noise}`)}for(const t in e){if(!(t in this._internals.retry)){throw new Error(`Unexpected retry option: ${t}`)}}if(this._merging){Object.assign(this._internals.retry,e)}else{this._internals.retry={...e}}const{retry:t}=this._internals;t.methods=[...new Set(t.methods.map((e=>e.toUpperCase())))];t.statusCodes=[...new Set(t.statusCodes)];t.errorCodes=[...new Set(t.errorCodes)]}get localAddress(){return this._internals.localAddress}set localAddress(e){k.any([x.string,x.undefined],e);this._internals.localAddress=e}get method(){return this._internals.method}set method(e){k.string(e);this._internals.method=e.toUpperCase()}get createConnection(){return this._internals.createConnection}set createConnection(e){k.any([x.function_,x.undefined],e);this._internals.createConnection=e}get cacheOptions(){return this._internals.cacheOptions}set cacheOptions(e){k.plainObject(e);k.any([x.boolean,x.undefined],e.shared);k.any([x.number,x.undefined],e.cacheHeuristic);k.any([x.number,x.undefined],e.immutableMinTimeToLive);k.any([x.boolean,x.undefined],e.ignoreCargoCult);for(const t in e){if(!(t in this._internals.cacheOptions)){throw new Error(`Cache option \`${t}\` does not exist`)}}if(this._merging){Object.assign(this._internals.cacheOptions,e)}else{this._internals.cacheOptions={...e}}}get https(){return this._internals.https}set https(e){k.plainObject(e);k.any([x.boolean,x.undefined],e.rejectUnauthorized);k.any([x.function_,x.undefined],e.checkServerIdentity);k.any([x.string,x.object,x.array,x.undefined],e.certificateAuthority);k.any([x.string,x.object,x.array,x.undefined],e.key);k.any([x.string,x.object,x.array,x.undefined],e.certificate);k.any([x.string,x.undefined],e.passphrase);k.any([x.string,x.buffer,x.array,x.undefined],e.pfx);k.any([x.array,x.undefined],e.alpnProtocols);k.any([x.string,x.undefined],e.ciphers);k.any([x.string,x.buffer,x.undefined],e.dhparam);k.any([x.string,x.undefined],e.signatureAlgorithms);k.any([x.string,x.undefined],e.minVersion);k.any([x.string,x.undefined],e.maxVersion);k.any([x.boolean,x.undefined],e.honorCipherOrder);k.any([x.number,x.undefined],e.tlsSessionLifetime);k.any([x.string,x.undefined],e.ecdhCurve);k.any([x.string,x.buffer,x.array,x.undefined],e.certificateRevocationLists);for(const t in e){if(!(t in this._internals.https)){throw new Error(`HTTPS option \`${t}\` does not exist`)}}if(this._merging){Object.assign(this._internals.https,e)}else{this._internals.https={...e}}}get encoding(){return this._internals.encoding}set encoding(e){if(e===null){throw new TypeError("To get a Buffer, set `options.responseType` to `buffer` instead")}k.any([x.string,x.undefined],e);this._internals.encoding=e}get resolveBodyOnly(){return this._internals.resolveBodyOnly}set resolveBodyOnly(e){k.boolean(e);this._internals.resolveBodyOnly=e}get isStream(){return this._internals.isStream}set isStream(e){k.boolean(e);this._internals.isStream=e}get responseType(){return this._internals.responseType}set responseType(e){if(e===undefined){this._internals.responseType="text";return}if(e!=="text"&&e!=="buffer"&&e!=="json"){throw new Error(`Invalid \`responseType\` option: ${e}`)}this._internals.responseType=e}get pagination(){return this._internals.pagination}set pagination(e){k.object(e);if(this._merging){Object.assign(this._internals.pagination,e)}else{this._internals.pagination=e}}get auth(){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}set auth(e){throw new Error("Parameter `auth` is deprecated. Use `username` / `password` instead.")}get setHost(){return this._internals.setHost}set setHost(e){k.boolean(e);this._internals.setHost=e}get maxHeaderSize(){return this._internals.maxHeaderSize}set maxHeaderSize(e){k.any([x.number,x.undefined],e);this._internals.maxHeaderSize=e}get enableUnixSockets(){return this._internals.enableUnixSockets}set enableUnixSockets(e){k.boolean(e);this._internals.enableUnixSockets=e}toJSON(){return{...this._internals}}[Symbol.for("nodejs.util.inspect.custom")](e,t){return(0,de.inspect)(this._internals,t)}createNativeRequestOptions(){const e=this._internals;const t=e.url;let s;if(t.protocol==="https:"){s=e.http2?e.agent:e.agent.https}else{s=e.agent.http}const{https:r}=e;let{pfx:n}=r;if(x.array(n)&&x.plainObject(n[0])){n=n.map((e=>({buf:e.buffer,passphrase:e.passphrase})))}return{...e.cacheOptions,...this._unixOptions,ALPNProtocols:r.alpnProtocols,ca:r.certificateAuthority,cert:r.certificate,key:r.key,passphrase:r.passphrase,pfx:r.pfx,rejectUnauthorized:r.rejectUnauthorized,checkServerIdentity:r.checkServerIdentity??ge.checkServerIdentity,ciphers:r.ciphers,honorCipherOrder:r.honorCipherOrder,minVersion:r.minVersion,maxVersion:r.maxVersion,sigalgs:r.signatureAlgorithms,sessionTimeout:r.tlsSessionLifetime,dhparam:r.dhparam,ecdhCurve:r.ecdhCurve,crl:r.certificateRevocationLists,lookup:e.dnsLookup??e.dnsCache?.lookup,family:e.dnsLookupIpVersion,agent:s,setHost:e.setHost,method:e.method,maxHeaderSize:e.maxHeaderSize,localAddress:e.localAddress,headers:e.headers,createConnection:e.createConnection,timeout:e.http2?getHttp2TimeoutOption(e):undefined,h2session:e.h2session}}getRequestFunction(){const e=this._internals.url;const{request:t}=this._internals;if(!t&&e){return this.getFallbackRequestFunction()}return t}getFallbackRequestFunction(){const e=this._internals.url;if(!e){return}if(e.protocol==="https:"){if(this._internals.http2){if(Re<15||Re===15&&Te<10){const e=new Error("To use the `http2` option, install Node.js 15.10.0 or above");e.code="EUNSUPPORTED";throw e}return Pe.auto}return ye.request}return j.request}freeze(){const e=this._internals;Object.freeze(e);Object.freeze(e.hooks);Object.freeze(e.hooks.afterResponse);Object.freeze(e.hooks.beforeError);Object.freeze(e.hooks.beforeRedirect);Object.freeze(e.hooks.beforeRequest);Object.freeze(e.hooks.beforeRetry);Object.freeze(e.hooks.init);Object.freeze(e.https);Object.freeze(e.cacheOptions);Object.freeze(e.agent);Object.freeze(e.headers);Object.freeze(e.timeout);Object.freeze(e.retry);Object.freeze(e.retry.errorCodes);Object.freeze(e.retry.methods);Object.freeze(e.retry.statusCodes)}}const isResponseOk=e=>{const{statusCode:t}=e;const s=e.request.options.followRedirect?299:399;return t>=200&&t<=s||t===304};class ParseError extends RequestError{constructor(e,t){const{options:s}=t.request;super(`${e.message} in "${s.url.toString()}"`,e,t.request);this.name="ParseError";this.code="ERR_BODY_PARSE_FAILURE"}}const parseBody=(e,t,s,r)=>{const{rawBody:n}=e;try{if(t==="text"){return n.toString(r)}if(t==="json"){return n.length===0?"":s(n.toString(r))}if(t==="buffer"){return n}}catch(t){throw new ParseError(t,e)}throw new ParseError({message:`Unknown body type '${t}'`,name:"Error"},e)};function isClientRequest(e){return e.writable&&!e.writableEnded}const Ie=isClientRequest;function isUnixSocketURL(e){return e.protocol==="unix:"||e.hostname==="unix"}const $e=x.string(A.versions.brotli);const Ne=new Set(["GET","HEAD"]);const Le=new WeakableMap;const Me=new Set([300,301,302,303,304,307,308]);const De=["socket","connect","continue","information","upgrade"];const core_noop=()=>{};class Request extends R.Duplex{constructor(e,t,s){super({autoDestroy:false,highWaterMark:0});Object.defineProperty(this,"constructor",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_noPipe",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"options",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"response",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"requestUrl",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"redirectUrls",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"retryCount",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_stopRetry",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_downloadedSize",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_uploadedSize",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_stopReading",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_pipedServerResponses",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_request",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_responseSize",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_bodySize",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_unproxyEvents",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_isFromCache",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_cannotHaveBody",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_triggerRead",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_cancelTimeouts",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_removeListeners",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_nativeResponse",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_flushed",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_aborted",{enumerable:true,configurable:true,writable:true,value:void 0});Object.defineProperty(this,"_requestInitialized",{enumerable:true,configurable:true,writable:true,value:void 0});this._downloadedSize=0;this._uploadedSize=0;this._stopReading=false;this._pipedServerResponses=new Set;this._cannotHaveBody=false;this._unproxyEvents=core_noop;this._triggerRead=false;this._cancelTimeouts=core_noop;this._removeListeners=core_noop;this._jobs=[];this._flushed=false;this._requestInitialized=false;this._aborted=false;this.redirectUrls=[];this.retryCount=0;this._stopRetry=core_noop;this.on("pipe",(e=>{if(e.headers){Object.assign(this.options.headers,e.headers)}}));this.on("newListener",(e=>{if(e==="retry"&&this.listenerCount("retry")>0){throw new Error("A retry listener has been attached already.")}}));try{this.options=new Options(e,t,s);if(!this.options.url){if(this.options.prefixUrl===""){throw new TypeError("Missing `url` property")}this.options.url=""}this.requestUrl=this.options.url}catch(e){const{options:t}=e;if(t){this.options=t}this.flush=async()=>{this.flush=async()=>{};this.destroy(e)};return}const{body:r}=this.options;if(x.nodeStream(r)){r.once("error",(e=>{if(this._flushed){this._beforeError(new UploadError(e,this))}else{this.flush=async()=>{this.flush=async()=>{};this._beforeError(new UploadError(e,this))}}}))}if(this.options.signal){const abort=()=>{this.destroy(new AbortError(this))};if(this.options.signal.aborted){abort()}else{this.options.signal.addEventListener("abort",abort);this._removeListeners=()=>{this.options.signal.removeEventListener("abort",abort)}}}}async flush(){if(this._flushed){return}this._flushed=true;try{await this._finalizeBody();if(this.destroyed){return}await this._makeRequest();if(this.destroyed){this._request?.destroy();return}for(const e of this._jobs){e()}this._jobs.length=0;this._requestInitialized=true}catch(e){this._beforeError(e)}}_beforeError(e){if(this._stopReading){return}const{response:t,options:s}=this;const r=this.retryCount+(e.name==="RetryError"?0:1);this._stopReading=true;if(!(e instanceof RequestError)){e=new RequestError(e.message,e,this)}const n=e;void(async()=>{if(t?.readable&&!t.rawBody&&!this._request?.socket?.destroyed){t.setEncoding(this.readableEncoding);const e=await this._setRawBody(t);if(e){t.body=t.rawBody.toString()}}if(this.listenerCount("retry")!==0){let i;try{let e;if(t&&"retry-after"in t.headers){e=Number(t.headers["retry-after"]);if(Number.isNaN(e)){e=Date.parse(t.headers["retry-after"])-Date.now();if(e<=0){e=1}}else{e*=1e3}}const o=s.retry;i=await o.calculateDelay({attemptCount:r,retryOptions:o,error:n,retryAfter:e,computedValue:me({attemptCount:r,retryOptions:o,error:n,retryAfter:e,computedValue:o.maxRetryAfter??s.timeout.request??Number.POSITIVE_INFINITY})})}catch(e){void this._error(new RequestError(e.message,e,this));return}if(i){await new Promise((e=>{const t=setTimeout(e,i);this._stopRetry=()=>{clearTimeout(t);e()}}));if(this.destroyed){return}try{for(const e of this.options.hooks.beforeRetry){await e(n,this.retryCount+1)}}catch(t){void this._error(new RequestError(t.message,e,this));return}if(this.destroyed){return}this.destroy();this.emit("retry",this.retryCount+1,e,(e=>{const t=new Request(s.url,e,s);t.retryCount=this.retryCount+1;A.nextTick((()=>{void t.flush()}));return t}));return}}void this._error(n)})()}_read(){this._triggerRead=true;const{response:e}=this;if(e&&!this._stopReading){if(e.readableLength){this._triggerRead=false}let t;while((t=e.read())!==null){this._downloadedSize+=t.length;const e=this.downloadProgress;if(e.percent<1){this.emit("downloadProgress",e)}this.push(t)}}}_write(e,t,s){const write=()=>{this._writeRequest(e,t,s)};if(this._requestInitialized){write()}else{this._jobs.push(write)}}_final(e){const endRequest=()=>{if(!this._request||this._request.destroyed){e();return}this._request.end((t=>{if(this._request._writableState?.errored){return}if(!t){this._bodySize=this._uploadedSize;this.emit("uploadProgress",this.uploadProgress);this._request.emit("upload-complete")}e(t)}))};if(this._requestInitialized){endRequest()}else{this._jobs.push(endRequest)}}_destroy(e,t){this._stopReading=true;this.flush=async()=>{};this._stopRetry();this._cancelTimeouts();this._removeListeners();if(this.options){const{body:e}=this.options;if(x.nodeStream(e)){e.destroy()}}if(this._request){this._request.destroy()}if(e!==null&&!x.undefined(e)&&!(e instanceof RequestError)){e=new RequestError(e.message,e,this)}t(e)}pipe(e,t){if(e instanceof j.ServerResponse){this._pipedServerResponses.add(e)}return super.pipe(e,t)}unpipe(e){if(e instanceof j.ServerResponse){this._pipedServerResponses.delete(e)}super.unpipe(e);return this}async _finalizeBody(){const{options:e}=this;const{headers:t}=e;const s=!x.undefined(e.form);const r=!x.undefined(e.json);const n=!x.undefined(e.body);const i=Ne.has(e.method)&&!(e.method==="GET"&&e.allowGetBody);this._cannotHaveBody=i;if(s||r||n){if(i){throw new TypeError(`The \`${e.method}\` method cannot be used with a body`)}const r=!x.string(t["content-type"]);if(n){if(isFormData(e.body)){const s=new FormDataEncoder(e.body);if(r){t["content-type"]=s.headers["Content-Type"]}if("Content-Length"in s.headers){t["content-length"]=s.headers["Content-Length"]}e.body=s.encode()}if(is_form_data_isFormData(e.body)&&r){t["content-type"]=`multipart/form-data; boundary=${e.body.getBoundary()}`}}else if(s){if(r){t["content-type"]="application/x-www-form-urlencoded"}const{form:s}=e;e.form=undefined;e.body=new T.URLSearchParams(s).toString()}else{if(r){t["content-type"]="application/json"}const{json:s}=e;e.json=undefined;e.body=e.stringifyJson(s)}const o=await getBodySize(e.body,e.headers);if(x.undefined(t["content-length"])&&x.undefined(t["transfer-encoding"])&&!i&&!x.undefined(o)){t["content-length"]=String(o)}}if(e.responseType==="json"&&!("accept"in e.headers)){e.headers.accept="application/json"}this._bodySize=Number(t["content-length"])||undefined}async _onResponseBase(e){if(this.isAborted){return}const{options:t}=this;const{url:s}=t;this._nativeResponse=e;if(t.decompress){e=J(e)}const r=e.statusCode;const n=e;n.statusMessage=n.statusMessage??j.STATUS_CODES[r];n.url=t.url.toString();n.requestUrl=this.requestUrl;n.redirectUrls=this.redirectUrls;n.request=this;n.isFromCache=this._nativeResponse.fromCache??false;n.ip=this.ip;n.retryCount=this.retryCount;n.ok=isResponseOk(n);this._isFromCache=n.isFromCache;this._responseSize=Number(e.headers["content-length"])||undefined;this.response=n;e.once("end",(()=>{this._responseSize=this._downloadedSize;this.emit("downloadProgress",this.downloadProgress)}));e.once("error",(t=>{this._aborted=true;e.destroy();this._beforeError(new ReadError(t,this))}));e.once("aborted",(()=>{this._aborted=true;this._beforeError(new ReadError({name:"Error",message:"The server aborted pending request",code:"ECONNRESET"},this))}));this.emit("downloadProgress",this.downloadProgress);const i=e.headers["set-cookie"];if(x.object(t.cookieJar)&&i){let e=i.map((async e=>t.cookieJar.setCookie(e,s.toString())));if(t.ignoreInvalidCookies){e=e.map((async e=>{try{await e}catch{}}))}try{await Promise.all(e)}catch(e){this._beforeError(e);return}}if(this.isAborted){return}if(t.followRedirect&&e.headers.location&&Me.has(r)){e.resume();this._cancelTimeouts();this._unproxyEvents();if(this.redirectUrls.length>=t.maxRedirects){this._beforeError(new MaxRedirectsError(this));return}this._request=undefined;const i=new Options(undefined,undefined,this.options);const o=r===303&&i.method!=="GET"&&i.method!=="HEAD";const a=r!==307&&r!==308;const c=i.methodRewriting&&a;if(o||c){i.method="GET";i.body=undefined;i.json=undefined;i.form=undefined;delete i.headers["content-length"]}try{const t=P.Buffer.from(e.headers.location,"binary").toString();const r=new T.URL(t,s);if(!isUnixSocketURL(s)&&isUnixSocketURL(r)){this._beforeError(new RequestError("Cannot redirect to UNIX socket",{},this));return}if(r.hostname!==s.hostname||r.port!==s.port){if("host"in i.headers){delete i.headers.host}if("cookie"in i.headers){delete i.headers.cookie}if("authorization"in i.headers){delete i.headers.authorization}if(i.username||i.password){i.username="";i.password=""}}else{r.username=i.username;r.password=i.password}this.redirectUrls.push(r);i.prefixUrl="";i.url=r;for(const e of i.hooks.beforeRedirect){await e(i,n)}this.emit("redirect",i,n);this.options=i;await this._makeRequest()}catch(e){this._beforeError(e);return}return}if(t.isStream&&t.throwHttpErrors&&!isResponseOk(n)){this._beforeError(new HTTPError(n));return}e.on("readable",(()=>{if(this._triggerRead){this._read()}}));this.on("resume",(()=>{e.resume()}));this.on("pause",(()=>{e.pause()}));e.once("end",(()=>{this.push(null)}));if(this._noPipe){const t=await this._setRawBody();if(t){this.emit("response",e)}return}this.emit("response",e);for(const s of this._pipedServerResponses){if(s.headersSent){continue}for(const r in e.headers){const n=t.decompress?r!=="content-encoding":true;const i=e.headers[r];if(n){s.setHeader(r,i)}}s.statusCode=r}}async _setRawBody(e=this){if(e.readableEnded){return false}try{const t=await(0,U.buffer)(e);if(!this.isAborted){this.response.rawBody=t;return true}}catch{}return false}async _onResponse(e){try{await this._onResponseBase(e)}catch(e){this._beforeError(e)}}_onRequest(e){const{options:t}=this;const{timeout:s,url:r}=t;$(e);if(this.options.http2){e.setTimeout(0)}this._cancelTimeouts=timedOut(e,s,r);const n=t.cache?"cacheableResponse":"response";e.once(n,(e=>{void this._onResponse(e)}));e.once("error",(t=>{this._aborted=true;e.destroy();t=t instanceof timed_out_TimeoutError?new TimeoutError(t,this.timings,this):new RequestError(t.message,t,this);this._beforeError(t)}));this._unproxyEvents=proxyEvents(e,this,De);this._request=e;this.emit("uploadProgress",this.uploadProgress);this._sendBody();this.emit("request",e)}async _asyncWrite(e){return new Promise(((t,s)=>{super.write(e,(e=>{if(e){s(e);return}t()}))}))}_sendBody(){const{body:e}=this.options;const t=this.redirectUrls.length===0?this:this._request??this;if(x.nodeStream(e)){e.pipe(t)}else if(x.generator(e)||x.asyncGenerator(e)){(async()=>{try{for await(const t of e){await this._asyncWrite(t)}super.end()}catch(e){this._beforeError(e)}})()}else if(!x.undefined(e)){this._writeRequest(e,undefined,(()=>{}));t.end()}else if(this._cannotHaveBody||this._noPipe){t.end()}}_prepareCache(e){if(!Le.has(e)){const t=new W(((e,t)=>{const s=e._request(e,t);if(x.promise(s)){s.once=(e,t)=>{if(e==="error"){(async()=>{try{await s}catch(e){t(e)}})()}else if(e==="abort"){(async()=>{try{const e=await s;e.once("abort",t)}catch{}})()}else{throw new Error(`Unknown HTTP2 promise event: ${e}`)}return s}}return s}),e);Le.set(e,t.request())}}async _createCacheableRequest(e,t){return new Promise(((s,r)=>{Object.assign(t,urlToOptions(e));let n;const i=Le.get(t.cache)(t,(async e=>{e._readableState.autoDestroy=false;if(n){const fix=()=>{if(e.req){e.complete=e.req.res.complete}};e.prependOnceListener("end",fix);fix();(await n).emit("cacheableResponse",e)}s(e)}));i.once("error",r);i.once("request",(async e=>{n=e;s(n)}))}))}async _makeRequest(){const{options:e}=this;const{headers:t,username:s,password:r}=e;const n=e.cookieJar;for(const e in t){if(x.undefined(t[e])){delete t[e]}else if(x.null_(t[e])){throw new TypeError(`Use \`undefined\` instead of \`null\` to delete the \`${e}\` header`)}}if(e.decompress&&x.undefined(t["accept-encoding"])){t["accept-encoding"]=$e?"gzip, deflate, br":"gzip, deflate"}if(s||r){const e=P.Buffer.from(`${s}:${r}`).toString("base64");t.authorization=`Basic ${e}`}if(n){const s=await n.getCookieString(e.url.toString());if(x.nonEmptyString(s)){t.cookie=s}}e.prefixUrl="";let i;for(const t of e.hooks.beforeRequest){const s=await t(e);if(!x.undefined(s)){i=()=>s;break}}if(!i){i=e.getRequestFunction()}const o=e.url;this._requestOptions=e.createNativeRequestOptions();if(e.cache){this._requestOptions._request=i;this._requestOptions.cache=e.cache;this._requestOptions.body=e.body;this._prepareCache(e.cache)}const a=e.cache?this._createCacheableRequest:i;try{let t=a(o,this._requestOptions);if(x.promise(t)){t=await t}if(x.undefined(t)){t=e.getFallbackRequestFunction()(o,this._requestOptions);if(x.promise(t)){t=await t}}if(Ie(t)){this._onRequest(t)}else if(this.writable){this.once("finish",(()=>{void this._onResponse(t)}));this._sendBody()}else{void this._onResponse(t)}}catch(e){if(e instanceof types_CacheError){throw new CacheError(e,this)}throw e}}async _error(e){try{if(e instanceof HTTPError&&!this.options.throwHttpErrors){}else{for(const t of this.options.hooks.beforeError){e=await t(e)}}}catch(t){e=new RequestError(t.message,t,this)}this.destroy(e)}_writeRequest(e,t,s){if(!this._request||this._request.destroyed){return}this._request.write(e,t,(r=>{if(!r&&!this._request.destroyed){this._uploadedSize+=P.Buffer.byteLength(e,t);const s=this.uploadProgress;if(s.percent<1){this.emit("uploadProgress",s)}}s(r)}))}get ip(){return this.socket?.remoteAddress}get isAborted(){return this._aborted}get socket(){return this._request?.socket??undefined}get downloadProgress(){let e;if(this._responseSize){e=this._downloadedSize/this._responseSize}else if(this._responseSize===this._downloadedSize){e=1}else{e=0}return{percent:e,transferred:this._downloadedSize,total:this._responseSize}}get uploadProgress(){let e;if(this._bodySize){e=this._uploadedSize/this._bodySize}else if(this._bodySize===this._uploadedSize){e=1}else{e=0}return{percent:e,transferred:this._uploadedSize,total:this._bodySize}}get timings(){return this._request?.timings}get isFromCache(){return this._isFromCache}get reusedSocket(){return this._request?.reusedSocket}}class types_CancelError extends RequestError{constructor(e){super("Promise was canceled",{},e);this.name="CancelError";this.code="ERR_CANCELED"}get isCanceled(){return true}}const Ue=["request","response","redirect","uploadProgress","downloadProgress"];function asPromise(e){let t;let s;let r;const n=new S.EventEmitter;const i=new PCancelable(((o,a,c)=>{c((()=>{t.destroy()}));c.shouldReject=false;c((()=>{a(new types_CancelError(t))}));const makeRequest=l=>{c((()=>{}));const h=e??new Request(undefined,undefined,r);h.retryCount=l;h._noPipe=true;t=h;h.once("response",(async e=>{const t=(e.headers["content-encoding"]??"").toLowerCase();const r=t==="gzip"||t==="deflate"||t==="br";const{options:n}=h;if(r&&!n.decompress){e.body=e.rawBody}else{try{e.body=parseBody(e,n.responseType,n.parseJson,n.encoding)}catch(t){e.body=e.rawBody.toString();if(isResponseOk(e)){h._beforeError(t);return}}}try{const t=n.hooks.afterResponse;for(const[s,r]of t.entries()){e=await r(e,(async e=>{n.merge(e);n.prefixUrl="";if(e.url){n.url=e.url}n.hooks.afterResponse=n.hooks.afterResponse.slice(0,s);throw new RetryError(h)}));if(!(x.object(e)&&x.number(e.statusCode)&&!x.nullOrUndefined(e.body))){throw new TypeError("The `afterResponse` hook returned an invalid value")}}}catch(e){h._beforeError(e);return}s=e;if(!isResponseOk(e)){h._beforeError(new HTTPError(e));return}h.destroy();o(h.options.resolveBodyOnly?e.body:e)}));const onError=e=>{if(i.isCanceled){return}const{options:t}=h;if(e instanceof HTTPError&&!t.throwHttpErrors){const{response:t}=e;h.destroy();o(h.options.resolveBodyOnly?t.body:t);return}a(e)};h.once("error",onError);const u=h.options?.body;h.once("retry",((t,s)=>{e=undefined;const n=h.options.body;if(u===n&&x.nodeStream(n)){s.message="Cannot retry with consumed body stream";onError(s);return}r=h.options;makeRequest(t)}));proxyEvents(h,n,Ue);if(x.undefined(e)){void h.flush()}};makeRequest(0)}));i.on=(e,t)=>{n.on(e,t);return i};i.off=(e,t)=>{n.off(e,t);return i};const shortcut=e=>{const t=(async()=>{await i;const{options:t}=s.request;return parseBody(s,e,t.parseJson,t.encoding)})();Object.defineProperties(t,Object.getOwnPropertyDescriptors(i));return t};i.json=()=>{if(t.options){const{headers:e}=t.options;if(!t.writableFinished&&!("accept"in e)){e.accept="application/json"}}return shortcut("json")};i.buffer=()=>shortcut("buffer");i.text=()=>shortcut("text");return i}const delay=async e=>new Promise((t=>{setTimeout(t,e)}));const isGotInstance=e=>x.function_(e);const Be=["get","post","put","patch","head","delete"];const create=e=>{e={options:new Options(undefined,undefined,e.options),handlers:[...e.handlers],mutableDefaults:e.mutableDefaults};Object.defineProperty(e,"mutableDefaults",{enumerable:true,configurable:false,writable:false});const got=(t,s,r=e.options)=>{const n=new Request(t,s,r);let i;const lastHandler=e=>{n.options=e;n._noPipe=!e.isStream;void n.flush();if(e.isStream){return n}if(!i){i=asPromise(n)}return i};let o=0;const iterateHandlers=t=>{const s=e.handlers[o++]??lastHandler;const r=s(t,iterateHandlers);if(x.promise(r)&&!n.options.isStream){if(!i){i=asPromise(n)}if(r!==i){const e=Object.getOwnPropertyDescriptors(i);for(const t in e){if(t in r){delete e[t]}}Object.defineProperties(r,e);r.cancel=i.cancel}}return r};return iterateHandlers(n.options)};got.extend=(...t)=>{const s=new Options(undefined,undefined,e.options);const r=[...e.handlers];let n;for(const e of t){if(isGotInstance(e)){s.merge(e.defaults.options);r.push(...e.defaults.handlers);n=e.defaults.mutableDefaults}else{s.merge(e);if(e.handlers){r.push(...e.handlers)}n=e.mutableDefaults}}return create({options:s,handlers:r,mutableDefaults:Boolean(n)})};const paginateEach=async function*(t,s){let r=new Options(t,s,e.options);r.resolveBodyOnly=false;const{pagination:n}=r;k.function_(n.transform);k.function_(n.shouldContinue);k.function_(n.filter);k.function_(n.paginate);k.number(n.countLimit);k.number(n.requestLimit);k.number(n.backoff);const i=[];let{countLimit:o}=n;let a=0;while(a<n.requestLimit){if(a!==0){await delay(n.backoff)}const e=await got(undefined,undefined,r);const t=await n.transform(e);const s=[];k.array(t);for(const e of t){if(n.filter({item:e,currentItems:s,allItems:i})){if(!n.shouldContinue({item:e,currentItems:s,allItems:i})){return}yield e;if(n.stackAllItems){i.push(e)}s.push(e);if(--o<=0){return}}}const c=n.paginate({response:e,currentItems:s,allItems:i});if(c===false){return}if(c===e.request.options){r=e.request.options}else{r.merge(c);k.any([x.urlInstance,x.undefined],c.url);if(c.url!==undefined){r.prefixUrl="";r.url=c.url}}a++}};got.paginate=paginateEach;got.paginate.all=async(e,t)=>{const s=[];for await(const r of paginateEach(e,t)){s.push(r)}return s};got.paginate.each=paginateEach;got.stream=(e,t)=>got(e,{...t,isStream:true});for(const e of Be){got[e]=(t,s)=>got(t,{...s,method:e});got.stream[e]=(t,s)=>got(t,{...s,method:e,isStream:true})}if(!e.mutableDefaults){Object.freeze(e.handlers);e.options.freeze()}Object.defineProperty(got,"defaults",{value:e,writable:false,configurable:false,enumerable:true});return got};const Fe=create;const ze={options:new Options,handlers:[],mutableDefaults:false};const Ve=Fe(ze);const We=Ve;var Ge=__nccwpck_require__(8818);var Je=__nccwpck_require__.n(Ge);var Ke=__nccwpck_require__(1017);var Ye=__nccwpck_require__.n(Ke);const Qe="12b77c4bc9c1832cee8881244659065ee1d84c70c3d29e6eaf92e6798cc2ca72";const Xe="9a4441809ac9331cdbc6a50fba1a8fbfd08bc490bc8644587ee84a4d6f924fea";const verify=e=>{let t=n().createHash("sha256");t.update(e);const s=t.digest("hex");if(s===Qe){return e}else if(s===Xe){console.warn(`${Je().yellow("You have entered a headered ROM")}. The header will now be removed.`);const t=e.slice(512);return verify(t)}throw Error("Invalid vanilla ROM")};function getVanilla(e){const t=s().existsSync(e);if(!t){throw new Error(`Could not find ROM: ${e}`)}const r=s().readFileSync(e);return verify(r)}const fetchSeedData=async(e,t)=>{const s=new URL("/api/seed",t.baseUrl);try{const t=await We.post(s.href,{json:e}).json();return t}catch(e){if(e instanceof HTTPError){const t=e;const r=JSON.parse(t.response.body);if(typeof r.error=="object"){throw new Error(`${r.error.code}: ${s.href}`)}else{const e=r.error||"Error fetching seed data";throw new Error(e)}}else if(e instanceof RequestError){const s=e;let r;switch(true){case s.code==="ECONNREFUSED":r=`Could not connect to server: ${t.baseUrl}`;break;default:r=s.message||"Error fetching seed data";break}throw new Error(r)}else{const t=e;const s=t.message||"Error fetching seed data";throw new Error(s)}}};const fetchBasePatch=async(e,t)=>{const s=new URL(e,t).href;const{body:r}=await We.get(s,{responseType:"buffer"});return r};const createFile=async(e,t,r,n)=>{const i=t.map((e=>[e[0],e[1],new Uint8Array(Object.values(e[2]))]));const o=patchRom(e,new y(new Uint8Array(r)),i);s().writeFileSync(n,o);const a=Ye().join(process.cwd(),n);console.log(`Generated ${Je().cyan(n)} at ${Je().magenta(a)}`)};async function main(){o.name("dash.headless.js").usage(`-r <vanillaRom> -p <preset> [options]`).description("Generate a randomized DASH seed from the command line").requiredOption("-r --vanillaPath <vanillaRom>","path to vanilla rom").requiredOption("-p --preset <preset>","preset to use").option("-b --base-url <url>","base url for rolling the seed","https://dashrando.net/");o.parse();const e=o.opts();const{vanillaPath:t,preset:s,baseUrl:r}=e;const n=await getVanilla(t);const i=await fetchSeedData({preset:s},e);const a=await fetchBasePatch(i.basePatchUrl,r);await createFile(n,i.seedPatch,a,i.fileName);return 0}main().then((e=>{process.exit(e)})).catch((e=>{console.error(Je().red(e.message));process.exit(1)}))})();